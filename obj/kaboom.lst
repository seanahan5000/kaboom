ca65 V2.18 - N/A
Main file   : kaboom.s
Current file: kaboom.s

000000r 1               
000000r 1               ; Copyright (C) 2024 Sean Callahan
000000r 1               
000000r 1               ; Timing:
000000r 1               ;
000000r 1               ;   VBlank           4550 ( 70 * 65)
000000r 1               ;
000000r 1               ;   Active Top       2600 ( 40 * 65)
000000r 1               ;   Active Center    9230 (142 * 65)
000000r 1               ;   Active Bottom     650 ( 10 * 65)
000000r 1               ;
000000r 1               ;   VBlank+Bottom    5200 ((70 + 10) * 65)
000000r 1               ;
000000r 1               ;   Frame Total     17030 (262 * 65)
000000r 1               
000000r 1               ;   Update score      794
000000r 1               ;   Erase bomber      543
000000r 1               ;   Erase top bomb    277
000000r 1               ;   Draw bomber      1099
000000r 1               ;   Update bombs     6316
000000r 1               ;  (Draw top bomb     928)
000000r 1               ;  (Erase buckets    1048)
000000r 1               ;   Draw buckets     1463
000000r 1               ;   Read paddle      3105
000000r 1               ;   ---------------------
000000r 1               ;   Total cycles   ~13600 (~14350 measured)
000000r 1               
000000r 1               .feature labels_without_colons
000000r 1               
000000r 1               .macro same_page_as arg
000000r 1                   .if ((* - 1) / 256) <> (arg / 256)
000000r 1                       .error .sprintf("### page crossing detected at $%0.4x -> $%0.4x", arg, *)
000000r 1                   .endif
000000r 1               .endmacro
000000r 1               
000000r 1               scoreHeight     =   9                   ; blank line + digits
000000r 1               topHeight       =   scoreHeight + 31
000000r 1               centerHeight    =   142
000000r 1               bottomHeight    =   10
000000r 1               
000000r 1               scoreLeft       =   75
000000r 1               
000000r 1               bomb0Top        =   29
000000r 1               bombPhaseDy     =   18
000000r 1               bombsTop        =   bomb0Top+bombPhaseDy
000000r 1               bombsBottom     =   topHeight+centerHeight
000000r 1               bombMaxDy       =   4
000000r 1               
000000r 1               bomberMinX      =   7                   ; inclusive
000000r 1                                                       ;   must be X * 2 div 7 == 2
000000r 1                                                       ;           X * 2 mod 7 == 0
000000r 1               bomberMaxX      =   126                 ; inclusive
000000r 1                                                       ;   must be X * 2 div 7 == 36
000000r 1                                                       ;           X * 2 mod 7 == 0
000000r 1               bucketsMinX     =   3                   ; inclusive
000000r 1               bucketsMaxX     =   121                 ; inclusive
000000r 1               
000000r 1               bucketTopY      =   141
000000r 1               bucketMidY      =   157
000000r 1               bucketBotY      =   173
000000r 1               bucketHeight    =   8
000000r 1               
000000r 1               bucketByteWidth =   6
000000r 1               
000000r 1               logoLeft        =   12
000000r 1               logoByteWidth   =   16
000000r 1               logoHeight      =   16
000000r 1               
000000r 1               vaporlockBlack  =   $80
000000r 1               
000000r 1               gameWaveMax     =   7
000000r 1               
000000r 1               temp            :=  $00
000000r 1               offset          :=  $01
000000r 1               linenum         :=  $02
000000r 1               column          :=  $03
000000r 1               ptr             :=  $04
000000r 1               ptr_h           :=  $05
000000r 1               mb_ptr          :=  $06
000000r 1               mb_ptr_h        :=  $07
000000r 1               bucket_xcol     :=  $08
000000r 1               bucket_xshift   :=  $09
000000r 1               hit_xcol        :=  $0a
000000r 1               hit_xshift      :=  $0b
000000r 1               logo_offset     :=  $0c
000000r 1               screenl         :=  $0d
000000r 1               screenh         :=  $0e
000000r 1               machine_type    :=  $0f                 ; %00000000 II/II+
000000r 1                                                       ; %10000000 IIe or newer
000000r 1                                                       ; %11000000 IIc
000000r 1                                                       ; %10000001 IIgs
000000r 1               ; init_bombs uses $50-$58
000000r 1               
000000r 1               ; bombs variables
000000r 1               ;
000000r 1               bomb_dy         :=  $61
000000r 1               bomb_index      :=  $62
000000r 1               start_line      :=  $63
000000r 1               end_line        :=  $64
000000r 1               bomb_ptr        :=  $65
000000r 1               bomb_ptr_h      :=  $66
000000r 1               
000000r 1               ; score variables
000000r 1               lmask           :=  $70
000000r 1               rmask           :=  $71
000000r 1               data_ptr        :=  $72
000000r 1               data_ptr_h      :=  $73
000000r 1               cur_digits      :=  $74                 ; $74-$79
000000r 1               new_digits      :=  $7a                 ; $7a-$7f
000000r 1               
000000r 1                                                       ; (start of init clear)
000000r 1               game_select     :=  $80
000000r 1               vblank_count    :=  $81
000000r 1               random_seed     :=  $82
000000r 1               ;
000000r 1               active_bombs    :=  $88
000000r 1               ;
000000r 1               bomber_x        :=  $9a
000000r 1               bomber_dir      :=  $9b
000000r 1               splash_bucket   :=  $9c
000000r 1               buckets_x       :=  $9d
000000r 1               ;
000000r 1                                                       ; (start of reset clear)
000000r 1               player_num      :=  $a0                 ; current player (0 or 1)
000000r 1               
000000r 1               player_state    :=  $a1
000000r 1               player_buckets  :=  $a1
000000r 1               player_wave     :=  $a2
000000r 1               player_score    :=  $a3                 ; $a3-$a5
000000r 1               
000000r 1               other_state     :=  $a6
000000r 1               other_buckets   :=  $a6
000000r 1               other_wave      :=  $a7
000000r 1               other_score     :=  $a8                 ; $a8-$aa
000000r 1               
000000r 1               bombs_dropped   :=  $ab
000000r 1               exp_bomb_index  :=  $ac
000000r 1               game_state      :=  $ad
000000r 1               exp_bomb_frame  :=  $ae
000000r 1               splash_frame    :=  $af
000000r 1               
000000r 1               bonus_sound     :=  $b0
000000r 1               bomb_vphase     :=  $b1
000000r 1               ;
000000r 1               bomb_frames     :=  $b3                 ; $b3-$ba
000000r 1               bomb_columns    :=  $bb                 ; $bb-$c2
000000r 1               bomb_hit        :=  $c3
000000r 1               bucket_hit      :=  $c4
000000r 1                                                       ; (end of reset clear)
000000r 1                                                       ; (end of init clear)
000000r 1               last_var        :=  bucket_hit
000000r 1               
000000r 1               ; pointers to bomb blitting code
000000r 1               table_buffer0_lo =  $1000
000000r 1               table_buffer1_lo =  $1100
000000r 1               table_buffer2_lo =  $1200
000000r 1               table_buffer3_lo =  $1300
000000r 1               table_buffer0_hi =  $1400
000000r 1               table_buffer1_hi =  $1500
000000r 1               table_buffer2_hi =  $1600
000000r 1               table_buffer3_hi =  $1700
000000r 1               
000000r 1               ; bomb and bucket clipping buffer
000000r 1               clip_buffer     =   $1800
000000r 1               
000000r 1               ; bomb blitting code
000000r 1               code_buffer0    =   $8000
000000r 1               code_buffer1    =   $8800
000000r 1               code_buffer2    =   $9000
000000r 1               code_buffer3    =   $9800
000000r 1               
000000r 1               keyboard        :=  $C000
000000r 1               unstrobe        :=  $C010
000000r 1               graphics        :=  $C050
000000r 1               fullscreen      :=  $C052
000000r 1               primary         :=  $C054
000000r 1               hires           :=  $C057
000000r 1               pbutton0        :=  $C061
000000r 1               
000000r 1                               .include "hires.s"
000000r 2               hiresLine0      =   $2000
000000r 2               hiresLine1      =   $2400
000000r 2               hiresLine2      =   $2800
000000r 2               hiresLine3      =   $2C00
000000r 2               hiresLine4      =   $3000
000000r 2               hiresLine5      =   $3400
000000r 2               hiresLine6      =   $3800
000000r 2               hiresLine7      =   $3C00
000000r 2               hiresLine8      =   $2080
000000r 2               hiresLine9      =   $2480
000000r 2               hiresLine10     =   $2880
000000r 2               hiresLine11     =   $2C80
000000r 2               hiresLine12     =   $3080
000000r 2               hiresLine13     =   $3480
000000r 2               hiresLine14     =   $3880
000000r 2               hiresLine15     =   $3C80
000000r 2               hiresLine16     =   $2100
000000r 2               hiresLine17     =   $2500
000000r 2               hiresLine18     =   $2900
000000r 2               hiresLine19     =   $2D00
000000r 2               hiresLine20     =   $3100
000000r 2               hiresLine21     =   $3500
000000r 2               hiresLine22     =   $3900
000000r 2               hiresLine23     =   $3D00
000000r 2               hiresLine24     =   $2180
000000r 2               hiresLine25     =   $2580
000000r 2               hiresLine26     =   $2980
000000r 2               hiresLine27     =   $2D80
000000r 2               hiresLine28     =   $3180
000000r 2               hiresLine29     =   $3580
000000r 2               hiresLine30     =   $3980
000000r 2               hiresLine31     =   $3D80
000000r 2               hiresLine32     =   $2200
000000r 2               hiresLine33     =   $2600
000000r 2               hiresLine34     =   $2A00
000000r 2               hiresLine35     =   $2E00
000000r 2               hiresLine36     =   $3200
000000r 2               hiresLine37     =   $3600
000000r 2               hiresLine38     =   $3A00
000000r 2               hiresLine39     =   $3E00
000000r 2               hiresLine40     =   $2280
000000r 2               hiresLine41     =   $2680
000000r 2               hiresLine42     =   $2A80
000000r 2               hiresLine43     =   $2E80
000000r 2               hiresLine44     =   $3280
000000r 2               hiresLine45     =   $3680
000000r 2               hiresLine46     =   $3A80
000000r 2               hiresLine47     =   $3E80
000000r 2               hiresLine48     =   $2300
000000r 2               hiresLine49     =   $2700
000000r 2               hiresLine50     =   $2B00
000000r 2               hiresLine51     =   $2F00
000000r 2               hiresLine52     =   $3300
000000r 2               hiresLine53     =   $3700
000000r 2               hiresLine54     =   $3B00
000000r 2               hiresLine55     =   $3F00
000000r 2               hiresLine56     =   $2380
000000r 2               hiresLine57     =   $2780
000000r 2               hiresLine58     =   $2B80
000000r 2               hiresLine59     =   $2F80
000000r 2               hiresLine60     =   $3380
000000r 2               hiresLine61     =   $3780
000000r 2               hiresLine62     =   $3B80
000000r 2               hiresLine63     =   $3F80
000000r 2               hiresLine64     =   $2028
000000r 2               hiresLine65     =   $2428
000000r 2               hiresLine66     =   $2828
000000r 2               hiresLine67     =   $2C28
000000r 2               hiresLine68     =   $3028
000000r 2               hiresLine69     =   $3428
000000r 2               hiresLine70     =   $3828
000000r 2               hiresLine71     =   $3C28
000000r 2               hiresLine72     =   $20A8
000000r 2               hiresLine73     =   $24A8
000000r 2               hiresLine74     =   $28A8
000000r 2               hiresLine75     =   $2CA8
000000r 2               hiresLine76     =   $30A8
000000r 2               hiresLine77     =   $34A8
000000r 2               hiresLine78     =   $38A8
000000r 2               hiresLine79     =   $3CA8
000000r 2               hiresLine80     =   $2128
000000r 2               hiresLine81     =   $2528
000000r 2               hiresLine82     =   $2928
000000r 2               hiresLine83     =   $2D28
000000r 2               hiresLine84     =   $3128
000000r 2               hiresLine85     =   $3528
000000r 2               hiresLine86     =   $3928
000000r 2               hiresLine87     =   $3D28
000000r 2               hiresLine88     =   $21A8
000000r 2               hiresLine89     =   $25A8
000000r 2               hiresLine90     =   $29A8
000000r 2               hiresLine91     =   $2DA8
000000r 2               hiresLine92     =   $31A8
000000r 2               hiresLine93     =   $35A8
000000r 2               hiresLine94     =   $39A8
000000r 2               hiresLine95     =   $3DA8
000000r 2               hiresLine96     =   $2228
000000r 2               hiresLine97     =   $2628
000000r 2               hiresLine98     =   $2A28
000000r 2               hiresLine99     =   $2E28
000000r 2               hiresLine100    =   $3228
000000r 2               hiresLine101    =   $3628
000000r 2               hiresLine102    =   $3A28
000000r 2               hiresLine103    =   $3E28
000000r 2               hiresLine104    =   $22A8
000000r 2               hiresLine105    =   $26A8
000000r 2               hiresLine106    =   $2AA8
000000r 2               hiresLine107    =   $2EA8
000000r 2               hiresLine108    =   $32A8
000000r 2               hiresLine109    =   $36A8
000000r 2               hiresLine110    =   $3AA8
000000r 2               hiresLine111    =   $3EA8
000000r 2               hiresLine112    =   $2328
000000r 2               hiresLine113    =   $2728
000000r 2               hiresLine114    =   $2B28
000000r 2               hiresLine115    =   $2F28
000000r 2               hiresLine116    =   $3328
000000r 2               hiresLine117    =   $3728
000000r 2               hiresLine118    =   $3B28
000000r 2               hiresLine119    =   $3F28
000000r 2               hiresLine120    =   $23A8
000000r 2               hiresLine121    =   $27A8
000000r 2               hiresLine122    =   $2BA8
000000r 2               hiresLine123    =   $2FA8
000000r 2               hiresLine124    =   $33A8
000000r 2               hiresLine125    =   $37A8
000000r 2               hiresLine126    =   $3BA8
000000r 2               hiresLine127    =   $3FA8
000000r 2               hiresLine128    =   $2050
000000r 2               hiresLine129    =   $2450
000000r 2               hiresLine130    =   $2850
000000r 2               hiresLine131    =   $2C50
000000r 2               hiresLine132    =   $3050
000000r 2               hiresLine133    =   $3450
000000r 2               hiresLine134    =   $3850
000000r 2               hiresLine135    =   $3C50
000000r 2               hiresLine136    =   $20D0
000000r 2               hiresLine137    =   $24D0
000000r 2               hiresLine138    =   $28D0
000000r 2               hiresLine139    =   $2CD0
000000r 2               hiresLine140    =   $30D0
000000r 2               hiresLine141    =   $34D0
000000r 2               hiresLine142    =   $38D0
000000r 2               hiresLine143    =   $3CD0
000000r 2               hiresLine144    =   $2150
000000r 2               hiresLine145    =   $2550
000000r 2               hiresLine146    =   $2950
000000r 2               hiresLine147    =   $2D50
000000r 2               hiresLine148    =   $3150
000000r 2               hiresLine149    =   $3550
000000r 2               hiresLine150    =   $3950
000000r 2               hiresLine151    =   $3D50
000000r 2               hiresLine152    =   $21D0
000000r 2               hiresLine153    =   $25D0
000000r 2               hiresLine154    =   $29D0
000000r 2               hiresLine155    =   $2DD0
000000r 2               hiresLine156    =   $31D0
000000r 2               hiresLine157    =   $35D0
000000r 2               hiresLine158    =   $39D0
000000r 2               hiresLine159    =   $3DD0
000000r 2               hiresLine160    =   $2250
000000r 2               hiresLine161    =   $2650
000000r 2               hiresLine162    =   $2A50
000000r 2               hiresLine163    =   $2E50
000000r 2               hiresLine164    =   $3250
000000r 2               hiresLine165    =   $3650
000000r 2               hiresLine166    =   $3A50
000000r 2               hiresLine167    =   $3E50
000000r 2               hiresLine168    =   $22D0
000000r 2               hiresLine169    =   $26D0
000000r 2               hiresLine170    =   $2AD0
000000r 2               hiresLine171    =   $2ED0
000000r 2               hiresLine172    =   $32D0
000000r 2               hiresLine173    =   $36D0
000000r 2               hiresLine174    =   $3AD0
000000r 2               hiresLine175    =   $3ED0
000000r 2               hiresLine176    =   $2350
000000r 2               hiresLine177    =   $2750
000000r 2               hiresLine178    =   $2B50
000000r 2               hiresLine179    =   $2F50
000000r 2               hiresLine180    =   $3350
000000r 2               hiresLine181    =   $3750
000000r 2               hiresLine182    =   $3B50
000000r 2               hiresLine183    =   $3F50
000000r 2               hiresLine184    =   $23D0
000000r 2               hiresLine185    =   $27D0
000000r 2               hiresLine186    =   $2BD0
000000r 2               hiresLine187    =   $2FD0
000000r 2               hiresLine188    =   $33D0
000000r 2               hiresLine189    =   $37D0
000000r 2               hiresLine190    =   $3BD0
000000r 2               hiresLine191    =   $3FD0
000000r 2               
000000r 1               
000000r 1                               .org $4000
004000  1               
004000  1  20 E0 42     kaboom          jsr init_machine
004003  1               
004003  1               ; clear all variables
004003  1  A9 00                        lda #0
004005  1  A2 44                        ldx #last_var-game_select
004007  1  95 80        @1              sta game_select,x
004009  1  CA                           dex
00400A  1  10 FB                        bpl @1
00400C  1               
00400C  1               ; invalidate current logo offset
00400C  1  A9 FF                        lda #$ff
00400E  1  85 0C                        sta logo_offset
004010  1               
004010  1               ; center bomber instead of placing on left like original game
004010  1  A9 46                        lda #70
004012  1  85 9A                        sta bomber_x
004014  1               
004014  1  20 C0 7A                     jsr init_sound
004017  1  20 6C 5B                     jsr init_bombs
00401A  1  20 26 43                     jsr init_screen
00401D  1  20 FB 68                     jsr draw_score
004020  1  20 8D 45                     jsr draw_bomber
004023  1               
004023  1  8D 54 C0                     sta primary
004026  1  8D 52 C0                     sta fullscreen
004029  1  8D 57 C0                     sta hires
00402C  1  8D 50 C0                     sta graphics
00402F  1  4C 95 40                     jmp start_game
004032  1               
004032  1  A5 AE        game_loop       lda exp_bomb_frame
004034  1  F0 0A                        beq @1
004036  1  C9 1F                        cmp #$20-1              ; -1 for erase frame
004038  1  B0 06                        bcs @1
00403A  1  20 34 72                     jsr flash_screen
00403D  1  4C FC 40                     jmp cont_explode
004040  1               
004040  1  20 FB 68     @1              jsr draw_score
004043  1  20 39 49                     jsr erase_bomber
004046  1  20 2A 50                     jsr erase_top_bomb
004049  1  20 8D 45                     jsr draw_bomber
00404C  1  20 5A 4E                     jsr draw_bombs
00404F  1  20 48 5C                     jsr draw_buckets
004052  1  20 18 44                     jsr draw_logo
004055  1               
004055  1  A6 A0        move_buckets    ldx player_num
004057  1  20 70 45                     jsr read_paddle
00405A  1  98                           tya
00405B  1  38                           sec
00405C  1  E5 9D                        sbc buckets_x
00405E  1  90 0C                        bcc @left
004060  1  4A           @right          lsr
004061  1  18                           clc
004062  1  65 9D                        adc buckets_x
004064  1  C9 79                        cmp #bucketsMaxX
004066  1  90 0F                        bcc @common
004068  1  A9 79                        lda #bucketsMaxX
00406A  1  B0 0B                        bcs @common             ; always
00406C  1               
00406C  1  38           @left           sec
00406D  1  6A                           ror
00406E  1  18                           clc
00406F  1  65 9D                        adc buckets_x
004071  1  C9 03                        cmp #bucketsMinX
004073  1  B0 02                        bcs @common
004075  1  A9 03                        lda #bucketsMinX
004077  1  85 9D        @common         sta buckets_x
004079  1               
004079  1  E6 81                        inc vblank_count
00407B  1  A9 00                        lda #0
00407D  1  85 88                        sta active_bombs
00407F  1               
00407F  1               ; check for reset and select
00407F  1  AD 00 C0     check_keys      lda keyboard
004082  1  10 39                        bpl keys_checked
004084  1  2C 10 C0                     bit unstrobe
004087  1  29 5F                        and #%01011111          ; force upper case
004089  1  C9 53                        cmp #'S'
00408B  1  F0 06                        beq @select
00408D  1  C9 52                        cmp #'R'
00408F  1  F0 17                        beq reset
004091  1  D0 2A                        bne keys_checked        ; always
004093  1               
004093  1  E6 80        @select         inc game_select
004095  1  20 9F 43     start_game      jsr clear_screen
004098  1  20 D6 42                     jsr clear_vars
00409B  1  A5 80                        lda game_select
00409D  1  29 01                        and #$01
00409F  1  85 80                        sta game_select
0040A1  1  A8                           tay
0040A2  1  C8                           iny
0040A3  1  84 A5                        sty player_score+2
0040A5  1  4C BD 40                     jmp keys_checked
0040A8  1               
0040A8  1  20 9F 43     reset           jsr clear_screen
0040AB  1  20 D6 42                     jsr clear_vars
0040AE  1  A2 FF                        ldx #$ff
0040B0  1  86 AD                        stx game_state
0040B2  1  06 80                        asl game_select
0040B4  1  38                           sec
0040B5  1  66 80                        ror game_select
0040B7  1  A9 03                        lda #3
0040B9  1  85 A1                        sta player_buckets
0040BB  1  85 A6                        sta other_buckets
0040BD  1               
0040BD  1  24 80        keys_checked    bit game_select
0040BF  1  10 0A                        bpl @1
0040C1  1  A5 A1                        lda player_buckets
0040C3  1  D0 09                        bne @2
0040C5  1               ; no buckets so idle
0040C5  1  A5 81                        lda vblank_count
0040C7  1  29 7F                        and #$7F
0040C9  1  F0 42                        beq swap_player
0040CB  1  4C 8D 42     @1              jmp finish_field
0040CE  1               
0040CE  1               ; handle exploding bomb animation
0040CE  1  A5 AE        @2              lda exp_bomb_frame
0040D0  1  F0 6E                        beq no_explode
0040D2  1  C9 1F                        cmp #$20-1              ; -1 for erase frame
0040D4  1  90 26                        bcc cont_explode
0040D6  1  F0 05                        beq @3
0040D8  1  C6 AE                        dec exp_bomb_frame
0040DA  1  4C 8D 42                     jmp finish_field
0040DD  1               
0040DD  1               ; clear bomb that has finished exploding
0040DD  1  A6 AC        @3              ldx exp_bomb_index
0040DF  1  A9 00                        lda #$00
0040E1  1  95 B3                        sta bomb_frames,x
0040E3  1               
0040E3  1               ; explode first/next bomb
0040E3  1  A9 2C        explode_next    lda #$2B+1              ; +1 for immediate dec below
0040E5  1  85 AE                        sta exp_bomb_frame
0040E7  1  A2 07                        ldx #7                  ; versus #8 in original
0040E9  1  A5 AB                        lda bombs_dropped
0040EB  1  F0 02                        beq @1
0040ED  1  C6 AB                        dec bombs_dropped
0040EF  1  86 AC        @1              stx exp_bomb_index
0040F1  1  B5 B3                        lda bomb_frames,x
0040F3  1  D0 07                        bne cont_explode
0040F5  1  CA                           dex
0040F6  1  10 F7                        bpl @1
0040F8  1               
0040F8  1               ; no more bombs to explode
0040F8  1  A9 1F                        lda #$20-1              ; -1 for erase frame
0040FA  1  85 AE                        sta exp_bomb_frame
0040FC  1  C6 AE        cont_explode    dec exp_bomb_frame
0040FE  1  F0 03                        beq @1
004100  1  4C 8D 42                     jmp finish_field
004103  1               
004103  1  A5 B0        @1              lda bonus_sound
004105  1  D0 02                        bne @2
004107  1               ; take away a bucket
004107  1  C6 A1                        dec player_buckets
004109  1               @2
004109  1               ; does other player still have buckets?
004109  1  A5 A6                        lda other_buckets
00410B  1  F0 1B                        beq next_wave
00410D  1               
00410D  1  A5 80        swap_player     lda game_select         ; two players?
00410F  1  4A                           lsr
004110  1  90 16                        bcc next_wave
004112  1               
004112  1               ; swap player states
004112  1  A2 04                        ldx #4
004114  1  B4 A1        @1              ldy player_state,x
004116  1  B5 A6                        lda other_state,x
004118  1  95 A1                        sta player_state,x
00411A  1  94 A6                        sty other_state,x
00411C  1  CA                           dex
00411D  1  10 F5                        bpl @1
00411F  1               
00411F  1  20 F2 43                     jsr clear_score
004122  1               
004122  1               ; toggle player number
004122  1  A5 A0                        lda player_num
004124  1  49 01                        eor #$01
004126  1  85 A0                        sta player_num
004128  1               
004128  1               ; decrement wave when player restarts
004128  1  A6 A2        next_wave       ldx player_wave
00412A  1  8A                           txa
00412B  1  F0 0A                        beq @1
00412D  1               ; give them half as many bombs to catch
00412D  1               ; (set bombCount to half already caught)
00412D  1  CA                           dex
00412E  1  86 A2                        stx player_wave
004130  1  BD AB 42                     lda bombs_per_wave,x
004133  1  4A                           lsr
004134  1  18                           clc
004135  1  69 01                        adc #1
004137  1  85 AB        @1              sta bombs_dropped
004139  1  A2 FF                        ldx #$FF
00413B  1  86 AD                        stx game_state
00413D  1  4C 8D 42                     jmp finish_field
004140  1               
004140  1               ; no exploding bombs in progress
004140  1  24 AD        no_explode      bit game_state
004142  1  10 12                        bpl move_bomber
004144  1               
004144  1               ; read paddle button push to start wave
004144  1  A0 00                        ldy #0
004146  1  A6 A0                        ldx player_num
004148  1  BD 61 C0                     lda pbutton0,x
00414B  1  10 02                        bpl @3
00414D  1               ; wave is now in progress
00414D  1  84 AD                        sty game_state
00414F  1  84 B1        @3              sty bomb_vphase
004151  1  A9 00                        lda #0
004153  1  4C 77 42                     jmp start_wave
004156  1               
004156  1               ; periodically/randomly change bomber's direction
004156  1               ;
004156  1               ; NOTE: Not always calling random here in order to keep
004156  1               ;   patterns similar to original game, even though it
004156  1               ;   doesn't maintain consistent timing.
004156  1               
004156  1  A6 9B        move_bomber     ldx bomber_dir
004158  1  A5 81                        lda vblank_count
00415A  1  29 0F                        and #$0f
00415C  1  D0 09                        bne @1
00415E  1  20 61 45                     jsr random
004161  1  B0 04                        bcs @1
004163  1  8A                           txa
004164  1  49 FF                        eor #$ff
004166  1  AA                           tax
004167  1               @1
004167  1               ; move bomber by +/- player_wave+1
004167  1               ;
004167  1               ; NOTE: Do all the work of computing new position and
004167  1               ;   then only commit to it at the end, all in order
004167  1               ;   to keep consistent timing.
004167  1  8A                           txa
004168  1  0A                           asl
004169  1  A5 A2                        lda player_wave
00416B  1  90 13                        bcc @right
00416D  1  49 FF        @left           eor #$ff
00416F  1  18                           clc
004170  1  65 9A                        adc bomber_x
004172  1  C9 08                        cmp #bomberMinX+1
004174  1  90 04                        bcc @2
004176  1  C9 F0                        cmp #$f0
004178  1  90 11                        bcc @common
00417A  1  A2 00        @2              ldx #$00                ; reverse
00417C  1  A9 07                        lda #bomberMinX
00417E  1  10 0B                        bpl @common             ; always
004180  1               
004180  1  38           @right          sec
004181  1  65 9A                        adc bomber_x
004183  1  C9 7E                        cmp #bomberMaxX
004185  1  90 04                        bcc @common
004187  1  A2 FF                        ldx #$ff                ; reverse
004189  1  A9 7E                        lda #bomberMaxX
00418B  1  24 AD        @common         bit game_state          ; not if waiting to start or already ended
00418D  1  50 06                        bvc @move
00418F  1               ; align after bomber has stopped moving
00418F  1  20 B3 42                     jsr align_bomber
004192  1  4C A3 41                     jmp @still
004195  1               
004195  1  A4 B1        @move           ldy bomb_vphase         ; not if just before/after bomb will drop
004197  1  C0 11                        cpy #17
004199  1  B0 08                        bcs @still
00419B  1  C0 02                        cpy #2
00419D  1  90 04                        bcc @still
00419F  1  86 9B                        stx bomber_dir
0041A1  1  85 9A                        sta bomber_x
0041A3  1               @still
0041A3  1               
0041A3  1               check_bomb_caught
0041A3  1  A6 C3                        ldx bomb_hit
0041A5  1  F0 4D                        beq check_bomb_missed
0041A7  1               
0041A7  1  A4 C4                        ldy bucket_hit
0041A9  1  84 9C                        sty splash_bucket
0041AB  1  A9 10                        lda #$10
0041AD  1  85 AF                        sta splash_frame
0041AF  1               
0041AF  1  A9 00                        lda #0
0041B1  1  95 B3                        sta bomb_frames,x
0041B3  1  85 C3                        sta bomb_hit
0041B5  1  85 C4                        sta bucket_hit
0041B7  1               
0041B7  1               ; bump score by player_wave + 1
0041B7  1  F8                           sed
0041B8  1  A5 A2                        lda player_wave
0041BA  1  38                           sec                     ; +1
0041BB  1  A2 02                        ldx #2
0041BD  1  A4 A4                        ldy player_score+1
0041BF  1  75 A3        @1              adc player_score,x
0041C1  1  95 A3                        sta player_score,x
0041C3  1  A9 00                        lda #0
0041C5  1  CA                           dex
0041C6  1  10 F7                        bpl @1
0041C8  1  D8                           cld
0041C9  1  90 15                        bcc @3
0041CB  1               ; clear buckets and bombs and pin score to 999999
0041CB  1  85 A1                        sta player_buckets
0041CD  1  85 AF                        sta splash_frame
0041CF  1  A2 07                        ldx #7
0041D1  1  95 B3        @2              sta bomb_frames,x
0041D3  1  CA                           dex
0041D4  1  10 FB                        bpl @2
0041D6  1  A9 99                        lda #$99
0041D8  1  85 A3                        sta player_score+0
0041DA  1  85 A4                        sta player_score+1
0041DC  1  85 A5                        sta player_score+2
0041DE  1  D0 14                        bne check_bomb_missed   ; always
0041E0  1               
0041E0  1               ; check for score passing 1000
0041E0  1  98           @3              tya
0041E1  1  45 A4                        eor player_score+1
0041E3  1  29 F0                        and #$f0
0041E5  1  F0 0D                        beq check_bomb_missed
0041E7  1               ; award extra bucket if possible
0041E7  1  A6 A1                        ldx player_buckets
0041E9  1  E8                           inx
0041EA  1  E0 04                        cpx #4
0041EC  1  B0 02                        bcs @4
0041EE  1  86 A1                        stx player_buckets
0041F0  1  A9 3F        @4              lda #$3f
0041F2  1  85 B0                        sta bonus_sound
0041F4  1               
0041F4  1               check_bomb_missed
0041F4  1  A5 BA                        lda bomb_frames+7
0041F6  1  F0 10                        beq update_bombs
0041F8  1  A6 B1                        ldx bomb_vphase
0041FA  1  E0 0C                        cpx #12
0041FC  1  90 0A                        bcc update_bombs
0041FE  1               ; align before explosions start and bomber stops moving
0041FE  1  20 B3 42                     jsr align_bomber
004201  1  A9 00                        lda #0
004203  1  85 AF                        sta splash_frame
004205  1  4C E3 40                     jmp explode_next
004208  1               
004208  1               update_bombs
004208  1               ; randomize bomb frame and count active bombs
004208  1  A2 07                        ldx #7                  ; versus 8 in original
00420A  1  B5 B3        @1              lda bomb_frames,x
00420C  1  F0 12                        beq @2
00420E  1  C6 88                        dec active_bombs
004210  1  20 61 45                     jsr random
004213  1  45 81                        eor vblank_count
004215  1  29 03                        and #$03
004217  1  18                           clc
004218  1  69 01                        adc #1
00421A  1  B4 B3                        ldy bomb_frames,x
00421C  1  F0 02                        beq @2
00421E  1  95 B3                        sta bomb_frames,x
004220  1  CA           @2              dex
004221  1  10 E7                        bpl @1
004223  1               
004223  1               ; adjust bomb_phase by dy
004223  1  A4 A2                        ldy player_wave
004225  1  A5 B1                        lda bomb_vphase
004227  1  18                           clc
004228  1  79 16 50                     adc wave_bomb_dy,y
00422B  1  85 B1                        sta bomb_vphase
00422D  1  38                           sec
00422E  1  E9 12                        sbc #bombPhaseDy
004230  1  90 5B                        bcc no_new_bomb
004232  1  85 B1                        sta bomb_vphase
004234  1               
004234  1               ; shift bomb buffers to make room for new bomb
004234  1  A2 06                        ldx #6                  ; versus 7 in original
004236  1  B5 BB        @3              lda bomb_columns,x
004238  1  95 BC                        sta bomb_columns+1,x
00423A  1  B5 B3                        lda bomb_frames,x
00423C  1  95 B4                        sta bomb_frames+1,x
00423E  1  CA                           dex
00423F  1  10 F5                        bpl @3
004241  1  A9 00                        lda #0
004243  1  85 B3                        sta bomb_frames+0
004245  1               
004245  1  A6 A2                        ldx player_wave
004247  1  24 AD                        bit game_state
004249  1  50 11                        bvc @4
00424B  1  A5 88                        lda active_bombs
00424D  1  05 AF                        ora splash_frame
00424F  1  D0 3C                        bne no_new_bomb
004251  1  06 AD                        asl game_state
004253  1  A6 A2                        ldx player_wave
004255  1  E0 07                        cpx #gameWaveMax
004257  1  B0 03                        bcs @4
004259  1  E8                           inx
00425A  1  86 A2                        stx player_wave
00425C  1  8A           @4              txa
00425D  1  4A                           lsr
00425E  1  B0 04                        bcs @5
004260  1               ; drop bombs less frequently on even waves
004260  1  A5 B4                        lda bomb_frames+1
004262  1  D0 29                        bne no_new_bomb
004264  1  E6 AB        @5              inc bombs_dropped
004266  1  A5 AB                        lda bombs_dropped
004268  1  DD AB 42                     cmp bombs_per_wave,x
00426B  1  90 08                        bcc @6
00426D  1  A9 00                        lda #0
00426F  1  85 AB                        sta bombs_dropped
004271  1               ; if all bombs caught, change game state
004271  1  A9 7F                        lda #$7F
004273  1  85 AD                        sta game_state
004275  1               @6
004275  1               ; use random seed & 0x08 to flip bomb horizontally, move to low bit
004275  1  A5 82                        lda random_seed
004277  1  4A           start_wave      lsr
004278  1  4A                           lsr
004279  1  4A                           lsr
00427A  1  4A                           lsr
00427B  1  08                           php
00427C  1               
00427C  1               ; bomber always holds bomb with unlit fuse
00427C  1  A9 01                        lda #1
00427E  1  85 B3                        sta bomb_frames+0
004280  1               
004280  1               ; pick new bomb position
004280  1  A5 9A                        lda bomber_x
004282  1  0A                           asl
004283  1               ;               clc
004283  1  69 03                        adc #3                  ; bomberMaxX * 2 + 3 == 255
004285  1  AA                           tax
004286  1  BD 00 77                     lda div7,x
004289  1  28                           plp
00428A  1  2A                           rol                     ; apply hflip flag
00428B  1  85 BB                        sta bomb_columns+0
00428D  1               no_new_bomb
00428D  1               
00428D  1               finish_field
00428D  1               
00428D  1               ; choose smile/frown for bomber
00428D  1  A5 A3        update_mouth    lda player_score+0      ; frown if score >= 10000
00428F  1  D0 08                        bne @1
004291  1  A5 AE                        lda exp_bomb_frame      ; smile if bombs exploding
004293  1  D0 0A                        bne @2
004295  1  A5 A1                        lda player_buckets      ; smile if out of buckets
004297  1  F0 06                        beq @2
004299  1  20 BC 49     @1              jsr apply_frown
00429C  1  4C A2 42                     jmp @3
00429F  1  20 B8 49     @2              jsr apply_smile
0042A2  1               @3
0042A2  1  20 06 43                     jsr vsync
0042A5  1  20 4D 7B                     jsr update_sound
0042A8  1  4C 32 40                     jmp game_loop
0042AB  1               
0042AB  1  09           bombs_per_wave  .byte 9
0042AC  1  14                           .byte 20
0042AD  1  1E                           .byte 30
0042AE  1  28                           .byte 40
0042AF  1  32                           .byte 50
0042B0  1  4B                           .byte 75
0042B1  1  64                           .byte 100
0042B2  1  96                           .byte 150
0042B3  1               
0042B3  1               ;---------------------------------------
0042B3  1               
0042B3  1               ; Move bomber to a location that matches up
0042B3  1               ;   with the two possible bomb locations.
0042B3  1               
0042B3  1  A5 9A        align_bomber    lda bomber_x
0042B5  1  0A                           asl
0042B6  1  AA                           tax
0042B7  1  BC 00 78                     ldy mod7,x
0042BA  1  B9 CF 42                     lda @align_table,y
0042BD  1  18                           clc
0042BE  1  65 9A                        adc bomber_x
0042C0  1  C9 08                        cmp #bomberMinX+1
0042C2  1  B0 02                        bcs @1
0042C4  1  A9 07                        lda #bomberMinX
0042C6  1  C9 7E        @1              cmp #bomberMaxX
0042C8  1  90 02                        bcc @2
0042CA  1  A9 7E                        lda #bomberMaxX
0042CC  1  85 9A        @2              sta bomber_x
0042CE  1  60                           rts
0042CF  1               
0042CF  1                               ;       0   1   2   3   4   5   6
0042CF  1  00 FF FF FE  @align_table    .byte $00,$ff,$ff,$fe,$01,$01,$00
0042D3  1  01 01 00     
0042D6  1                               ;       0   6   0   6   6   0   6
0042D6  1               
0042D6  1               ;---------------------------------------
0042D6  1               
0042D6  1  A9 00        clear_vars      lda #0
0042D8  1  A2 24                        ldx #last_var-player_num
0042DA  1  95 A0        @1              sta player_num,x
0042DC  1  CA                           dex
0042DD  1  10 FB                        bpl @1
0042DF  1  60                           rts
0042E0  1               
0042E0  1               ;---------------------------------------
0042E0  1               
0042E0  1  A2 00        init_machine    ldx #%00000000          ; II/II+
0042E2  1  AD B3 FB                     lda $fbb3
0042E5  1  C9 06                        cmp #$06                ; IIe or later
0042E7  1  D0 12                        bne @1
0042E9  1  A2 C0                        ldx #%11000000          ; IIc
0042EB  1  AD C0 FB                     lda $fbc0
0042EE  1  F0 0B                        beq @1
0042F0  1  A2 80                        ldx #%10000000
0042F2  1  AD 1F FE                     lda $fe1f
0042F5  1  C9 60                        cmp #$60                ; rts
0042F7  1  F0 02                        beq @1
0042F9  1  A2 81                        ldx #%10000001          ; IIgs
0042FB  1  86 0F        @1              stx machine_type
0042FD  1               ; force reboot on reset since zpage and DOS 3.3 get altered
0042FD  1  A9 00                        lda #0
0042FF  1  8D F2 03                     sta $03f2
004302  1  8D F3 03                     sta $03f3
004305  1  60                           rts
004306  1               
004306  1               ;---------------------------------------
004306  1               
004306  1               ; Sync to line just before CallaVision logo using
004306  1               ;   vaporlock method.  Note that 5 matches of magic
004306  1               ;   value must be seen in order to distinguish active
004306  1               ;   scan matches from hsync and vsync.
004306  1               
004306  1  A9 80        vsync           lda #vaporlockBlack
004308  1  CD 57 C0     @1              cmp hires               ; 4
00430B  1  D0 FB                        bne @1                  ; 2/3
00430D  1  EA                           nop                     ; 2
00430E  1  CD 57 C0                     cmp hires               ; 4
004311  1  D0 F5                        bne @1                  ; 2/3
004313  1  EA                           nop                     ; 2
004314  1  CD 57 C0                     cmp hires               ; 4
004317  1  D0 EF                        bne @1                  ; 2/3
004319  1  EA                           nop                     ; 2
00431A  1  CD 57 C0                     cmp hires               ; 4
00431D  1  D0 E9                        bne @1                  ; 2/3
00431F  1  EA                           nop                     ; 2
004320  1  CD 57 C0                     cmp hires               ; 4
004323  1  D0 E3                        bne @1                  ; 2/3
004325  1  60                           rts
004326  1               
004326  1               ;---------------------------------------
004326  1               
004326  1               init_screen
004326  1               ; fill solid white #$FF lines for score, except for
004326  1               ;   first and last column to avoid color artifacts
004326  1  A2 00                        ldx #0
004328  1  BD 00 79     @1              lda hires_table_lo,x
00432B  1  85 0D                        sta screenl
00432D  1  BD 00 7A                     lda hires_table_hi,x
004330  1  85 0E                        sta screenh
004332  1  A0 27                        ldy #39
004334  1  A9 7F                        lda #$7f
004336  1  91 0D                        sta (screenl),y
004338  1  88                           dey
004339  1  A9 FF                        lda #$ff
00433B  1  91 0D        @2              sta (screenl),y
00433D  1  88                           dey
00433E  1  D0 FB                        bne @2
004340  1  A9 7E                        lda #$7e
004342  1  91 0D                        sta (screenl),y
004344  1  E8                           inx
004345  1  E0 09                        cpx #scoreHeight
004347  1  D0 DF                        bne @1
004349  1               
004349  1               ; fill solid white #$7F lines below score
004349  1  BD 00 79     @3              lda hires_table_lo,x
00434C  1  85 0D                        sta screenl
00434E  1  BD 00 7A                     lda hires_table_hi,x
004351  1  85 0E                        sta screenh
004353  1  A0 27                        ldy #39
004355  1  A9 7F                        lda #$7f
004357  1  91 0D        @4              sta (screenl),y
004359  1  88                           dey
00435A  1  D0 FB                        bne @4
00435C  1  A9 7E                        lda #$7e
00435E  1  91 0D                        sta (screenl),y
004360  1  E8                           inx
004361  1  E0 28                        cpx #topHeight
004363  1  D0 E4                        bne @3
004365  1               
004365  1               ; fill solid green lines
004365  1  BD 00 79     @5              lda hires_table_lo,x
004368  1  85 0D                        sta screenl
00436A  1  BD 00 7A                     lda hires_table_hi,x
00436D  1  85 0E                        sta screenh
00436F  1  A0 27                        ldy #39
004371  1  A9 55                        lda #$55
004373  1  91 0D        @6              sta (screenl),y
004375  1  49 7F                        eor #$7f
004377  1  88                           dey
004378  1  10 F9                        bpl @6
00437A  1  E8                           inx
00437B  1  E0 B6                        cpx #topHeight+centerHeight
00437D  1  D0 E6                        bne @5
00437F  1               
00437F  1               ; fill the first line with $80 black for "vaporlock" detection,
00437F  1               ;   and the rest with $00 black
00437F  1  A9 80                        lda #vaporlockBlack
004381  1  BC 00 79     @7              ldy hires_table_lo,x
004384  1  84 0D                        sty screenl
004386  1  BC 00 7A                     ldy hires_table_hi,x
004389  1  84 0E                        sty screenh
00438B  1  A0 27                        ldy #39
00438D  1  91 0D        @8              sta (screenl),y
00438F  1  88                           dey
004390  1  10 FB                        bpl @8
004392  1  A9 00                        lda #$00                ; normal black
004394  1  E8                           inx
004395  1  E0 C0                        cpx #topHeight+centerHeight+bottomHeight
004397  1  D0 E8                        bne @7
004399  1  20 18 44                     jsr draw_logo
00439C  1  4C 0E 44                     jmp clear_digits
00439F  1               
00439F  1               ; remove everything on the screen related to the current game
00439F  1  20 06 43     clear_screen    jsr vsync
0043A2  1  A5 A0                        lda player_num
0043A4  1  D0 0B                        bne @1
0043A6  1  A9 00                        lda #0
0043A8  1  85 A3                        sta player_score+0
0043AA  1  85 A4                        sta player_score+1
0043AC  1  85 A5                        sta player_score+2
0043AE  1  20 FB 68                     jsr draw_score
0043B1  1  20 39 49     @1              jsr erase_bomber
0043B4  1  20 2A 50                     jsr erase_top_bomb
0043B7  1               
0043B7  1  20 B3 42                     jsr align_bomber
0043BA  1  20 8D 45                     jsr draw_bomber
0043BD  1               
0043BD  1  A9 20                        lda #$20
0043BF  1  C5 AE                        cmp exp_bomb_frame
0043C1  1  B0 02                        bcs @2
0043C3  1  85 AE                        sta exp_bomb_frame
0043C5  1               @2
0043C5  1  A2 00                        ldx #0
0043C7  1  8A                           txa
0043C8  1  A4 B1                        ldy bomb_vphase
0043CA  1  D0 05                        bne @3
0043CC  1  A4 AE                        ldy exp_bomb_frame
0043CE  1  D0 01                        bne @3
0043D0  1               ; skip clearing first bomb if it's in the bomber's hands
0043D0  1  E8                           inx
0043D1  1  95 B3        @3              sta bomb_frames,x
0043D3  1  E8                           inx
0043D4  1  E0 08                        cpx #8
0043D6  1  D0 F9                        bne @3
0043D8  1               
0043D8  1  20 5A 4E                     jsr draw_bombs
0043DB  1  A9 00                        lda #0
0043DD  1  85 AF                        sta splash_frame
0043DF  1  A5 A1                        lda player_buckets
0043E1  1  F0 04                        beq @4
0043E3  1  A9 03                        lda #3
0043E5  1  85 A1                        sta player_buckets
0043E7  1  20 48 5C     @4              jsr draw_buckets
0043EA  1               
0043EA  1  A5 A0                        lda player_num
0043EC  1  F0 03                        beq @5
0043EE  1  20 F2 43                     jsr clear_score
0043F1  1  60           @5              rts
0043F2  1               
0043F2  1  A2 01        clear_score     ldx #1
0043F4  1  BD 00 79     @1              lda hires_table_lo,x
0043F7  1  85 0D                        sta screenl
0043F9  1  BD 00 7A                     lda hires_table_hi,x
0043FC  1  85 0E                        sta screenh
0043FE  1  A0 0A                        ldy #scoreLeft/7
004400  1  A9 FF                        lda #$ff
004402  1  91 0D        @2              sta (screenl),y
004404  1  C8                           iny
004405  1  C0 1D                        cpy #scoreLeft/7+19
004407  1  D0 F9                        bne @2
004409  1  E8                           inx
00440A  1  E0 09                        cpx #scoreHeight
00440C  1  D0 E6                        bne @1
00440E  1                               ; fall through
00440E  1               
00440E  1               ; intialize digits buffer to "no digits"
00440E  1  A2 05        clear_digits    ldx #5
004410  1  A9 0A                        lda #$0A
004412  1  95 74        @1              sta cur_digits,x
004414  1  CA                           dex
004415  1  10 FB                        bpl @1
004417  1  60                           rts
004418  1               
004418  1               ;---------------------------------------
004418  1               
004418  1  A0 80        draw_logo       ldy #128
00441A  1  A5 A1                        lda player_buckets
00441C  1  D0 14                        bne @1
00441E  1  A5 81                        lda vblank_count
004420  1  4A                           lsr
004421  1  4A                           lsr
004422  1  4A                           lsr
004423  1  C9 10                        cmp #$10
004425  1  B0 0B                        bcs @1
004427  1  A0 00                        ldy #0
004429  1               ;               sec
004429  1  E9 07                        sbc #$08-1
00442B  1  90 05                        bcc @1
00442D  1  0A                           asl
00442E  1  0A                           asl
00442F  1  0A                           asl
004430  1  0A                           asl
004431  1  A8                           tay
004432  1  C4 0C        @1              cpy logo_offset
004434  1  F0 2A                        beq @4
004436  1  84 0C                        sty logo_offset
004438  1  84 01                        sty offset
00443A  1  A2 B7                        ldx #topHeight+centerHeight+1
00443C  1  86 02        @2              stx linenum
00443E  1  BD 00 79                     lda hires_table_lo,x
004441  1  85 0D                        sta screenl
004443  1  BD 00 7A                     lda hires_table_hi,x
004446  1  85 0E                        sta screenh
004448  1  A0 0C                        ldy #logoLeft
00444A  1  A6 01                        ldx offset
00444C  1  BD 61 44     @3              lda logo_graphic,x
00444F  1  91 0D                        sta (screenl),y
004451  1  E8                           inx
004452  1  C8                           iny
004453  1  C0 1C                        cpy #logoLeft+logoByteWidth
004455  1  D0 F5                        bne @3
004457  1  86 01                        stx offset
004459  1  A6 02                        ldx linenum
00445B  1  E8                           inx
00445C  1  E0 BE                        cpx #topHeight+centerHeight+1+7
00445E  1  D0 DC                        bne @2
004460  1  60           @4              rts
004461  1               
004461  1  00 00 FE 80  logo_graphic    .byte $00,$00,$fe,$80,$00,$00,$00,$b0,$80,$8c,$98,$f0,$e7,$cf,$9f,$b3 ; copyright 2024
004465  1  00 00 00 B0  
004469  1  80 8C 98 F0  
004471  1  00 00 86 80                  .byte $00,$00,$86,$80,$00,$00,$00,$80,$80,$8c,$fe,$80,$e6,$8c,$98,$b3
004475  1  00 00 00 80  
004479  1  80 8C FE 80  
004481  1  00 00 86 FC                  .byte $00,$00,$86,$fc,$f9,$b3,$e6,$b3,$fe,$fc,$99,$f0,$e7,$cc,$9f,$bf
004485  1  F9 B3 E6 B3  
004489  1  FE FC 99 F0  
004491  1  00 00 86 CC                  .byte $00,$00,$86,$cc,$99,$b3,$e6,$b0,$e6,$cc,$99,$b0,$e0,$cc,$81,$b0
004495  1  99 B3 E6 B0  
004499  1  E6 CC 99 B0  
0044A1  1  00 00 FE FC                  .byte $00,$00,$fe,$fc,$f9,$f3,$e7,$b0,$fe,$cc,$99,$f0,$e7,$cf,$9f,$b0
0044A5  1  F9 F3 E7 B0  
0044A9  1  FE CC 99 F0  
0044B1  1  00 00 80 80                  .byte $00,$00,$80,$80,$98,$80,$86,$80,$e0,$80,$00,$00,$00,$00,$00,$00
0044B5  1  98 80 86 80  
0044B9  1  E0 80 00 00  
0044C1  1  00 00 80 80                  .byte $00,$00,$80,$80,$98,$f0,$87,$80,$fe,$80,$00,$00,$00,$00,$00,$00
0044C5  1  98 F0 87 80  
0044C9  1  FE 80 00 00  
0044D1  1  00 00 00 00                  .byte $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
0044D5  1  00 00 00 00  
0044D9  1  00 00 00 00  
0044E1  1               
0044E1  1  2A 55 2A 55                  .byte $2a,$55,$2a,$55,$ff,$83,$80,$fc,$ff,$ff,$81,$fc,$ff,$83,$00,$00 ; callavision
0044E5  1  FF 83 80 FC  
0044E9  1  FF FF 81 FC  
0044F1  1  AA D5 AA D5                  .byte $aa,$d5,$aa,$d5,$83,$80,$80,$80,$80,$c0,$81,$8f,$80,$80,$00,$00
0044F5  1  83 80 80 80  
0044F9  1  80 C0 81 8F  
004501  1  AA D5 AA F5                  .byte $aa,$d5,$aa,$f5,$81,$fc,$99,$b0,$e0,$cf,$e1,$c3,$9f,$f3,$e7,$b0
004505  1  81 FC 99 B0  
004509  1  E0 CF E1 C3  
004511  1  54 2A 55 6A                  .byte $54,$2a,$55,$6a,$80,$cc,$99,$b0,$e0,$cc,$f9,$cc,$81,$b3,$e6,$b3
004515  1  80 CC 99 B0  
004519  1  E0 CC F9 CC  
004521  1  AA D5 AA B5                  .byte $aa,$d5,$aa,$b5,$80,$fc,$99,$b0,$e0,$cf,$9f,$cc,$9f,$b3,$e6,$bf
004525  1  80 FC 99 B0  
004529  1  E0 CF 9F CC  
004531  1  AA D5 AA 9D                  .byte $aa,$d5,$aa,$9d,$80,$cc,$99,$b0,$e0,$cc,$87,$8c,$98,$b3,$e6,$bc
004535  1  80 CC 99 B0  
004539  1  E0 CC 87 8C  
004541  1  D5 AA D5 FE                  .byte $d5,$aa,$d5,$fe,$bf,$cc,$f9,$f3,$e7,$cc,$81,$cc,$9f,$f3,$e7,$b0
004545  1  BF CC F9 F3  
004549  1  E7 CC 81 CC  
004551  1  00 00 00 00                  .byte $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
004555  1  00 00 00 00  
004559  1  00 00 00 00  
004561  1               
004561  1               ;---------------------------------------
004561  1               ;
004561  1               ; pseudo random number generator,
004561  1               ;   taken verbatim from Kaboom VCS
004561  1               ;
004561  1               ; On exit:
004561  1               ;   A: random_seed value
004561  1               ;   C: bottom random_seed bit
004561  1               ;   X,Y: unchanged
004561  1               ;
004561  1  46 82        random          lsr random_seed
004563  1  2A                           rol
004564  1  45 82                        eor random_seed
004566  1  4A                           lsr
004567  1  A5 82                        lda random_seed
004569  1  B0 04                        bcs @1
00456B  1  09 40                        ora #$40
00456D  1  85 82                        sta random_seed
00456F  1  60           @1              rts
004570  1               
004570  1               ;---------------------------------------
004570  1               ;
004570  1               ; Modified version of Apple II monitor ROM code.
004570  1               ;   This pads the cycle count so it takes the same
004570  1               ;   amount of time (about 2850 cycles), regardless
004570  1               ;   of the paddle value.
004570  1               ;
004570  1               ; On entry:
004570  1               ;   X: paddle to read (0-1)
004570  1               ;
004570  1               ; On exit:
004570  1               ;   Y: paddle value (0-255)
004570  1               ;
004570  1               ; 2834 cycles maximum
004570  1               ;
004570  1  AD 70 C0     read_paddle     lda $c070               ; trigger paddles
004573  1  A0 00                        ldy #$00                ; init count
004575  1  EA                           nop                     ; compensate for 1st count
004576  1  EA                           nop
004577  1  BD 64 C0     @1              lda $c064,x             ; 4  count Y-reg every
00457A  1  10 05                        bpl @2                  ; 2    12 usec [actually 11]
00457C  1  C8                           iny                     ; 2
00457D  1  D0 F8                        bne @1                  ; 3  exit at 255 max
00457F  1  88                           dey
004580  1  60                           rts
004581  1  84 00        @2              sty temp                ; 3
004583  1  BD 64 C0     @3              lda $c064,x             ; 4
004586  1  EA                           nop                     ; 2 bpl not taken
004587  1  C8                           iny                     ; 2
004588  1  D0 F9                        bne @3                  ; 3/2
00458A  1  A4 00                        ldy temp                ; 3
00458C  1  60                           rts
00458D  1               
00458D  1               ;---------------------------------------
00458D  1               
00458D  1                               .include "bomber.s"
00458D  2               ;
00458D  2               ; On entry:
00458D  2               ;   bomber_x: X position (0-139)
00458D  2               ;
00458D  2               ;   draw at X * 2
00458D  2               ;
00458D  2  A5 9A        draw_bomber     lda bomber_x
00458F  2  8D 38 49                     sta prev_bomber_x
004592  2  0A                           asl
004593  2  AA                           tax
004594  2  BC 00 77                     ldy div7,x
004597  2  BD 00 78                     lda mod7,x
00459A  2  4A                           lsr
00459B  2  AA                           tax
00459C  2  BD B8 45                     lda draw_bombers_lo,x
00459F  2  8D B0 45                     sta @mod+1
0045A2  2  BD BC 45                     lda draw_bombers_hi,x
0045A5  2  8D B1 45                     sta @mod+2
0045A8  2  A9 00                        lda #0
0045AA  2  6A                           ror
0045AB  2  AA                           tax                     ; data offset = 0 or 128
0045AC  2  98                           tya
0045AD  2               ;               clc
0045AD  2  69 03                        adc #3
0045AF  2  20 FF FF     @mod            jsr $ffff
0045B2  2  A9 FF                        lda #$ff
0045B4  2  99 00 2D                     sta bomberLine7,y       ; clean up artifact by forcing high bit
0045B7  2  60                           rts
0045B8  2               
0045B8  2  C0           draw_bombers_lo .byte <draw_bomber_01
0045B9  2  9E                           .byte <draw_bomber_23
0045BA  2  7C                           .byte <draw_bomber_45
0045BB  2  5A                           .byte <draw_bomber_6
0045BC  2               
0045BC  2  45           draw_bombers_hi .byte >draw_bomber_01
0045BD  2  46                           .byte >draw_bomber_23
0045BE  2  47                           .byte >draw_bomber_45
0045BF  2  48                           .byte >draw_bomber_6
0045C0  2               
0045C0  2               bomberLine0     :=  hiresLine12
0045C0  2               bomberLine1     :=  hiresLine13
0045C0  2               bomberLine2     :=  hiresLine14
0045C0  2               bomberLine3     :=  hiresLine15
0045C0  2               bomberLine4     :=  hiresLine16
0045C0  2               bomberLine5     :=  hiresLine17
0045C0  2               bomberLine6     :=  hiresLine18
0045C0  2               bomberLine7     :=  hiresLine19
0045C0  2               bomberLine8     :=  hiresLine20
0045C0  2               bomberLine9     :=  hiresLine21
0045C0  2               bomberLine10    :=  hiresLine22
0045C0  2               bomberLine11    :=  hiresLine23
0045C0  2               bomberLine12    :=  hiresLine24
0045C0  2               bomberLine13    :=  hiresLine25
0045C0  2               bomberLine14    :=  hiresLine26
0045C0  2               bomberLine15    :=  hiresLine27
0045C0  2               bomberLine16    :=  hiresLine28
0045C0  2               bomberLine17    :=  hiresLine29
0045C0  2               bomberLine18    :=  hiresLine30
0045C0  2               bomberLine19    :=  hiresLine31
0045C0  2               bomberLine20    :=  hiresLine32
0045C0  2               bomberLine21    :=  hiresLine33
0045C0  2               bomberLine22    :=  hiresLine34
0045C0  2               bomberLine23    :=  hiresLine35
0045C0  2               bomberLine24    :=  hiresLine36
0045C0  2               bomberLine25    :=  hiresLine37
0045C0  2               bomberLine26    :=  hiresLine38
0045C0  2               bomberLine27    :=  hiresLine39
0045C0  2               bomberLine28    :=  hiresLine40
0045C0  2               bomberLine29    :=  hiresLine41
0045C0  2               
0045C0  2               .macro bomber bits
0045C0  2                               sta @mod+1
0045C0  2               @1              lda bits,x
0045C0  2                               sta bomberLine0,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine1,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine2,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine3,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine4,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine5,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine6,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine7,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine8,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine9,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine10,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine11,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine12,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine13,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine14,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine15,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine16,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine17,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine18,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine19,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine20,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine21,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine22,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine23,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine24,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine25,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine26,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine27,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine28,y
0045C0  2                               inx
0045C0  2                               lda bits,x
0045C0  2                               sta bomberLine29,y
0045C0  2                               inx
0045C0  2                               iny
0045C0  2               @mod            cpy #$ff
0045C0  2                               beq @2
0045C0  2                               jmp @1
0045C0  2               @2              rts
0045C0  2               .endmacro
0045C0  2               
0045C0  2  8D 97 46 BD  draw_bomber_01  bomber bomber_0
0045C4  2  00 4B 99 80  
0045C8  2  30 E8 BD 00  
00469E  2  8D 75 47 BD  draw_bomber_23  bomber bomber_2
0046A2  2  00 4C 99 80  
0046A6  2  30 E8 BD 00  
00477C  2  8D 53 48 BD  draw_bomber_45  bomber bomber_4
004780  2  00 4D 99 80  
004784  2  30 E8 BD 00  
00485A  2  8D 31 49 BD  draw_bomber_6   bomber bomber_6
00485E  2  00 4E 99 80  
004862  2  30 E8 BD 00  
004938  2               
004938  2  00           prev_bomber_x   .byte 0
004939  2               
004939  2  AD 38 49     erase_bomber    lda prev_bomber_x
00493C  2  F0 79                        beq @3
00493E  2  0A                           asl
00493F  2  AA                           tax
004940  2  BC 00 77                     ldy div7,x
004943  2  A2 03                        ldx #3
004945  2  98                           tya
004946  2  4A                           lsr a
004947  2  A9 2A                        lda #$2a
004949  2  90 02                        bcc @1
00494B  2  A9 55                        lda #$55
00494D  2  8D A7 49     @1              sta @mod+1
004950  2  A9 7F        @2              lda #$7f
004952  2  99 80 30                     sta bomberLine0,y
004955  2  99 80 34                     sta bomberLine1,y
004958  2  99 80 38                     sta bomberLine2,y
00495B  2  99 80 3C                     sta bomberLine3,y
00495E  2  99 00 21                     sta bomberLine4,y
004961  2  99 00 25                     sta bomberLine5,y
004964  2  99 00 29                     sta bomberLine6,y
004967  2  99 00 2D                     sta bomberLine7,y
00496A  2  99 00 31                     sta bomberLine8,y
00496D  2  99 00 35                     sta bomberLine9,y
004970  2  99 00 39                     sta bomberLine10,y
004973  2  99 00 3D                     sta bomberLine11,y
004976  2  99 80 21                     sta bomberLine12,y
004979  2  99 80 25                     sta bomberLine13,y
00497C  2  99 80 29                     sta bomberLine14,y
00497F  2  99 80 2D                     sta bomberLine15,y
004982  2  99 80 31                     sta bomberLine16,y
004985  2  99 80 35                     sta bomberLine17,y
004988  2  99 80 39                     sta bomberLine18,y
00498B  2  99 80 3D                     sta bomberLine19,y
00498E  2  99 00 22                     sta bomberLine20,y
004991  2  99 00 26                     sta bomberLine21,y
004994  2  99 00 2A                     sta bomberLine22,y
004997  2  99 00 2E                     sta bomberLine23,y
00499A  2  99 00 32                     sta bomberLine24,y
00499D  2  99 00 36                     sta bomberLine25,y
0049A0  2  99 00 3A                     sta bomberLine26,y
0049A3  2  99 00 3E                     sta bomberLine27,y
0049A6  2  A9 FF        @mod            lda #$ff
0049A8  2  99 80 22                     sta bomberLine28,y
0049AB  2  99 80 26                     sta bomberLine29,y
0049AE  2  49 7F                        eor #$7f
0049B0  2  8D A7 49                     sta @mod+1
0049B3  2  C8                           iny
0049B4  2  CA                           dex
0049B5  2  D0 99                        bne @2
0049B7  2  60           @3              rts
0049B8  2               
0049B8  2               ; NOTE: bomber graphics are captured in column order
0049B8  2               
0049B8  2  A2 00        apply_smile     ldx #0
0049BA  2  F0 02                        beq apply_cmn           ; always
0049BC  2  A2 2A        apply_frown     ldx #6*7
0049BE  2  BD 01 4A     apply_cmn       lda smiles_frowns+2,x
0049C1  2  CD 28 4B                     cmp bomber_0+30+10
0049C4  2  F0 38                        beq @4
0049C6  2  A9 00                        lda #<bomber_0
0049C8  2  85 04                        sta ptr+0
0049CA  2  A9 4B                        lda #>bomber_0
0049CC  2  85 05                        sta ptr+1
0049CE  2  A9 07                        lda #7
0049D0  2  85 02                        sta linenum             ; bomber frame index
0049D2  2  A9 03        @1              lda #3
0049D4  2  85 03                        sta column              ; bomber column index
0049D6  2  A0 0A                        ldy #10
0049D8  2  BD FF 49     @2              lda smiles_frowns,x
0049DB  2  91 04                        sta (ptr),y
0049DD  2  E8                           inx
0049DE  2  C8                           iny
0049DF  2  BD FF 49                     lda smiles_frowns,x
0049E2  2  91 04                        sta (ptr),y
0049E4  2  E8                           inx
0049E5  2  88                           dey
0049E6  2  98                           tya
0049E7  2  18                           clc
0049E8  2  69 1E                        adc #30
0049EA  2  A8                           tay
0049EB  2  C6 03                        dec column
0049ED  2  D0 E9                        bne @2
0049EF  2  A5 04                        lda ptr+0
0049F1  2  18                           clc
0049F2  2  69 80                        adc #128
0049F4  2  85 04                        sta ptr+0
0049F6  2  90 02                        bcc @3
0049F8  2  E6 05                        inc ptr+1
0049FA  2  C6 02        @3              dec linenum
0049FC  2  D0 D4                        bne @1
0049FE  2  60           @4              rts
0049FF  2               
0049FF  2  8B AB D1 D4  smiles_frowns   .byte $8b,$ab,$d1,$d4,$ff,$ff           ; smile 0
004A03  2  FF FF        
004A05  2  97 D7 A2 A8                  .byte $97,$d7,$a2,$a8,$ff,$ff           ; smile 1
004A09  2  FF FF        
004A0B  2  AF AF C4 D1                  .byte $af,$af,$c4,$d1,$fe,$fe           ; smile 2
004A0F  2  FE FE        
004A11  2  DF DF 88 A2                  .byte $df,$df,$88,$a2,$fd,$fd           ; smile 3
004A15  2  FD FD        
004A17  2  BF BF 91 C5                  .byte $bf,$bf,$91,$c5,$fa,$fa           ; smile 4
004A1B  2  FA FA        
004A1D  2  FF FF A2 8A                  .byte $ff,$ff,$a2,$8a,$f4,$f5           ; smile 5
004A21  2  F4 F5        
004A23  2  FF FF C5 95                  .byte $ff,$ff,$c5,$95,$e8,$ea           ; smile 6
004A27  2  E8 EA        
004A29  2               
004A29  2  AB 8B D4 D1                  .byte $ab,$8b,$d4,$d1,$ff,$ff           ; frown 0
004A2D  2  FF FF        
004A2F  2  D7 97 A8 A2                  .byte $d7,$97,$a8,$a2,$ff,$ff           ; frown 1
004A33  2  FF FF        
004A35  2  AF AF D1 C4                  .byte $af,$af,$d1,$c4,$fe,$fe           ; frown 2
004A39  2  FE FE        
004A3B  2  DF DF A2 88                  .byte $df,$df,$a2,$88,$fd,$fd           ; frown 3
004A3F  2  FD FD        
004A41  2  BF BF C5 91                  .byte $bf,$bf,$c5,$91,$fa,$fa           ; frown 4
004A45  2  FA FA        
004A47  2  FF FF 8A A2                  .byte $ff,$ff,$8a,$a2,$f5,$f4           ; frown 5
004A4B  2  F5 F4        
004A4D  2  FF FF 95 C5                  .byte $ff,$ff,$95,$c5,$ea,$e8           ; frown 6
004A51  2  EA E8        
004A53  2               
004A53  2  xx xx xx xx                  .align 256
004A57  2  xx xx xx xx  
004A5B  2  xx xx xx xx  
004B00  2               
004B00  2  1F 27 D3 29  bomber_0        .byte $1f,$27,$d3,$29,$03,$31,$00,$aa
004B04  2  03 31 00 AA  
004B08  2  A9 AB 8B AB                  .byte $a9,$ab,$8b,$ab,$a7,$0f,$6f,$07
004B0C  2  A7 0F 6F 07  
004B10  2  7B 01 7E 00                  .byte $7b,$01,$7e,$00,$6e,$00,$6e,$00
004B14  2  6E 00 6E 00  
004B18  2  6E 00 6E 00                  .byte $6e,$00,$6e,$00,$20,$02,$78,$65
004B1C  2  20 02 78 65  
004B20  2  CA 15 40 0C                  .byte $ca,$15,$40,$0c,$00,$d5,$94,$d5
004B24  2  00 D5 94 D5  
004B28  2  D1 D4 E5 70                  .byte $d1,$d4,$e5,$70,$77,$60,$5f,$00
004B2C  2  77 60 5F 00  
004B30  2  7F 00 77 00                  .byte $7f,$00,$77,$00,$77,$00,$77,$00
004B34  2  77 00 77 00  
004B38  2  77 00 05 41                  .byte $77,$00,$05,$41,$7f,$7f,$ff,$7f
004B3C  2  7F 7F FF 7F  
004B40  2  7F 7F 7E FE                  .byte $7f,$7f,$7e,$fe,$ff,$ff,$ff,$ff
004B44  2  FF FF FF FF  
004B48  2  FF 7F 7F 7F                  .byte $ff,$7f,$7f,$7f,$7f,$7f,$7e,$7e
004B4C  2  7F 7F 7E 7E  
004B50  2  7E 7E 7E 7E                  .byte $7e,$7e,$7e,$7e,$7e,$7e,$7e,$7e
004B54  2  7E 7E 7E 7E  
004B58  2  2A 2A                        .byte $2a,$2a
004B5A  2               
004B5A  2  xx xx xx xx                  .align 128
004B5E  2  xx xx xx xx  
004B62  2  xx xx xx xx  
004B80  2               
004B80  2  3F 4F A7 53  bomber_1        .byte $3f,$4f,$a7,$53,$07,$63,$01,$d5
004B84  2  07 63 01 D5  
004B88  2  D3 D7 97 D7                  .byte $d3,$d7,$97,$d7,$cf,$1f,$5f,$0f
004B8C  2  CF 1F 5F 0F  
004B90  2  77 03 7D 01                  .byte $77,$03,$7d,$01,$5d,$01,$5d,$01
004B94  2  5D 01 5D 01  
004B98  2  5D 01 5D 01                  .byte $5d,$01,$5d,$01,$41,$05,$70,$4a
004B9C  2  41 05 70 4A  
004BA0  2  95 2A 00 18                  .byte $95,$2a,$00,$18,$00,$aa,$a8,$aa
004BA4  2  00 AA A8 AA  
004BA8  2  A2 A8 CA 60                  .byte $a2,$a8,$ca,$60,$6f,$40,$3f,$00
004BAC  2  6F 40 3F 00  
004BB0  2  7F 00 6F 00                  .byte $7f,$00,$6f,$00,$6f,$00,$6f,$00
004BB4  2  6F 00 6F 00  
004BB8  2  6F 00 0A 02                  .byte $6f,$00,$0a,$02,$7f,$7f,$ff,$7e
004BBC  2  7F 7F FF 7E  
004BC0  2  7F 7E 7C FD                  .byte $7f,$7e,$7c,$fd,$fe,$ff,$ff,$ff
004BC4  2  FE FF FF FF  
004BC8  2  FF 7F 7F 7F                  .byte $ff,$7f,$7f,$7f,$7f,$7e,$7d,$7c
004BCC  2  7F 7E 7D 7C  
004BD0  2  7D 7C 7D 7C                  .byte $7d,$7c,$7d,$7c,$7d,$7c,$7d,$7c
004BD4  2  7D 7C 7D 7C  
004BD8  2  54 55                        .byte $54,$55
004BDA  2               
004BDA  2  xx xx xx xx                  .align 128
004BDE  2  xx xx xx xx  
004BE2  2  xx xx xx xx  
004C00  2               
004C00  2  7F 1F CF 27  bomber_2        .byte $7f,$1f,$cf,$27,$0f,$47,$03,$ab
004C04  2  0F 47 03 AB  
004C08  2  A7 AF AF AF                  .byte $a7,$af,$af,$af,$9f,$3f,$3f,$1f
004C0C  2  9F 3F 3F 1F  
004C10  2  6F 07 7B 03                  .byte $6f,$07,$7b,$03,$3b,$03,$3b,$03
004C14  2  3B 03 3B 03  
004C18  2  3B 03 3B 03                  .byte $3b,$03,$3b,$03,$02,$0a,$60,$15
004C1C  2  02 0A 60 15  
004C20  2  AA 55 00 31                  .byte $aa,$55,$00,$31,$00,$d5,$d1,$d5
004C24  2  00 D5 D1 D5  
004C28  2  C4 D1 95 40                  .byte $c4,$d1,$95,$40,$5f,$00,$7f,$00
004C2C  2  5F 00 7F 00  
004C30  2  7F 00 5F 00                  .byte $7f,$00,$5f,$00,$5f,$00,$5f,$00
004C34  2  5F 00 5F 00  
004C38  2  5F 00 15 04                  .byte $5f,$00,$15,$04,$7f,$7f,$fe,$7c
004C3C  2  7F 7F FE 7C  
004C40  2  7E 7C 78 FA                  .byte $7e,$7c,$78,$fa,$fc,$fe,$fe,$fe
004C44  2  FC FE FE FE  
004C48  2  FF 7F 7F 7F                  .byte $ff,$7f,$7f,$7f,$7e,$7c,$7b,$78
004C4C  2  7E 7C 7B 78  
004C50  2  7B 78 7B 78                  .byte $7b,$78,$7b,$78,$7b,$78,$7b,$78
004C54  2  7B 78 7B 78  
004C58  2  28 2A                        .byte $28,$2a
004C5A  2               
004C5A  2  xx xx xx xx                  .align 128
004C5E  2  xx xx xx xx  
004C62  2  xx xx xx xx  
004C80  2               
004C80  2  7F 3F 9F 4F  bomber_3        .byte $7f,$3f,$9f,$4f,$1f,$0f,$07,$d7
004C84  2  1F 0F 07 D7  
004C88  2  CF DF DF DF                  .byte $cf,$df,$df,$df,$bf,$7f,$7f,$3f
004C8C  2  BF 7F 7F 3F  
004C90  2  5F 0F 77 07                  .byte $5f,$0f,$77,$07,$77,$07,$77,$07
004C94  2  77 07 77 07  
004C98  2  77 07 77 07                  .byte $77,$07,$77,$07,$05,$15,$41,$2a
004C9C  2  05 15 41 2A  
004CA0  2  D5 2A 00 63                  .byte $d5,$2a,$00,$63,$00,$aa,$a2,$aa
004CA4  2  00 AA A2 AA  
004CA8  2  88 A2 AA 00                  .byte $88,$a2,$aa,$00,$3e,$00,$7f,$00
004CAC  2  3E 00 7F 00  
004CB0  2  7F 00 3E 00                  .byte $7f,$00,$3e,$00,$3e,$00,$3e,$00
004CB4  2  3E 00 3E 00  
004CB8  2  3E 00 2A 08                  .byte $3e,$00,$2a,$08,$7f,$7e,$fc,$79
004CBC  2  7F 7E FC 79  
004CC0  2  7C 78 70 F5                  .byte $7c,$78,$70,$f5,$f9,$fd,$fd,$fd
004CC4  2  F9 FD FD FD  
004CC8  2  FE 7F 7F 7E                  .byte $fe,$7f,$7f,$7e,$7d,$78,$77,$70
004CCC  2  7D 78 77 70  
004CD0  2  77 70 77 70                  .byte $77,$70,$77,$70,$77,$70,$77,$70
004CD4  2  77 70 77 70  
004CD8  2  50 54                        .byte $50,$54
004CDA  2               
004CDA  2  xx xx xx xx                  .align 128
004CDE  2  xx xx xx xx  
004CE2  2  xx xx xx xx  
004D00  2               
004D00  2  7F 7F BF 1F  bomber_4        .byte $7f,$7f,$bf,$1f,$3f,$1f,$0f,$af
004D04  2  3F 1F 0F AF  
004D08  2  9F BF BF BF                  .byte $9f,$bf,$bf,$bf,$ff,$7f,$7f,$7f
004D0C  2  FF 7F 7F 7F  
004D10  2  3F 1F 6F 0F                  .byte $3f,$1f,$6f,$0f,$6f,$0f,$6f,$0f
004D14  2  6F 0F 6F 0F  
004D18  2  6F 0F 6F 0F                  .byte $6f,$0f,$6f,$0f,$0a,$2a,$03,$54
004D1C  2  0A 2A 03 54  
004D20  2  AA 55 00 46                  .byte $aa,$55,$00,$46,$00,$d5,$c5,$d5
004D24  2  00 D5 C5 D5  
004D28  2  91 C5 D4 01                  .byte $91,$c5,$d4,$01,$7d,$00,$7f,$00
004D2C  2  7D 00 7F 00  
004D30  2  7F 00 7D 00                  .byte $7f,$00,$7d,$00,$7d,$00,$7d,$00
004D34  2  7D 00 7D 00  
004D38  2  7D 00 54 10                  .byte $7d,$00,$54,$10,$7f,$7c,$f9,$72
004D3C  2  7F 7C F9 72  
004D40  2  78 71 60 EA                  .byte $78,$71,$60,$ea,$f2,$fa,$fa,$fa
004D44  2  F2 FA FA FA  
004D48  2  FC 7E 7E 7C                  .byte $fc,$7e,$7e,$7c,$7b,$70,$6f,$60
004D4C  2  7B 70 6F 60  
004D50  2  6E 60 6E 60                  .byte $6e,$60,$6e,$60,$6e,$60,$6e,$60
004D54  2  6E 60 6E 60  
004D58  2  20 28                        .byte $20,$28
004D5A  2               
004D5A  2  xx xx xx xx                  .align 128
004D5E  2  xx xx xx xx  
004D62  2  xx xx xx xx  
004D80  2               
004D80  2  7F 7F FF 3F  bomber_5        .byte $7f,$7f,$ff,$3f,$7f,$3f,$1f,$df
004D84  2  7F 3F 1F DF  
004D88  2  BF FF FF FF                  .byte $bf,$ff,$ff,$ff,$ff,$7f,$7f,$7f
004D8C  2  FF 7F 7F 7F  
004D90  2  7F 3F 5F 1F                  .byte $7f,$3f,$5f,$1f,$5f,$1f,$5f,$1f
004D94  2  5F 1F 5F 1F  
004D98  2  5F 1F 5F 1F                  .byte $5f,$1f,$5f,$1f,$15,$55,$07,$29
004D9C  2  15 55 07 29  
004DA0  2  D4 2A 00 0C                  .byte $d4,$2a,$00,$0c,$00,$aa,$8a,$aa
004DA4  2  00 AA 8A AA  
004DA8  2  A2 8A A9 03                  .byte $a2,$8a,$a9,$03,$7b,$01,$7e,$00
004DAC  2  7B 01 7E 00  
004DB0  2  7F 00 7B 00                  .byte $7f,$00,$7b,$00,$7b,$00,$7b,$00
004DB4  2  7B 00 7B 00  
004DB8  2  7B 00 28 20                  .byte $7b,$00,$28,$20,$7e,$79,$f2,$65
004DBC  2  7E 79 F2 65  
004DC0  2  70 63 40 D5                  .byte $70,$63,$40,$d5,$e5,$f5,$f4,$f5
004DC4  2  E5 F5 F4 F5  
004DC8  2  F9 7C 7D 78                  .byte $f9,$7c,$7d,$78,$77,$60,$5f,$40
004DCC  2  77 60 5F 40  
004DD0  2  5D 40 5D 40                  .byte $5d,$40,$5d,$40,$5d,$40,$5d,$40
004DD4  2  5D 40 5D 40  
004DD8  2  41 50                        .byte $41,$50
004DDA  2               
004DDA  2  xx xx xx xx                  .align 128
004DDE  2  xx xx xx xx  
004DE2  2  xx xx xx xx  
004E00  2               
004E00  2  7F 7F FF 7F  bomber_6        .byte $7f,$7f,$ff,$7f,$7f,$7f,$3f,$bf
004E04  2  7F 7F 3F BF  
004E08  2  FF FF FF FF                  .byte $ff,$ff,$ff,$ff,$ff,$7f,$7f,$7f
004E0C  2  FF 7F 7F 7F  
004E10  2  7F 7F 3F 3F                  .byte $7f,$7f,$3f,$3f,$3f,$3f,$3f,$3f
004E14  2  3F 3F 3F 3F  
004E18  2  3F 3F 3F 3F                  .byte $3f,$3f,$3f,$3f,$2a,$2a,$0f,$53
004E1C  2  2A 2A 0F 53  
004E20  2  A9 54 01 18                  .byte $a9,$54,$01,$18,$00,$d5,$94,$d5
004E24  2  00 D5 94 D5  
004E28  2  C5 95 D3 07                  .byte $c5,$95,$d3,$07,$77,$03,$7d,$00
004E2C  2  77 03 7D 00  
004E30  2  7F 00 77 00                  .byte $7f,$00,$77,$00,$77,$00,$77,$00
004E34  2  77 00 77 00  
004E38  2  77 00 50 41                  .byte $77,$00,$50,$41,$7c,$72,$e5,$4a
004E3C  2  7C 72 E5 4A  
004E40  2  60 46 00 AA                  .byte $60,$46,$00,$aa,$ca,$ea,$e8,$ea
004E44  2  CA EA E8 EA  
004E48  2  F2 78 7B 70                  .byte $f2,$78,$7b,$70,$6f,$40,$3f,$00
004E4C  2  6F 40 3F 00  
004E50  2  3B 00 3B 00                  .byte $3b,$00,$3b,$00,$3b,$00,$3b,$00
004E54  2  3B 00 3B 00  
004E58  2  02 20                        .byte $02,$20
004E5A  2               
004E5A  2                               ; .byte %........############............
004E5A  2                               ; .byte %....####################........
004E5A  2                               ; .byte %....####################........
004E5A  2                               ; .byte %....####################........
004E5A  2                               ; .byte %########....####....########....
004E5A  2                               ; .byte %############################....
004E5A  2                               ; .byte %############....############....
004E5A  2                               ; .byte %....########....########........
004E5A  2                               ; .byte %....####################........
004E5A  2                               ; .byte %....####....####....####........
004E5A  2                               ; .byte %....########....########........
004E5A  2                               ; .byte %........############............
004E5A  2                               ; .byte %........############............
004E5A  2                               ; .byte %........############............
004E5A  2                               ; .byte %....####################........
004E5A  2                               ; .byte %############################....
004E5A  2                               ; .byte %############################....
004E5A  2                               ; .byte %############################....
004E5A  2                               ; .byte %############################....
004E5A  2                               ; .byte %############################....
004E5A  2                               ; .byte %####....############....####....
004E5A  2                               ; .byte %########....####....########....
004E5A  2                               ; .byte %####....############....####....
004E5A  2                               ; .byte %########....####....########....
004E5A  2                               ; .byte %####....############....####....
004E5A  2                               ; .byte %########....####....########....
004E5A  2                               ; .byte %####....############....####....
004E5A  2                               ; .byte %####....................####....
004E5A  2                               ; .byte %####....................####....
004E5A  2                               ; .byte %....####............####........
004E5A  2                               ; .byte %................................
004E5A  2                               ; .byte %................................
004E5A  2               
004E5A  1                               .include "bombs.s"
004E5A  2               
004E5A  2               data_addr_l     =   $50                 ; must be consecutive ->
004E5A  2               data_addr_h     =   $51
004E5A  2               code_ptr        =   $52
004E5A  2               code_ptr_h      =   $53
004E5A  2               table_ptr1      =   $54
004E5A  2               table_ptr1_h    =   $55
004E5A  2               table_ptr2      =   $56
004E5A  2               table_ptr2_h    =   $57                 ; <- in this order
004E5A  2               
004E5A  2               table_index     =   $58
004E5A  2               
004E5A  2  A4 A2        draw_bombs      ldy player_wave
004E5C  2  B9 16 50                     lda wave_bomb_dy,y
004E5F  2  85 61                        sta bomb_dy
004E61  2               
004E61  2  A5 AE                        lda exp_bomb_frame
004E63  2  F0 03                        beq @1
004E65  2  4C 0C 4F                     jmp explode_bombs
004E68  2               
004E68  2  20 5C 51     @1              jsr draw_top_bomb
004E6B  2               
004E6B  2  A5 B1                        lda bomb_vphase
004E6D  2  18                           clc
004E6E  2  69 04                        adc #bombMaxDy
004E70  2  38                           sec
004E71  2  E5 61                        sbc bomb_dy
004E73  2  85 63                        sta start_line
004E75  2  18                           clc
004E76  2  69 12                        adc #bombPhaseDy
004E78  2  85 64                        sta end_line
004E7A  2               
004E7A  2  A2 01                        ldx #1
004E7C  2  86 62        @next_bomb      stx bomb_index
004E7E  2  E0 04                        cpx #4
004E80  2  90 71                        bcc @no_hit
004E82  2  D0 29                        bne @4
004E84  2               
004E84  2  20 24 60                     jsr erase_buckets
004E87  2               
004E87  2               ; update bucket position to latest value
004E87  2               ;   and compute right edge hit test values
004E87  2  A5 9D                        lda buckets_x
004E89  2  0A                           asl
004E8A  2  AA                           tax
004E8B  2  18                           clc
004E8C  2  69 21                        adc #33
004E8E  2  A8                           tay
004E8F  2  BD 00 77                     lda div7,x
004E92  2  85 08                        sta bucket_xcol
004E94  2  BD 00 78                     lda mod7,x
004E97  2  85 09                        sta bucket_xshift
004E99  2  90 08                        bcc @2
004E9B  2  BE C0 79                     ldx div7_hi,y
004E9E  2  B9 04 78                     lda mod7_hi,y
004EA1  2  B0 06                        bcs @3                  ; always
004EA3  2  BE 00 77     @2              ldx div7,y
004EA6  2  B9 00 78                     lda mod7,y
004EA9  2  86 0A        @3              stx hit_xcol
004EAB  2  85 0B                        sta hit_xshift
004EAD  2               @4
004EAD  2               
004EAD  2               ; hit test bucket left/right
004EAD  2  A6 62                        ldx bomb_index
004EAF  2  B5 BB                        lda bomb_columns,x
004EB1  2  4A                           lsr                     ; remove hflip bit
004EB2  2  85 00                        sta temp
004EB4  2  A8                           tay
004EB5  2  C8                           iny
004EB6  2  C4 08                        cpy bucket_xcol
004EB8  2  90 39                        bcc @no_hit
004EBA  2  A5 0A                        lda hit_xcol
004EBC  2  C5 00                        cmp temp
004EBE  2  D0 04                        bne @5
004EC0  2               ; allow a small amount of overlap
004EC0  2  A5 0B                        lda hit_xshift
004EC2  2  C9 03                        cmp #3
004EC4  2  90 2D        @5              bcc @no_hit
004EC6  2               
004EC6  2               ; hit test bomb against bucket top/bottom
004EC6  2  A9 2B                        lda #bombsTop-bombMaxDy
004EC8  2  18                           clc
004EC9  2  65 63                        adc start_line
004ECB  2               ;               clc
004ECB  2  65 61                        adc bomb_dy
004ECD  2  A4 A1                        ldy player_buckets
004ECF  2  88                           dey
004ED0  2  D9 13 50                     cmp bucket_bottoms,y
004ED3  2  B0 1E                        bcs @no_hit
004ED5  2               ;               clc
004ED5  2  69 0D                        adc #14-1
004ED7  2  D9 10 50     @6              cmp bucket_tops,y
004EDA  2  B0 05                        bcs @7
004EDC  2  88                           dey
004EDD  2  10 F8                        bpl @6
004EDF  2  30 12                        bmi @no_hit             ; always
004EE1  2               
004EE1  2  A6 62        @7              ldx bomb_index
004EE3  2  B5 B3                        lda bomb_frames,x
004EE5  2  F0 0C                        beq @no_hit
004EE7  2  C4 9C                        cpy splash_bucket
004EE9  2  F0 04                        beq @8
004EEB  2  A9 00                        lda #0
004EED  2  85 AF                        sta splash_frame
004EEF  2  84 C4        @8              sty bucket_hit
004EF1  2  86 C3                        stx bomb_hit
004EF3  2               
004EF3  2  20 C9 4F     @no_hit         jsr draw_bomb
004EF6  2               
004EF6  2  A5 63                        lda start_line
004EF8  2  18                           clc
004EF9  2  69 12                        adc #bombPhaseDy
004EFB  2  85 63                        sta start_line
004EFD  2               ;               clc
004EFD  2  69 12                        adc #bombPhaseDy
004EFF  2  85 64                        sta end_line
004F01  2               
004F01  2  A6 62                        ldx bomb_index
004F03  2  E8                           inx
004F04  2  E0 08                        cpx #8
004F06  2  F0 03                        beq @9
004F08  2  4C 7C 4E                     jmp @next_bomb
004F0B  2  60           @9              rts
004F0C  2               
004F0C  2  A5 AC        explode_bombs   lda exp_bomb_index
004F0E  2  D0 13                        bne @1
004F10  2  A5 AE                        lda exp_bomb_frame
004F12  2  C9 20                        cmp #$20
004F14  2  90 0D                        bcc @1
004F16  2               
004F16  2               ; draw top explosion
004F16  2  A5 B1                        lda bomb_vphase
004F18  2  18                           clc
004F19  2  69 1D                        adc #bomb0Top
004F1B  2  A2 00                        ldx #0
004F1D  2  20 6B 4F                     jsr draw_explode
004F20  2  4C 26 4F                     jmp @2
004F23  2               
004F23  2  20 5C 51     @1              jsr draw_top_bomb
004F26  2               @2
004F26  2  A9 04                        lda #4
004F28  2  85 61                        sta bomb_dy
004F2A  2  A5 B1                        lda bomb_vphase
004F2C  2  85 63                        sta start_line
004F2E  2  18                           clc
004F2F  2  69 12                        adc #bombPhaseDy
004F31  2  85 64                        sta end_line
004F33  2               
004F33  2  A2 01                        ldx #1
004F35  2  86 62        @next_bomb      stx bomb_index
004F37  2  E0 04                        cpx #4
004F39  2  D0 05                        bne @3
004F3B  2  20 24 60                     jsr erase_buckets
004F3E  2  A6 62                        ldx bomb_index
004F40  2  E4 AC        @3              cpx exp_bomb_index
004F42  2  D0 11                        bne @4
004F44  2               
004F44  2               ; draw currently exploding bomb
004F44  2  A5 AE                        lda exp_bomb_frame
004F46  2  C9 20                        cmp #$20
004F48  2  90 0E                        bcc @5
004F4A  2               
004F4A  2  A5 63                        lda start_line
004F4C  2  18                           clc
004F4D  2  69 2F                        adc #bombsTop
004F4F  2  20 6B 4F                     jsr draw_explode
004F52  2  4C 58 4F                     jmp @5
004F55  2               
004F55  2  20 C9 4F     @4              jsr draw_bomb
004F58  2  A5 63        @5              lda start_line
004F5A  2  18                           clc
004F5B  2  69 12                        adc #bombPhaseDy
004F5D  2  85 63                        sta start_line
004F5F  2               ;               clc
004F5F  2  69 12                        adc #bombPhaseDy
004F61  2  85 64                        sta end_line
004F63  2  A6 62                        ldx bomb_index
004F65  2  E8                           inx
004F66  2  E0 08                        cpx #8
004F68  2  D0 CB                        bne @next_bomb
004F6A  2  60                           rts
004F6B  2               ;
004F6B  2               ; On entry:
004F6B  2               ;   A: top line
004F6B  2               ;   X: bomb index
004F6B  2               ;
004F6B  2  85 02        draw_explode    sta linenum
004F6D  2  B5 BB                        lda bomb_columns,x
004F6F  2  4A                           lsr
004F70  2  A8                           tay
004F71  2  88                           dey
004F72  2  8C AF 4F                     sty @mod1+1
004F75  2  98                           tya
004F76  2  18                           clc
004F77  2  69 04                        adc #4
004F79  2  8D B8 4F                     sta @mod3+1
004F7C  2  4A                           lsr
004F7D  2  A5 AE                        lda exp_bomb_frame
004F7F  2  29 0F                        and #$0F
004F81  2  90 02                        bcc @1
004F83  2               ;               sec
004F83  2  69 0B                        adc #12-1
004F85  2  0A           @1              asl
004F86  2  A8                           tay
004F87  2  B9 BC 57                     lda explode_table+0,y
004F8A  2  8D B1 4F                     sta @mod2+1
004F8D  2  B9 BD 57                     lda explode_table+1,y
004F90  2  8D B2 4F                     sta @mod2+2
004F93  2               
004F93  2  A9 00                        lda #0
004F95  2  85 01                        sta offset
004F97  2  A5 02                        lda linenum
004F99  2  AA                           tax
004F9A  2  18                           clc
004F9B  2  69 10                        adc #16
004F9D  2  8D C5 4F                     sta @mod4+1
004FA0  2  86 02        @2              stx linenum
004FA2  2  BD 00 79                     lda hires_table_lo,x
004FA5  2  85 0D                        sta screenl
004FA7  2  BD 00 7A                     lda hires_table_hi,x
004FAA  2  85 0E                        sta screenh
004FAC  2  A6 01                        ldx offset
004FAE  2  A0 FF        @mod1           ldy #$ff
004FB0  2  BD FF FF     @mod2           lda $ffff,x
004FB3  2  91 0D                        sta (screenl),y
004FB5  2  E8                           inx
004FB6  2  C8                           iny
004FB7  2  C0 FF        @mod3           cpy #$ff
004FB9  2  D0 F5                        bne @mod2
004FBB  2  86 01                        stx offset
004FBD  2  A6 02                        ldx linenum
004FBF  2  E8                           inx
004FC0  2  E0 B6                        cpx #bombsBottom
004FC2  2  B0 04                        bcs @3
004FC4  2  E0 FF        @mod4           cpx #$ff
004FC6  2  D0 D8                        bne @2
004FC8  2                               same_page_as @2
004FC8  2  60           @3              rts
004FC9  2               
004FC9  2               ; NOTE: table_ptr1+0 and table_ptr2+0 are still #$00 from init_bombs
004FC9  2  A6 62        draw_bomb       ldx bomb_index          ; 3
004FCB  2  B5 BB                        lda bomb_columns,x      ; 4
004FCD  2  4A                           lsr                     ; 2
004FCE  2  8D 05 50                     sta @mod1+1             ; 4
004FD1  2  2A                           rol                     ; 2
004FD2  2  29 03                        and #$3                 ; 2
004FD4  2  09 10                        ora #>table_buffer0_lo  ; 2
004FD6  2  85 55                        sta table_ptr1+1        ; 3
004FD8  2  09 04                        ora #$04                ; 2
004FDA  2  85 57                        sta table_ptr2+1        ; 3
004FDC  2  A4 63                        ldy start_line          ; 3
004FDE  2  B1 54                        lda (table_ptr1),y      ; 5
004FE0  2  8D 07 50                     sta @mod2+1             ; 4
004FE3  2  B1 56                        lda (table_ptr2),y      ; 5
004FE5  2  8D 08 50                     sta @mod2+2             ; 4
004FE8  2  A4 64                        ldy end_line            ; 3
004FEA  2  B1 54                        lda (table_ptr1),y      ; 5
004FEC  2  85 65                        sta bomb_ptr            ; 3
004FEE  2  B1 56                        lda (table_ptr2),y      ; 5
004FF0  2  85 66                        sta bomb_ptr_h          ; 3
004FF2  2  B4 B3                        ldy bomb_frames,x       ; 4
004FF4  2  B9 23 50                     lda bomb_offsets,y      ; 4
004FF7  2  A4 61                        ldy bomb_dy             ; 3
004FF9  2  18                           clc                     ; 2
004FFA  2  79 1E 50                     adc bomb_dy_offset,y    ; 4
004FFD  2  AA                           tax                     ; 2
004FFE  2  A0 00                        ldy #0                  ; 2
005000  2  A9 60                        lda #$60                ; 2 rts
005002  2  91 65                        sta (bomb_ptr),y        ; 6
005004  2  A0 FF        @mod1           ldy #$ff                ; 2
005006  2  20 FF FF     @mod2           jsr $ffff               ; 6 + 6 rts
005009  2  A0 00                        ldy #0                  ; 2
00500B  2  A9 BD                        lda #$bd                ; 2 lda $ffff,x
00500D  2  91 65                        sta (bomb_ptr),y        ; 6
00500F  2  60                           rts                     ; 6 = 126 + lines * 20
005010  2               
005010  2  8D           bucket_tops     .byte bucketTopY
005011  2  9D                           .byte bucketMidY
005012  2  AD                           .byte bucketBotY
005013  2               
005013  2  95           bucket_bottoms  .byte bucketTopY+bucketHeight
005014  2  A5                           .byte bucketMidY+bucketHeight
005015  2  B5                           .byte bucketBotY+bucketHeight
005016  2               
005016  2  01 01 02 02  wave_bomb_dy    .byte 1,1,2,2,3,3,4,4
00501A  2  03 03 04 04  
00501E  2               
00501E  2  08 06 04 02  bomb_dy_offset  .byte 8,6,4,2,0         ; 2 bytes per line
005022  2  00           
005023  2               
005023  2               ; NOTE: offsets valid for even/odd and left/right
005023  2  00           bomb_offsets    .byte bomb_lx_even-bombs_l_even
005024  2  24                           .byte bomb_l0_even-bombs_l_even
005025  2  48                           .byte bomb_l1_even-bombs_l_even
005026  2  6C                           .byte bomb_l2_even-bombs_l_even
005027  2  90                           .byte bomb_l3_even-bombs_l_even
005028  2               
005028  2               ; 12 lines of bomb + 18 phase lines
005028  2               topBombLine0    :=  hiresLine31
005028  2               topBombLine1    :=  hiresLine32
005028  2               topBombLine2    :=  hiresLine33
005028  2               topBombLine3    :=  hiresLine34
005028  2               topBombLine4    :=  hiresLine35
005028  2               topBombLine5    :=  hiresLine36
005028  2               topBombLine6    :=  hiresLine37
005028  2               topBombLine7    :=  hiresLine38
005028  2               topBombLine8    :=  hiresLine39
005028  2               
005028  2               topBombLine9    :=  hiresLine40
005028  2               topBombLine10   :=  hiresLine41
005028  2               topBombLine11   :=  hiresLine42
005028  2               topBombLine12   :=  hiresLine43
005028  2               topBombLine13   :=  hiresLine44
005028  2               
005028  2               topBombLine14   :=  hiresLine45
005028  2               topBombLine15   :=  hiresLine46
005028  2               topBombLine16   :=  hiresLine47
005028  2               topBombLine17   :=  hiresLine48
005028  2               topBombLine18   :=  hiresLine49
005028  2               topBombLine19   :=  hiresLine50
005028  2               topBombLine20   :=  hiresLine51
005028  2               topBombLine21   :=  hiresLine52
005028  2               topBombLine22   :=  hiresLine53
005028  2               topBombLine23   :=  hiresLine54
005028  2               topBombLine24   :=  hiresLine55
005028  2               topBombLine25   :=  hiresLine56
005028  2               topBombLine26   :=  hiresLine57
005028  2               topBombLine27   :=  hiresLine58
005028  2               topBombLine28   :=  hiresLine59
005028  2               topBombLine29   :=  hiresLine60
005028  2               
005028  2  00           prev_bomb_phase .byte 0
005029  2  00           prev_bomb_col   .byte 0
00502A  2               
00502A  2               ; NOTE: This takes 270 cycles versus 625
00502A  2               ;   cycles for a normal implementation.
00502A  2  AD 29 50     erase_top_bomb  lda prev_bomb_col
00502D  2  F0 51                        beq @4
00502F  2  AC 28 50                     ldy prev_bomb_phase
005032  2  B9 81 50                     lda @offsets,y
005035  2  8D 71 50                     sta @mod1+1
005038  2  8D 78 50                     sta @mod3+1
00503B  2  C0 09                        cpy #9                  ; start with white or green?
00503D  2  08                           php
00503E  2  98                           tya
00503F  2  18                           clc
005040  2  69 0C                        adc #12                 ; top bomb minimal height
005042  2  A8                           tay
005043  2  B9 81 50                     lda @offsets,y
005046  2  85 04                        sta ptr+0
005048  2  A9 51                        lda #>@line0
00504A  2  85 05                        sta ptr+1
00504C  2  A0 00                        ldy #0
00504E  2  A9 60                        lda #$60                ; rts
005050  2  91 04                        sta (ptr),y
005052  2  AC 29 50                     ldy prev_bomb_col
005055  2  A2 2A                        ldx #$2a
005057  2  98                           tya
005058  2  4A                           lsr
005059  2  90 02                        bcc @2
00505B  2  A2 55                        ldx #$55
00505D  2  8E 6F 50     @2              stx @mod0+1
005060  2  8A                           txa
005061  2  49 7F                        eor #$7f
005063  2  8D 76 50                     sta @mod2+1
005066  2  28                           plp
005067  2  B0 03                        bcs @3                  ; all green?
005069  2  A9 7F                        lda #$7F
00506B  2  AA                           tax
00506C  2  48           @3              pha
00506D  2  8A                           txa
00506E  2  A2 FF        @mod0           ldx #$ff
005070  2  20 00 51     @mod1           jsr @line0
005073  2  C8                           iny
005074  2  68                           pla
005075  2  A2 FF        @mod2           ldx #$ff
005077  2  20 00 51     @mod3           jsr @line0
00507A  2  A0 00                        ldy #0
00507C  2  A9 99                        lda #$99                ; sta abs,y
00507E  2  91 04                        sta (ptr),y
005080  2  60           @4              rts
005081  2               
005081  2  00           @offsets        .byte <@line0
005082  2  03                           .byte <@line1
005083  2  06                           .byte <@line2
005084  2  09                           .byte <@line3
005085  2  0C                           .byte <@line4
005086  2  0F                           .byte <@line5
005087  2  12                           .byte <@line6
005088  2  15                           .byte <@line7
005089  2  18                           .byte <@line8
00508A  2  1C                           .byte <@line9
00508B  2  1F                           .byte <@line10
00508C  2  22                           .byte <@line11
00508D  2  25                           .byte <@line12
00508E  2  28                           .byte <@line13
00508F  2  2B                           .byte <@line14
005090  2  2E                           .byte <@line15
005091  2  31                           .byte <@line16
005092  2  34                           .byte <@line17
005093  2  37                           .byte <@line18
005094  2  3A                           .byte <@line19
005095  2  3D                           .byte <@line20
005096  2  40                           .byte <@line21
005097  2  43                           .byte <@line22
005098  2  46                           .byte <@line23
005099  2  49                           .byte <@line24
00509A  2  4C                           .byte <@line25
00509B  2  4F                           .byte <@line26
00509C  2  52                           .byte <@line27
00509D  2  55                           .byte <@line28
00509E  2  58                           .byte <@line29
00509F  2               
00509F  2  xx xx xx xx                  .align 256
0050A3  2  xx xx xx xx  
0050A7  2  xx xx xx xx  
005100  2               
005100  2  99 80 3D     @line0          sta topBombLine0,y
005103  2  99 00 22     @line1          sta topBombLine1,y
005106  2  99 00 26     @line2          sta topBombLine2,y
005109  2  99 00 2A     @line3          sta topBombLine3,y
00510C  2  99 00 2E     @line4          sta topBombLine4,y
00510F  2  99 00 32     @line5          sta topBombLine5,y
005112  2  99 00 36     @line6          sta topBombLine6,y
005115  2  99 00 3A     @line7          sta topBombLine7,y
005118  2  99 00 3E     @line8          sta topBombLine8,y
00511B  2  8A                           txa
00511C  2  99 80 22     @line9          sta topBombLine9,y
00511F  2  99 80 26     @line10         sta topBombLine10,y
005122  2  99 80 2A     @line11         sta topBombLine11,y
005125  2  99 80 2E     @line12         sta topBombLine12,y
005128  2  99 80 32     @line13         sta topBombLine13,y
00512B  2  99 80 36     @line14         sta topBombLine14,y
00512E  2  99 80 3A     @line15         sta topBombLine15,y
005131  2  99 80 3E     @line16         sta topBombLine16,y
005134  2  99 00 23     @line17         sta topBombLine17,y
005137  2  99 00 27     @line18         sta topBombLine18,y
00513A  2  99 00 2B     @line19         sta topBombLine19,y
00513D  2  99 00 2F     @line20         sta topBombLine20,y
005140  2  99 00 33     @line21         sta topBombLine21,y
005143  2  99 00 37     @line22         sta topBombLine22,y
005146  2  99 00 3B     @line23         sta topBombLine23,y
005149  2  99 00 3F     @line24         sta topBombLine24,y
00514C  2  99 80 23     @line25         sta topBombLine25,y
00514F  2  99 80 27     @line26         sta topBombLine26,y
005152  2  99 80 2B     @line27         sta topBombLine27,y
005155  2  99 80 2F     @line28         sta topBombLine28,y
005158  2  99 80 33     @line29         sta topBombLine29,y
00515B  2  60                           rts
00515C  2               
00515C  2               ; Drawing top bomb:
00515C  2               ;   5 lines of OR
00515C  2               ;   7 lines of mask
00515C  2               ;   (or 4 lines of mask, 3 lines of copy)
00515C  2               ;
00515C  2  A5 BB        draw_top_bomb   lda bomb_columns+0
00515E  2  4A                           lsr
00515F  2  8D 29 50                     sta prev_bomb_col
005162  2  85 03                        sta column
005164  2  A0 04                        ldy #4                  ; no bomb
005166  2  A6 B3                        ldx bomb_frames+0
005168  2  F0 0C                        beq @2
00516A  2  08                           php
00516B  2  4A                           lsr
00516C  2  A0 00                        ldy #0                  ; even
00516E  2  90 02                        bcc @1
005170  2  A0 02                        ldy #2                  ; odd
005172  2  28           @1              plp
005173  2  90 01                        bcc @2
005175  2  C8                           iny                     ; right fuse
005176  2  A5 03        @2              lda column
005178  2  BE E3 51                     ldx top_offsets,y
00517B  2               
00517B  2  A5 B1                        lda bomb_vphase
00517D  2  8D 28 50                     sta prev_bomb_phase
005180  2  18                           clc
005181  2  69 1D                        adc #bomb0Top
005183  2               ;               clc
005183  2  69 02                        adc #2                  ; 2 lines from top of phase
005185  2  A8                           tay
005186  2               ;               clc
005186  2  69 05                        adc #5
005188  2  8D B3 51                     sta @mod1+1
00518B  2               ;               clc
00518B  2  69 07                        adc #7
00518D  2  8D DF 51                     sta @mod2+1
005190  2               
005190  2  84 02        @3              sty linenum
005192  2  B9 00 79                     lda hires_table_lo,y
005195  2  85 0D                        sta screenl
005197  2  B9 00 7A                     lda hires_table_hi,y
00519A  2  85 0E                        sta screenh
00519C  2               
00519C  2  A4 03                        ldy column
00519E  2  B1 0D                        lda (screenl),y
0051A0  2               ;               and top_mask,x
0051A0  2  1D 00 52                     ora top_data,x
0051A3  2  91 0D                        sta (screenl),y
0051A5  2  E8                           inx
0051A6  2  C8                           iny
0051A7  2  B1 0D                        lda (screenl),y
0051A9  2               ;               and top_mask,x
0051A9  2  1D 00 52                     ora top_data,x
0051AC  2  91 0D                        sta (screenl),y
0051AE  2  E8                           inx
0051AF  2               
0051AF  2  A4 02                        ldy linenum
0051B1  2  C8                           iny
0051B2  2  C0 FF        @mod1           cpy #$ff
0051B4  2  D0 DA                        bne @3
0051B6  2                               same_page_as @3
0051B6  2               
0051B6  2  84 02        @4              sty linenum
0051B8  2  B9 00 79                     lda hires_table_lo,y
0051BB  2  85 0D                        sta screenl
0051BD  2  B9 00 7A                     lda hires_table_hi,y
0051C0  2  85 0E                        sta screenh
0051C2  2               
0051C2  2  A4 03                        ldy column
0051C4  2  B1 0D                        lda (screenl),y
0051C6  2  3D 00 53                     and top_mask,x
0051C9  2  1D 00 52                     ora top_data,x
0051CC  2  91 0D                        sta (screenl),y
0051CE  2  E8                           inx
0051CF  2  C8                           iny
0051D0  2  B1 0D                        lda (screenl),y
0051D2  2  3D 00 53                     and top_mask,x
0051D5  2  1D 00 52                     ora top_data,x
0051D8  2  91 0D                        sta (screenl),y
0051DA  2  E8                           inx
0051DB  2               
0051DB  2  A4 02                        ldy linenum
0051DD  2  C8                           iny
0051DE  2  C0 FF        @mod2           cpy #$ff
0051E0  2  D0 D4                        bne @4
0051E2  2                               same_page_as @4
0051E2  2  60                           rts
0051E3  2               
0051E3  2  00 18 30 48  top_offsets     .byte 0,24,48,72,96
0051E7  2  60           
0051E8  2               
0051E8  2  xx xx xx xx                  .align 256
0051EC  2  xx xx xx xx  
0051F0  2  xx xx xx xx  
005200  2               
005200  2  38 00        top_data        .byte $38,$00           ; even bomb, left fuse
005202  2  60 01                        .byte $60,$01
005204  2  00 07                        .byte $00,$07
005206  2  00 07                        .byte $00,$07
005208  2  60 01                        .byte $60,$01
00520A  2  00 00                        .byte $00,$00           ; (bomb start)
00520C  2  00 00                        .byte $00,$00
00520E  2  78 1F                        .byte $78,$1f
005210  2  78 1F                        .byte $78,$1f
005212  2  00 00                        .byte $00,$00
005214  2  00 00                        .byte $00,$00
005216  2  00 00                        .byte $00,$00
005218  2               
005218  2  00 1C                        .byte $00,$1c           ; even bomb, right fuse
00521A  2  00 07                        .byte $00,$07
00521C  2  60 01                        .byte $60,$01
00521E  2  60 01                        .byte $60,$01
005220  2  00 07                        .byte $00,$07
005222  2  00 00                        .byte $00,$00           ; (bomb start)
005224  2  00 00                        .byte $00,$00
005226  2  78 1F                        .byte $78,$1f
005228  2  78 1F                        .byte $78,$1f
00522A  2  00 00                        .byte $00,$00
00522C  2  00 00                        .byte $00,$00
00522E  2  00 00                        .byte $00,$00
005230  2               
005230  2  1C 00                        .byte $1c,$00           ; odd bomb, left fuse
005232  2  70 00                        .byte $70,$00
005234  2  40 03                        .byte $40,$03
005236  2  40 03                        .byte $40,$03
005238  2  70 00                        .byte $70,$00
00523A  2  00 00                        .byte $00,$00           ; (bomb start)
00523C  2  00 00                        .byte $00,$00
00523E  2  7C 0F                        .byte $7c,$0f
005240  2  7C 0F                        .byte $7c,$0f
005242  2  00 00                        .byte $00,$00
005244  2  00 00                        .byte $00,$00
005246  2  00 00                        .byte $00,$00
005248  2               
005248  2  00 0E                        .byte $00,$0e           ; odd bomb, right fuse
00524A  2  40 03                        .byte $40,$03
00524C  2  70 00                        .byte $70,$00
00524E  2  70 00                        .byte $70,$00
005250  2  40 03                        .byte $40,$03
005252  2  00 00                        .byte $00,$00           ; (bomb start)
005254  2  00 00                        .byte $00,$00
005256  2  7C 0F                        .byte $7c,$0f
005258  2  7C 0F                        .byte $7c,$0f
00525A  2  00 00                        .byte $00,$00
00525C  2  00 00                        .byte $00,$00
00525E  2  00 00                        .byte $00,$00
005260  2               
005260  2  00 00                        .byte $00,$00           ; no bomb
005262  2  00 00                        .byte $00,$00
005264  2  00 00                        .byte $00,$00
005266  2  00 00                        .byte $00,$00
005268  2  00 00                        .byte $00,$00
00526A  2  00 00                        .byte $00,$00           ; (bomb start)
00526C  2  00 00                        .byte $00,$00
00526E  2  00 00                        .byte $00,$00
005270  2  00 00                        .byte $00,$00
005272  2  00 00                        .byte $00,$00
005274  2  00 00                        .byte $00,$00
005276  2  00 00                        .byte $00,$00
005278  2               
005278  2  xx xx xx xx                  .align 256
00527C  2  xx xx xx xx  
005280  2  xx xx xx xx  
005300  2               
005300  2  00 00        top_mask        .byte $00,$00           ; even bomb, left fuse
005302  2  00 00                        .byte $00,$00
005304  2  00 00                        .byte $00,$00
005306  2  00 00                        .byte $00,$00
005308  2  00 00                        .byte $00,$00
00530A  2  0F 70                        .byte $0f,$70
00530C  2  03 40                        .byte $03,$40
00530E  2  03 40                        .byte $03,$40
005310  2  03 40                        .byte $03,$40
005312  2  03 40                        .byte $03,$40
005314  2  0F 70                        .byte $0f,$70
005316  2  3F 7C                        .byte $3f,$7c
005318  2               
005318  2  00 00                        .byte $00,$00           ; even bomb, right fuse
00531A  2  00 00                        .byte $00,$00
00531C  2  00 00                        .byte $00,$00
00531E  2  00 00                        .byte $00,$00
005320  2  00 00                        .byte $00,$00
005322  2  0F 70                        .byte $0f,$70
005324  2  03 40                        .byte $03,$40
005326  2  03 40                        .byte $03,$40
005328  2  03 40                        .byte $03,$40
00532A  2  03 40                        .byte $03,$40
00532C  2  0F 70                        .byte $0f,$70
00532E  2  3F 7C                        .byte $3f,$7c
005330  2               
005330  2  00 00                        .byte $00,$00           ; odd bomb, left fuse
005332  2  00 00                        .byte $00,$00
005334  2  00 00                        .byte $00,$00
005336  2  00 00                        .byte $00,$00
005338  2  00 00                        .byte $00,$00
00533A  2  07 78                        .byte $07,$78
00533C  2  01 60                        .byte $01,$60
00533E  2  01 60                        .byte $01,$60
005340  2  01 60                        .byte $01,$60
005342  2  01 60                        .byte $01,$60
005344  2  07 78                        .byte $07,$78
005346  2  1F 7E                        .byte $1f,$7e
005348  2               
005348  2  00 00                        .byte $00,$00           ; odd bomb, right fuse
00534A  2  00 00                        .byte $00,$00
00534C  2  00 00                        .byte $00,$00
00534E  2  00 00                        .byte $00,$00
005350  2  00 00                        .byte $00,$00
005352  2  07 78                        .byte $07,$78
005354  2  01 60                        .byte $01,$60
005356  2  01 60                        .byte $01,$60
005358  2  01 60                        .byte $01,$60
00535A  2  01 60                        .byte $01,$60
00535C  2  07 78                        .byte $07,$78
00535E  2  1F 7E                        .byte $1f,$7e
005360  2               
005360  2  00 00                        .byte $00,$00           ; no bomb
005362  2  00 00                        .byte $00,$00
005364  2  00 00                        .byte $00,$00
005366  2  00 00                        .byte $00,$00
005368  2  00 00                        .byte $00,$00
00536A  2  7F 7F                        .byte $7f,$7f
00536C  2  7F 7F                        .byte $7f,$7f
00536E  2  7F 7F                        .byte $7f,$7f
005370  2  7F 7F                        .byte $7f,$7f
005372  2  7F 7F                        .byte $7f,$7f
005374  2  7F 7F                        .byte $7f,$7f
005376  2  7F 7F                        .byte $7f,$7f
005378  2               
005378  2  xx xx xx xx                  .align 256
00537C  2  xx xx xx xx  
005380  2  xx xx xx xx  
005400  2               bombs_l_even
005400  2  2A 55        bomb_lx_even    .byte $2a,$55
005402  2  2A 55                        .byte $2a,$55
005404  2  2A 55                        .byte $2a,$55
005406  2  2A 55                        .byte $2a,$55
005408  2               
005408  2  2A 55                        .byte $2a,$55
00540A  2  2A 55                        .byte $2a,$55
00540C  2  2A 55                        .byte $2a,$55
00540E  2  2A 55                        .byte $2a,$55
005410  2  2A 55                        .byte $2a,$55
005412  2  2A 55                        .byte $2a,$55
005414  2  2A 55                        .byte $2a,$55
005416  2  2A 55                        .byte $2a,$55
005418  2  2A 55                        .byte $2a,$55
00541A  2  2A 55                        .byte $2a,$55
00541C  2  2A 55                        .byte $2a,$55
00541E  2  2A 55                        .byte $2a,$55
005420  2  2A 55                        .byte $2a,$55
005422  2  2A 55                        .byte $2a,$55
005424  2               
005424  2  2A 55        bomb_l0_even    .byte $2a,$55
005426  2  2A 55                        .byte $2a,$55
005428  2  2A 55                        .byte $2a,$55
00542A  2  2A 55                        .byte $2a,$55
00542C  2               
00542C  2  2A 55                        .byte $2a,$55
00542E  2  2A 55                        .byte $2a,$55
005430  2  3A 55                        .byte $3a,$55
005432  2  6A 55                        .byte $6a,$55
005434  2  2A 57                        .byte $2a,$57
005436  2  2A 57                        .byte $2a,$57
005438  2  6A 55                        .byte $6a,$55
00543A  2  0A 50                        .byte $0a,$50
00543C  2  02 40                        .byte $02,$40
00543E  2  7A 5F                        .byte $7a,$5f
005440  2  7A 5F                        .byte $7a,$5f
005442  2  02 40                        .byte $02,$40
005444  2  0A 50                        .byte $0a,$50
005446  2  2A 54                        .byte $2a,$54
005448  2               
005448  2  2A 55        bomb_l1_even    .byte $2a,$55
00544A  2  2A 55                        .byte $2a,$55
00544C  2  2A 55                        .byte $2a,$55
00544E  2  2A 55                        .byte $2a,$55
005450  2               
005450  2  2A 55                        .byte $2a,$55
005452  2  3A 55                        .byte $3a,$55
005454  2  3A 55                        .byte $3a,$55
005456  2  6A 55                        .byte $6a,$55
005458  2  2A 57                        .byte $2a,$57
00545A  2  2A 57                        .byte $2a,$57
00545C  2  6A 55                        .byte $6a,$55
00545E  2  0A 50                        .byte $0a,$50
005460  2  02 40                        .byte $02,$40
005462  2  7A 5F                        .byte $7a,$5f
005464  2  7A 5F                        .byte $7a,$5f
005466  2  02 40                        .byte $02,$40
005468  2  0A 50                        .byte $0a,$50
00546A  2  2A 54                        .byte $2a,$54
00546C  2               
00546C  2  2A 55        bomb_l2_even    .byte $2a,$55
00546E  2  2A 55                        .byte $2a,$55
005470  2  2A 55                        .byte $2a,$55
005472  2  2A 55                        .byte $2a,$55
005474  2               
005474  2  6A 55                        .byte $6a,$55
005476  2  AB 55                        .byte $ab,$55
005478  2  AA 55                        .byte $aa,$55
00547A  2  6A 55                        .byte $6a,$55
00547C  2  2A 57                        .byte $2a,$57
00547E  2  2A 57                        .byte $2a,$57
005480  2  6A 55                        .byte $6a,$55
005482  2  0A 50                        .byte $0a,$50
005484  2  02 40                        .byte $02,$40
005486  2  7A 5F                        .byte $7a,$5f
005488  2  7A 5F                        .byte $7a,$5f
00548A  2  02 40                        .byte $02,$40
00548C  2  0A 50                        .byte $0a,$50
00548E  2  2A 54                        .byte $2a,$54
005490  2               
005490  2  2A 55        bomb_l3_even    .byte $2a,$55
005492  2  2A 55                        .byte $2a,$55
005494  2  2A 55                        .byte $2a,$55
005496  2  2A 55                        .byte $2a,$55
005498  2               
005498  2  BB 55                        .byte $bb,$55
00549A  2  BA 55                        .byte $ba,$55
00549C  2  AA 55                        .byte $aa,$55
00549E  2  EB 55                        .byte $eb,$55
0054A0  2  6A 55                        .byte $6a,$55
0054A2  2  2A 57                        .byte $2a,$57
0054A4  2  6A 55                        .byte $6a,$55
0054A6  2  0A 50                        .byte $0a,$50
0054A8  2  02 40                        .byte $02,$40
0054AA  2  7A 5F                        .byte $7a,$5f
0054AC  2  7A 5F                        .byte $7a,$5f
0054AE  2  02 40                        .byte $02,$40
0054B0  2  0A 50                        .byte $0a,$50
0054B2  2  2A 54                        .byte $2a,$54
0054B4  2               
0054B4  2  2A 55                        .byte $2a,$55
0054B6  2  2A 55                        .byte $2a,$55
0054B8  2  2A 55                        .byte $2a,$55
0054BA  2  2A 55                        .byte $2a,$55
0054BC  2               
0054BC  2  xx xx xx xx                  .align 256
0054C0  2  xx xx xx xx  
0054C4  2  xx xx xx xx  
005500  2               bombs_r_even
005500  2  2A 55        bomb_rx_even    .byte $2a,$55
005502  2  2A 55                        .byte $2a,$55
005504  2  2A 55                        .byte $2a,$55
005506  2  2A 55                        .byte $2a,$55
005508  2               
005508  2  2A 55                        .byte $2a,$55
00550A  2  2A 55                        .byte $2a,$55
00550C  2  2A 55                        .byte $2a,$55
00550E  2  2A 55                        .byte $2a,$55
005510  2  2A 55                        .byte $2a,$55
005512  2  2A 55                        .byte $2a,$55
005514  2  2A 55                        .byte $2a,$55
005516  2  2A 55                        .byte $2a,$55
005518  2  2A 55                        .byte $2a,$55
00551A  2  2A 55                        .byte $2a,$55
00551C  2  2A 55                        .byte $2a,$55
00551E  2  2A 55                        .byte $2a,$55
005520  2  2A 55                        .byte $2a,$55
005522  2  2A 55                        .byte $2a,$55
005524  2               
005524  2  2A 55        bomb_r0_even    .byte $2a,$55
005526  2  2A 55                        .byte $2a,$55
005528  2  2A 55                        .byte $2a,$55
00552A  2  2A 55                        .byte $2a,$55
00552C  2               
00552C  2  2A 55                        .byte $2a,$55
00552E  2  2A 55                        .byte $2a,$55
005530  2  2A 5D                        .byte $2a,$5d
005532  2  2A 57                        .byte $2a,$57
005534  2  6A 55                        .byte $6a,$55
005536  2  6A 55                        .byte $6a,$55
005538  2  2A 57                        .byte $2a,$57
00553A  2  0A 50                        .byte $0a,$50
00553C  2  02 40                        .byte $02,$40
00553E  2  7A 5F                        .byte $7a,$5f
005540  2  7A 5F                        .byte $7a,$5f
005542  2  02 40                        .byte $02,$40
005544  2  0A 50                        .byte $0a,$50
005546  2  2A 54                        .byte $2a,$54
005548  2               
005548  2  2A 55        bomb_r1_even    .byte $2a,$55
00554A  2  2A 55                        .byte $2a,$55
00554C  2  2A 55                        .byte $2a,$55
00554E  2  2A 55                        .byte $2a,$55
005550  2               
005550  2  2A 55                        .byte $2a,$55
005552  2  2A 5D                        .byte $2a,$5d
005554  2  2A 5D                        .byte $2a,$5d
005556  2  2A 57                        .byte $2a,$57
005558  2  6A 55                        .byte $6a,$55
00555A  2  6A 55                        .byte $6a,$55
00555C  2  2A 57                        .byte $2a,$57
00555E  2  0A 50                        .byte $0a,$50
005560  2  02 40                        .byte $02,$40
005562  2  7A 5F                        .byte $7a,$5f
005564  2  7A 5F                        .byte $7a,$5f
005566  2  02 40                        .byte $02,$40
005568  2  0A 50                        .byte $0a,$50
00556A  2  2A 54                        .byte $2a,$54
00556C  2               
00556C  2  2A 55        bomb_r2_even    .byte $2a,$55
00556E  2  2A 55                        .byte $2a,$55
005570  2  2A 55                        .byte $2a,$55
005572  2  2A 55                        .byte $2a,$55
005574  2               
005574  2  2A 57                        .byte $2a,$57
005576  2  2A F5                        .byte $2a,$f5
005578  2  2A D5                        .byte $2a,$d5
00557A  2  2A 57                        .byte $2a,$57
00557C  2  6A 55                        .byte $6a,$55
00557E  2  6A 55                        .byte $6a,$55
005580  2  2A 57                        .byte $2a,$57
005582  2  0A 50                        .byte $0a,$50
005584  2  02 40                        .byte $02,$40
005586  2  7A 5F                        .byte $7a,$5f
005588  2  7A 5F                        .byte $7a,$5f
00558A  2  02 40                        .byte $02,$40
00558C  2  0A 50                        .byte $0a,$50
00558E  2  2A 54                        .byte $2a,$54
005590  2               
005590  2  2A 55        bomb_r3_even    .byte $2a,$55
005592  2  2A 55                        .byte $2a,$55
005594  2  2A 55                        .byte $2a,$55
005596  2  2A 55                        .byte $2a,$55
005598  2               
005598  2  2A F7                        .byte $2a,$f7
00559A  2  2A DD                        .byte $2a,$dd
00559C  2  2A D5                        .byte $2a,$d5
00559E  2  2A D7                        .byte $2a,$d7
0055A0  2  2A 57                        .byte $2a,$57
0055A2  2  6A 55                        .byte $6a,$55
0055A4  2  2A 57                        .byte $2a,$57
0055A6  2  0A 50                        .byte $0a,$50
0055A8  2  02 40                        .byte $02,$40
0055AA  2  7A 5F                        .byte $7a,$5f
0055AC  2  7A 5F                        .byte $7a,$5f
0055AE  2  02 40                        .byte $02,$40
0055B0  2  0A 50                        .byte $0a,$50
0055B2  2  2A 54                        .byte $2a,$54
0055B4  2               
0055B4  2  2A 55                        .byte $2a,$55
0055B6  2  2A 55                        .byte $2a,$55
0055B8  2  2A 55                        .byte $2a,$55
0055BA  2  2A 55                        .byte $2a,$55
0055BC  2               
0055BC  2  xx xx xx xx                  .align 256
0055C0  2  xx xx xx xx  
0055C4  2  xx xx xx xx  
005600  2               bombs_l_odd
005600  2  55 2A        bomb_lx_odd     .byte $55,$2a
005602  2  55 2A                        .byte $55,$2a
005604  2  55 2A                        .byte $55,$2a
005606  2  55 2A                        .byte $55,$2a
005608  2               
005608  2  55 2A                        .byte $55,$2a
00560A  2  55 2A                        .byte $55,$2a
00560C  2  55 2A                        .byte $55,$2a
00560E  2  55 2A                        .byte $55,$2a
005610  2  55 2A                        .byte $55,$2a
005612  2  55 2A                        .byte $55,$2a
005614  2  55 2A                        .byte $55,$2a
005616  2  55 2A                        .byte $55,$2a
005618  2  55 2A                        .byte $55,$2a
00561A  2  55 2A                        .byte $55,$2a
00561C  2  55 2A                        .byte $55,$2a
00561E  2  55 2A                        .byte $55,$2a
005620  2  55 2A                        .byte $55,$2a
005622  2  55 2A                        .byte $55,$2a
005624  2               
005624  2  55 2A        bomb_l0_odd     .byte $55,$2a
005626  2  55 2A                        .byte $55,$2a
005628  2  55 2A                        .byte $55,$2a
00562A  2  55 2A                        .byte $55,$2a
00562C  2               
00562C  2  55 2A                        .byte $55,$2a
00562E  2  55 2A                        .byte $55,$2a
005630  2  5D 2A                        .byte $5d,$2a
005632  2  75 2A                        .byte $75,$2a
005634  2  55 2B                        .byte $55,$2b
005636  2  55 2B                        .byte $55,$2b
005638  2  75 2A                        .byte $75,$2a
00563A  2  05 28                        .byte $05,$28
00563C  2  01 20                        .byte $01,$20
00563E  2  7D 2F                        .byte $7d,$2f
005640  2  7D 2F                        .byte $7d,$2f
005642  2  01 20                        .byte $01,$20
005644  2  05 28                        .byte $05,$28
005646  2  15 2A                        .byte $15,$2a
005648  2               
005648  2  55 2A        bomb_l1_odd     .byte $55,$2a
00564A  2  55 2A                        .byte $55,$2a
00564C  2  55 2A                        .byte $55,$2a
00564E  2  55 2A                        .byte $55,$2a
005650  2               
005650  2  55 2A                        .byte $55,$2a
005652  2  5D 2A                        .byte $5d,$2a
005654  2  5D 2A                        .byte $5d,$2a
005656  2  75 2A                        .byte $75,$2a
005658  2  55 2B                        .byte $55,$2b
00565A  2  55 2B                        .byte $55,$2b
00565C  2  75 2A                        .byte $75,$2a
00565E  2  05 28                        .byte $05,$28
005660  2  01 20                        .byte $01,$20
005662  2  7D 2F                        .byte $7d,$2f
005664  2  7D 2F                        .byte $7d,$2f
005666  2  01 20                        .byte $01,$20
005668  2  05 28                        .byte $05,$28
00566A  2  15 2A                        .byte $15,$2a
00566C  2               
00566C  2  55 2A        bomb_l2_odd     .byte $55,$2a
00566E  2  55 2A                        .byte $55,$2a
005670  2  55 2A                        .byte $55,$2a
005672  2  55 2A                        .byte $55,$2a
005674  2               
005674  2  75 2A                        .byte $75,$2a
005676  2  D7 2A                        .byte $d7,$2a
005678  2  D5 2A                        .byte $d5,$2a
00567A  2  75 2A                        .byte $75,$2a
00567C  2  55 2B                        .byte $55,$2b
00567E  2  55 2B                        .byte $55,$2b
005680  2  75 2A                        .byte $75,$2a
005682  2  05 28                        .byte $05,$28
005684  2  01 20                        .byte $01,$20
005686  2  7D 2F                        .byte $7d,$2f
005688  2  7D 2F                        .byte $7d,$2f
00568A  2  01 20                        .byte $01,$20
00568C  2  05 28                        .byte $05,$28
00568E  2  15 2A                        .byte $15,$2a
005690  2               
005690  2  55 2A        bomb_l3_odd     .byte $55,$2a
005692  2  55 2A                        .byte $55,$2a
005694  2  55 2A                        .byte $55,$2a
005696  2  55 2A                        .byte $55,$2a
005698  2               
005698  2  F7 2A                        .byte $f7,$2a
00569A  2  F5 2A                        .byte $f5,$2a
00569C  2  D5 2A                        .byte $d5,$2a
00569E  2  D7 2A                        .byte $d7,$2a
0056A0  2  75 2A                        .byte $75,$2a
0056A2  2  55 2B                        .byte $55,$2b
0056A4  2  75 2A                        .byte $75,$2a
0056A6  2  05 28                        .byte $05,$28
0056A8  2  01 20                        .byte $01,$20
0056AA  2  7D 2F                        .byte $7d,$2f
0056AC  2  7D 2F                        .byte $7d,$2f
0056AE  2  01 20                        .byte $01,$20
0056B0  2  05 28                        .byte $05,$28
0056B2  2  15 2A                        .byte $15,$2a
0056B4  2               
0056B4  2  55 2A                        .byte $55,$2a
0056B6  2  55 2A                        .byte $55,$2a
0056B8  2  55 2A                        .byte $55,$2a
0056BA  2  55 2A                        .byte $55,$2a
0056BC  2               
0056BC  2  xx xx xx xx                  .align 256
0056C0  2  xx xx xx xx  
0056C4  2  xx xx xx xx  
005700  2               bombs_r_odd
005700  2  55 2A        bomb_rx_odd     .byte $55,$2a
005702  2  55 2A                        .byte $55,$2a
005704  2  55 2A                        .byte $55,$2a
005706  2  55 2A                        .byte $55,$2a
005708  2               
005708  2  55 2A                        .byte $55,$2a
00570A  2  55 2A                        .byte $55,$2a
00570C  2  55 2A                        .byte $55,$2a
00570E  2  55 2A                        .byte $55,$2a
005710  2  55 2A                        .byte $55,$2a
005712  2  55 2A                        .byte $55,$2a
005714  2  55 2A                        .byte $55,$2a
005716  2  55 2A                        .byte $55,$2a
005718  2  55 2A                        .byte $55,$2a
00571A  2  55 2A                        .byte $55,$2a
00571C  2  55 2A                        .byte $55,$2a
00571E  2  55 2A                        .byte $55,$2a
005720  2  55 2A                        .byte $55,$2a
005722  2  55 2A                        .byte $55,$2a
005724  2               
005724  2  55 2A        bomb_r0_odd     .byte $55,$2a
005726  2  55 2A                        .byte $55,$2a
005728  2  55 2A                        .byte $55,$2a
00572A  2  55 2A                        .byte $55,$2a
00572C  2               
00572C  2  55 2A                        .byte $55,$2a
00572E  2  55 2A                        .byte $55,$2a
005730  2  55 2E                        .byte $55,$2e
005732  2  55 2B                        .byte $55,$2b
005734  2  75 2A                        .byte $75,$2a
005736  2  75 2A                        .byte $75,$2a
005738  2  55 2B                        .byte $55,$2b
00573A  2  05 28                        .byte $05,$28
00573C  2  01 20                        .byte $01,$20
00573E  2  7D 2F                        .byte $7d,$2f
005740  2  7D 2F                        .byte $7d,$2f
005742  2  01 20                        .byte $01,$20
005744  2  05 28                        .byte $05,$28
005746  2  15 2A                        .byte $15,$2a
005748  2               
005748  2  55 2A        bomb_r1_odd     .byte $55,$2a
00574A  2  55 2A                        .byte $55,$2a
00574C  2  55 2A                        .byte $55,$2a
00574E  2  55 2A                        .byte $55,$2a
005750  2               
005750  2  55 2A                        .byte $55,$2a
005752  2  55 2E                        .byte $55,$2e
005754  2  55 2E                        .byte $55,$2e
005756  2  55 2B                        .byte $55,$2b
005758  2  75 2A                        .byte $75,$2a
00575A  2  75 2A                        .byte $75,$2a
00575C  2  55 2B                        .byte $55,$2b
00575E  2  05 28                        .byte $05,$28
005760  2  01 20                        .byte $01,$20
005762  2  7D 2F                        .byte $7d,$2f
005764  2  7D 2F                        .byte $7d,$2f
005766  2  01 20                        .byte $01,$20
005768  2  05 28                        .byte $05,$28
00576A  2  15 2A                        .byte $15,$2a
00576C  2               
00576C  2  55 2A        bomb_r2_odd     .byte $55,$2a
00576E  2  55 2A                        .byte $55,$2a
005770  2  55 2A                        .byte $55,$2a
005772  2  55 2A                        .byte $55,$2a
005774  2               
005774  2  55 2B                        .byte $55,$2b
005776  2  55 BA                        .byte $55,$ba
005778  2  55 AA                        .byte $55,$aa
00577A  2  55 2B                        .byte $55,$2b
00577C  2  75 2A                        .byte $75,$2a
00577E  2  75 2A                        .byte $75,$2a
005780  2  55 2B                        .byte $55,$2b
005782  2  05 28                        .byte $05,$28
005784  2  01 20                        .byte $01,$20
005786  2  7D 2F                        .byte $7d,$2f
005788  2  7D 2F                        .byte $7d,$2f
00578A  2  01 20                        .byte $01,$20
00578C  2  05 28                        .byte $05,$28
00578E  2  15 2A                        .byte $15,$2a
005790  2               
005790  2  55 2A        bomb_r3_odd     .byte $55,$2a
005792  2  55 2A                        .byte $55,$2a
005794  2  55 2A                        .byte $55,$2a
005796  2  55 2A                        .byte $55,$2a
005798  2               
005798  2  55 BB                        .byte $55,$bb
00579A  2  55 AB                        .byte $55,$ab
00579C  2  55 AA                        .byte $55,$aa
00579E  2  55 BA                        .byte $55,$ba
0057A0  2  55 2B                        .byte $55,$2b
0057A2  2  75 2A                        .byte $75,$2a
0057A4  2  55 2B                        .byte $55,$2b
0057A6  2  05 28                        .byte $05,$28
0057A8  2  01 20                        .byte $01,$20
0057AA  2  7D 2F                        .byte $7d,$2f
0057AC  2  7D 2F                        .byte $7d,$2f
0057AE  2  01 20                        .byte $01,$20
0057B0  2  05 28                        .byte $05,$28
0057B2  2  15 2A                        .byte $15,$2a
0057B4  2               
0057B4  2  55 2A                        .byte $55,$2a
0057B6  2  55 2A                        .byte $55,$2a
0057B8  2  55 2A                        .byte $55,$2a
0057BA  2  55 2A                        .byte $55,$2a
0057BC  2               
0057BC  2  EC 5A        explode_table   .word explode_xx_even
0057BE  2  6C 58                        .word explode_0p_even
0057C0  2  EC 57                        .word explode_0w_even
0057C2  2  6C 58                        .word explode_0p_even
0057C4  2               
0057C4  2  EC 58                        .word explode_1w_even
0057C6  2  6C 59                        .word explode_1p_even
0057C8  2  EC 58                        .word explode_1w_even
0057CA  2  6C 59                        .word explode_1p_even
0057CC  2               
0057CC  2  EC 59                        .word explode_2w_even
0057CE  2  6C 5A                        .word explode_2p_even
0057D0  2  EC 59                        .word explode_2w_even
0057D2  2  6C 5A                        .word explode_2p_even
0057D4  2               
0057D4  2  2C 5B                        .word explode_xx_odd
0057D6  2  AC 58                        .word explode_0p_odd
0057D8  2  2C 58                        .word explode_0w_odd
0057DA  2  AC 58                        .word explode_0p_odd
0057DC  2               
0057DC  2  2C 59                        .word explode_1w_odd
0057DE  2  AC 59                        .word explode_1p_odd
0057E0  2  2C 59                        .word explode_1w_odd
0057E2  2  AC 59                        .word explode_1p_odd
0057E4  2               
0057E4  2  2C 5A                        .word explode_2w_odd
0057E6  2  AC 5A                        .word explode_2p_odd
0057E8  2  2C 5A                        .word explode_2w_odd
0057EA  2  AC 5A                        .word explode_2p_odd
0057EC  2               
0057EC  2  2A 55 2E 55  explode_0w_even .byte $2a,$55,$2e,$55
0057F0  2  6A 5D 2A 55                  .byte $6a,$5d,$2a,$55
0057F4  2  2A 75 3A 55                  .byte $2a,$75,$3a,$55
0057F8  2  2A 75 2E 55                  .byte $2a,$75,$2e,$55
0057FC  2  6A 75 2F 55                  .byte $6a,$75,$2f,$55
005800  2  2A 77 6B 55                  .byte $2a,$77,$6b,$55
005804  2  2A 7F 2F 55                  .byte $2a,$7f,$2f,$55
005808  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
00580C  2  6A 7D 2B 55                  .byte $6a,$7d,$2b,$55
005810  2  2A 75 6F 55                  .byte $2a,$75,$6f,$55
005814  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
005818  2  2A 7F 2F 55                  .byte $2a,$7f,$2f,$55
00581C  2  2A 77 3B 55                  .byte $2a,$77,$3b,$55
005820  2  6A 75 6A 55                  .byte $6a,$75,$6a,$55
005824  2  2A 75 2E 55                  .byte $2a,$75,$2e,$55
005828  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
00582C  2               
00582C  2  55 2A 5D 2A  explode_0w_odd  .byte $55,$2a,$5d,$2a
005830  2  55 3B 55 2A                  .byte $55,$3b,$55,$2a
005834  2  55 6A 75 2A                  .byte $55,$6a,$75,$2a
005838  2  55 6A 5D 2A                  .byte $55,$6a,$5d,$2a
00583C  2  55 6B 5F 2A                  .byte $55,$6b,$5f,$2a
005840  2  55 6E 57 2B                  .byte $55,$6e,$57,$2b
005844  2  55 7E 5F 2A                  .byte $55,$7e,$5f,$2a
005848  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
00584C  2  55 7B 57 2A                  .byte $55,$7b,$57,$2a
005850  2  55 6A 5F 2B                  .byte $55,$6a,$5f,$2b
005854  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
005858  2  55 7E 5F 2A                  .byte $55,$7e,$5f,$2a
00585C  2  55 6E 77 2A                  .byte $55,$6e,$77,$2a
005860  2  55 6B 55 2B                  .byte $55,$6b,$55,$2b
005864  2  55 6A 5D 2A                  .byte $55,$6a,$5d,$2a
005868  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
00586C  2               
00586C  2  2A 55 24 55  explode_0p_even .byte $2a,$55,$24,$55
005870  2  4A 48 2A 55                  .byte $4a,$48,$2a,$55
005874  2  2A 25 12 55                  .byte $2a,$25,$12,$55
005878  2  2A 25 24 55                  .byte $2a,$25,$24,$55
00587C  2  4A 24 25 55                  .byte $4a,$24,$25,$55
005880  2  2A 22 49 54                  .byte $2a,$22,$49,$54
005884  2  2A 2A 25 55                  .byte $2a,$2a,$25,$55
005888  2  2A 29 25 55                  .byte $2a,$29,$25,$55
00588C  2  4A 28 29 55                  .byte $4a,$28,$29,$55
005890  2  2A 25 45 54                  .byte $2a,$25,$45,$54
005894  2  2A 29 25 55                  .byte $2a,$29,$25,$55
005898  2  2A 2A 25 55                  .byte $2a,$2a,$25,$55
00589C  2  2A 22 11 55                  .byte $2a,$22,$11,$55
0058A0  2  4A 24 4A 54                  .byte $4a,$24,$4a,$54
0058A4  2  2A 25 24 55                  .byte $2a,$25,$24,$55
0058A8  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0058AC  2               
0058AC  2  55 2A 49 2A  explode_0p_odd  .byte $55,$2a,$49,$2a
0058B0  2  15 11 55 2A                  .byte $15,$11,$55,$2a
0058B4  2  55 4A 24 2A                  .byte $55,$4a,$24,$2a
0058B8  2  55 4A 48 2A                  .byte $55,$4a,$48,$2a
0058BC  2  15 49 4A 2A                  .byte $15,$49,$4a,$2a
0058C0  2  55 44 12 29                  .byte $55,$44,$12,$29
0058C4  2  55 54 4A 2A                  .byte $55,$54,$4a,$2a
0058C8  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
0058CC  2  15 51 52 2A                  .byte $15,$51,$52,$2a
0058D0  2  55 4A 0A 29                  .byte $55,$4a,$0a,$29
0058D4  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
0058D8  2  55 54 4A 2A                  .byte $55,$54,$4a,$2a
0058DC  2  55 44 22 2A                  .byte $55,$44,$22,$2a
0058E0  2  15 49 14 29                  .byte $15,$49,$14,$29
0058E4  2  55 4A 48 2A                  .byte $55,$4a,$48,$2a
0058E8  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
0058EC  2               
0058EC  2  2A 55 2A 55  explode_1w_even .byte $2a,$55,$2a,$55
0058F0  2  2A 55 3A 55                  .byte $2a,$55,$3a,$55
0058F4  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0058F8  2  2A 77 2E 55                  .byte $2a,$77,$2e,$55
0058FC  2  2A 75 2F 55                  .byte $2a,$75,$2f,$55
005900  2  2A 77 2B 55                  .byte $2a,$77,$2b,$55
005904  2  2A 7F 2F 55                  .byte $2a,$7f,$2f,$55
005908  2  2A 7F 2F 55                  .byte $2a,$7f,$2f,$55
00590C  2  2A 7D 2B 55                  .byte $2a,$7d,$2b,$55
005910  2  2A 75 2F 55                  .byte $2a,$75,$2f,$55
005914  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
005918  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
00591C  2  2A 75 2B 55                  .byte $2a,$75,$2b,$55
005920  2  2A 77 2F 55                  .byte $2a,$77,$2f,$55
005924  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005928  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
00592C  2               
00592C  2  55 2A 55 2A  explode_1w_odd  .byte $55,$2a,$55,$2a
005930  2  55 2A 75 2A                  .byte $55,$2a,$75,$2a
005934  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005938  2  55 6E 5D 2A                  .byte $55,$6e,$5d,$2a
00593C  2  55 6A 5F 2A                  .byte $55,$6a,$5f,$2a
005940  2  55 6E 57 2A                  .byte $55,$6e,$57,$2a
005944  2  55 7E 5F 2A                  .byte $55,$7e,$5f,$2a
005948  2  55 7E 5F 2A                  .byte $55,$7e,$5f,$2a
00594C  2  55 7A 57 2A                  .byte $55,$7a,$57,$2a
005950  2  55 6A 5F 2A                  .byte $55,$6a,$5f,$2a
005954  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
005958  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
00595C  2  55 6A 57 2A                  .byte $55,$6a,$57,$2a
005960  2  55 6E 5F 2A                  .byte $55,$6e,$5f,$2a
005964  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005968  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
00596C  2               
00596C  2  2A 55 2A 55  explode_1p_even .byte $2a,$55,$2a,$55
005970  2  2A 55 12 55                  .byte $2a,$55,$12,$55
005974  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005978  2  2A 22 24 55                  .byte $2a,$22,$24,$55
00597C  2  2A 25 25 55                  .byte $2a,$25,$25,$55
005980  2  2A 22 29 55                  .byte $2a,$22,$29,$55
005984  2  2A 2A 25 55                  .byte $2a,$2a,$25,$55
005988  2  2A 2A 25 55                  .byte $2a,$2a,$25,$55
00598C  2  2A 29 29 55                  .byte $2a,$29,$29,$55
005990  2  2A 25 25 55                  .byte $2a,$25,$25,$55
005994  2  2A 29 25 55                  .byte $2a,$29,$25,$55
005998  2  2A 29 25 55                  .byte $2a,$29,$25,$55
00599C  2  2A 25 29 55                  .byte $2a,$25,$29,$55
0059A0  2  2A 22 25 55                  .byte $2a,$22,$25,$55
0059A4  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0059A8  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0059AC  2               
0059AC  2  55 2A 55 2A  explode_1p_odd  .byte $55,$2a,$55,$2a
0059B0  2  55 2A 25 2A                  .byte $55,$2a,$25,$2a
0059B4  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
0059B8  2  55 44 48 2A                  .byte $55,$44,$48,$2a
0059BC  2  55 4A 4A 2A                  .byte $55,$4a,$4a,$2a
0059C0  2  55 44 52 2A                  .byte $55,$44,$52,$2a
0059C4  2  55 54 4A 2A                  .byte $55,$54,$4a,$2a
0059C8  2  55 54 4A 2A                  .byte $55,$54,$4a,$2a
0059CC  2  55 52 52 2A                  .byte $55,$52,$52,$2a
0059D0  2  55 4A 4A 2A                  .byte $55,$4a,$4a,$2a
0059D4  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
0059D8  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
0059DC  2  55 4A 52 2A                  .byte $55,$4a,$52,$2a
0059E0  2  55 44 4A 2A                  .byte $55,$44,$4a,$2a
0059E4  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
0059E8  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
0059EC  2               
0059EC  2  2A 55 2A 55  explode_2w_even .byte $2a,$55,$2a,$55
0059F0  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0059F4  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0059F8  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
0059FC  2  2A 75 2B 55                  .byte $2a,$75,$2b,$55
005A00  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
005A04  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
005A08  2  2A 75 2B 55                  .byte $2a,$75,$2b,$55
005A0C  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
005A10  2  2A 7D 2F 55                  .byte $2a,$7d,$2f,$55
005A14  2  2A 75 2B 55                  .byte $2a,$75,$2b,$55
005A18  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A1C  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A20  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A24  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A28  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A2C  2               
005A2C  2  55 2A 55 2A  explode_2w_odd  .byte $55,$2a,$55,$2a
005A30  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A34  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A38  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A3C  2  55 6A 57 2A                  .byte $55,$6a,$57,$2a
005A40  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
005A44  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
005A48  2  55 6A 57 2A                  .byte $55,$6a,$57,$2a
005A4C  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
005A50  2  55 7A 5F 2A                  .byte $55,$7a,$5f,$2a
005A54  2  55 6A 57 2A                  .byte $55,$6a,$57,$2a
005A58  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A5C  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A60  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A64  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A68  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005A6C  2               
005A6C  2  2A 55 2A 55  explode_2p_even .byte $2a,$55,$2a,$55
005A70  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A74  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A78  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A7C  2  2A 25 29 55                  .byte $2a,$25,$29,$55
005A80  2  2A 29 25 55                  .byte $2a,$29,$25,$55
005A84  2  2A 29 25 55                  .byte $2a,$29,$25,$55
005A88  2  2A 25 29 55                  .byte $2a,$25,$29,$55
005A8C  2  2A 29 25 55                  .byte $2a,$29,$25,$55
005A90  2  2A 29 25 55                  .byte $2a,$29,$25,$55
005A94  2  2A 25 29 55                  .byte $2a,$25,$29,$55
005A98  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005A9C  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AA0  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AA4  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AA8  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AAC  2               
005AAC  2  55 2A 55 2A  explode_2p_odd  .byte $55,$2a,$55,$2a
005AB0  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005AB4  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005AB8  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005ABC  2  55 4A 52 2A                  .byte $55,$4a,$52,$2a
005AC0  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
005AC4  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
005AC8  2  55 4A 52 2A                  .byte $55,$4a,$52,$2a
005ACC  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
005AD0  2  55 52 4A 2A                  .byte $55,$52,$4a,$2a
005AD4  2  55 4A 52 2A                  .byte $55,$4a,$52,$2a
005AD8  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005ADC  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005AE0  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005AE4  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005AE8  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005AEC  2               
005AEC  2  2A 55 2A 55  explode_xx_even .byte $2a,$55,$2a,$55
005AF0  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AF4  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AF8  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005AFC  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B00  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B04  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B08  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B0C  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B10  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B14  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B18  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B1C  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B20  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B24  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B28  2  2A 55 2A 55                  .byte $2a,$55,$2a,$55
005B2C  2               
005B2C  2  55 2A 55 2A  explode_xx_odd  .byte $55,$2a,$55,$2a
005B30  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B34  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B38  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B3C  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B40  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B44  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B48  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B4C  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B50  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B54  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B58  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B5C  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B60  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B64  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B68  2  55 2A 55 2A                  .byte $55,$2a,$55,$2a
005B6C  2               
005B6C  2               ; 54 cycles per line
005B6C  2               ; 19 lines
005B6C  2               ; 8 bombs
005B6C  2               ; = 8208 cycles
005B6C  2               
005B6C  2               ; 14 bytes per line
005B6C  2               ; 142 lines
005B6C  2               ; = 1988 bytes (0x7C4)
005B6C  2               
005B6C  2               ; 72 + 20 cycles per line
005B6C  2               ; 19 lines
005B6C  2               ; 8 bombs
005B6C  2               ; = 3616 cycles
005B6C  2               
005B6C  2               ; NOTE: There's very little cycle savings
005B6C  2               ;   in trimming end_line based on bomb_dy.
005B6C  2               
005B6C  2               ;               lda bomb_data,x         ; 4
005B6C  2               ;               sta bombLineN+0,y       ; 4
005B6C  2               ;               inx                     ; 2
005B6C  2               ;               lda bomb_data,x         ; 4
005B6C  2               ;               sta bombLineN+1,y       ; 4
005B6C  2               ;               inx                     ; 2
005B6C  2               ;
005B6C  2               ; 20 cycles per bomb line
005B6C  2               ; 14 bytes of code per bomb line
005B6C  2               
005B6C  2               ; generate bomb blitting code
005B6C  2  A0 00        init_bombs      ldy #0                  ; table entry 0
005B6E  2  20 7D 5B                     jsr @unroll
005B71  2  A0 08                        ldy #8                  ; table entry 1
005B73  2  20 7D 5B                     jsr @unroll
005B76  2  A0 10                        ldy #16                 ; table entry 2
005B78  2  20 7D 5B                     jsr @unroll
005B7B  2  A0 18                        ldy #24                 ; table entry 3
005B7D  2  A2 00        @unroll         ldx #0
005B7F  2  B9 28 5C     @1              lda unroll_table,y
005B82  2  95 50                        sta data_addr_l,x
005B84  2  C8                           iny
005B85  2  E8                           inx
005B86  2  E0 08                        cpx #8
005B88  2  D0 F5                        bne @1
005B8A  2               
005B8A  2  A2 2B                        ldx #bombsTop-4         ; 4 extra lines for max delta
005B8C  2  A9 00                        lda #0
005B8E  2  85 58                        sta table_index
005B90  2  A4 58        @2              ldy table_index
005B92  2  A5 52                        lda code_ptr
005B94  2  91 54                        sta (table_ptr1),y
005B96  2  A5 53                        lda code_ptr_h
005B98  2  91 56                        sta (table_ptr2),y
005B9A  2  C8                           iny
005B9B  2  84 58                        sty table_index
005B9D  2               
005B9D  2  A0 00                        ldy #0
005B9F  2  A9 BD                        lda #$bd                ; lda $ffff,x
005BA1  2  91 52                        sta (code_ptr),y
005BA3  2  C8                           iny
005BA4  2  A5 50                        lda data_addr_l
005BA6  2  91 52                        sta (code_ptr),y
005BA8  2  C8                           iny
005BA9  2  A5 51                        lda data_addr_h
005BAB  2  91 52                        sta (code_ptr),y
005BAD  2  C8                           iny
005BAE  2  A9 99                        lda #$99                ; sta $ffff,y
005BB0  2  91 52                        sta (code_ptr),y
005BB2  2  C8                           iny
005BB3  2               
005BB3  2  E0 B6                        cpx #bombsBottom
005BB5  2  90 09                        bcc @3
005BB7  2  A9 00                        lda #<clip_buffer
005BB9  2  91 52                        sta (code_ptr),y
005BBB  2  C8                           iny
005BBC  2  A9 18                        lda #>clip_buffer
005BBE  2  B0 09                        bcs @4                  ; always
005BC0  2               
005BC0  2  BD 00 79     @3              lda hires_table_lo,x
005BC3  2               ;               ora #0                  ; bombLineN+0
005BC3  2  91 52                        sta (code_ptr),y
005BC5  2  C8                           iny
005BC6  2  BD 00 7A                     lda hires_table_hi,x
005BC9  2               
005BC9  2  91 52        @4              sta (code_ptr),y
005BCB  2  C8                           iny
005BCC  2  A9 E8                        lda #$e8                ; inx
005BCE  2  91 52                        sta (code_ptr),y
005BD0  2  C8                           iny
005BD1  2  A9 BD                        lda #$bd                ; lda $ffff,x
005BD3  2  91 52                        sta (code_ptr),y
005BD5  2  C8                           iny
005BD6  2  A5 50                        lda data_addr_l
005BD8  2  91 52                        sta (code_ptr),y
005BDA  2  C8                           iny
005BDB  2  A5 51                        lda data_addr_h
005BDD  2  91 52                        sta (code_ptr),y
005BDF  2  C8                           iny
005BE0  2  A9 99                        lda #$99                ; sta $ffff,y
005BE2  2  91 52                        sta (code_ptr),y
005BE4  2  C8                           iny
005BE5  2               
005BE5  2  E0 B6                        cpx #bombsBottom
005BE7  2  90 09                        bcc @5
005BE9  2  A9 00                        lda #<clip_buffer
005BEB  2  91 52                        sta (code_ptr),y
005BED  2  C8                           iny
005BEE  2  A9 18                        lda #>clip_buffer
005BF0  2  B0 0B                        bcs @6                  ; always
005BF2  2               
005BF2  2  BD 00 79     @5              lda hires_table_lo,x
005BF5  2  09 01                        ora #1                  ; bombLineN+1
005BF7  2  91 52                        sta (code_ptr),y
005BF9  2  C8                           iny
005BFA  2  BD 00 7A                     lda hires_table_hi,x
005BFD  2               
005BFD  2  91 52        @6              sta (code_ptr),y
005BFF  2  C8                           iny
005C00  2  A9 E8                        lda #$e8                ; inx
005C02  2  91 52                        sta (code_ptr),y
005C04  2  C8                           iny
005C05  2  98                           tya
005C06  2  18                           clc
005C07  2  65 52                        adc code_ptr
005C09  2  85 52                        sta code_ptr
005C0B  2  90 02                        bcc @7
005C0D  2  E6 53                        inc code_ptr_h
005C0F  2  E8           @7              inx
005C10  2  E0 BD                        cpx #bombsBottom+7
005C12  2  F0 03                        beq @8
005C14  2  4C 90 5B                     jmp @2
005C17  2               
005C17  2               ; write final rts and terminating table entry
005C17  2  A0 00        @8              ldy #0
005C19  2  A9 60                        lda #$60                ; rts
005C1B  2  91 52                        sta (code_ptr),y
005C1D  2  A4 58                        ldy table_index
005C1F  2  A5 52                        lda code_ptr
005C21  2  91 54                        sta (table_ptr1),y
005C23  2  A5 53                        lda code_ptr_h
005C25  2  91 56                        sta (table_ptr2),y
005C27  2  60                           rts
005C28  2               
005C28  2  00 54 00 80  unroll_table    .word bombs_l_even,code_buffer0,table_buffer0_lo,table_buffer0_hi
005C2C  2  00 10 00 14  
005C30  2  00 55 00 88                  .word bombs_r_even,code_buffer1,table_buffer1_lo,table_buffer1_hi
005C34  2  00 11 00 15  
005C38  2  00 56 00 90                  .word bombs_l_odd, code_buffer2,table_buffer2_lo,table_buffer2_hi
005C3C  2  00 12 00 16  
005C40  2  00 57 00 98                  .word bombs_r_odd, code_buffer3,table_buffer3_lo,table_buffer3_hi
005C44  2  00 13 00 17  
005C48  2               
005C48  2               
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................................		; bomb 0
005C48  2               
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................................		; bomb 1
005C48  2               
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %........########................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................................		; bomb 2
005C48  2               
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %....########....................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %........####....................
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %................####............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %............####................
005C48  2                               ; .byte %................................		; bomb 3
005C48  2               
005C48  2                               ; .byte %....................####........
005C48  2                               ; .byte %####....####....................
005C48  2                               ; .byte %............####........####....
005C48  2                               ; .byte %............####....####........
005C48  2                               ; .byte %####........############........
005C48  2                               ; .byte %....####....########........####
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %####....############............
005C48  2                               ; .byte %............############....####
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %....####....########....####....
005C48  2                               ; .byte %####........####............####
005C48  2                               ; .byte %............####....####........
005C48  2                               ; .byte %................................		; explode 0
005C48  2               
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %........................####....
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %....####....####....####........
005C48  2                               ; .byte %............############........
005C48  2                               ; .byte %....####....########............
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %....####################........
005C48  2                               ; .byte %........############............
005C48  2                               ; .byte %............############........
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %............########............
005C48  2                               ; .byte %....####....############........
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................		; explode 1
005C48  2               
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %............########............
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %............########............
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %........################........
005C48  2                               ; .byte %............########............
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................
005C48  2                               ; .byte %................................		; explode 2
005C48  2               
005C48  1                               .include "buckets.s"
005C48  2               splash_top_line0   =   hiresLine133
005C48  2               splash_top_line1   =   hiresLine134
005C48  2               splash_top_line2   =   hiresLine135
005C48  2               splash_top_line3   =   hiresLine136
005C48  2               splash_top_line4   =   hiresLine137
005C48  2               splash_top_line5   =   hiresLine138
005C48  2               splash_top_line6   =   hiresLine139
005C48  2               splash_top_line7   =   hiresLine140
005C48  2               
005C48  2               bucket_top_line0   =   hiresLine141
005C48  2               bucket_top_line1   =   hiresLine142
005C48  2               bucket_top_line2   =   hiresLine143
005C48  2               bucket_top_line3   =   hiresLine144
005C48  2               bucket_top_line4   =   hiresLine145
005C48  2               bucket_top_line5   =   hiresLine146
005C48  2               bucket_top_line6   =   hiresLine147
005C48  2               bucket_top_line7   =   hiresLine148
005C48  2               
005C48  2               splash_mid_line0   =   hiresLine149
005C48  2               splash_mid_line1   =   hiresLine150
005C48  2               splash_mid_line2   =   hiresLine151
005C48  2               splash_mid_line3   =   hiresLine152
005C48  2               splash_mid_line4   =   hiresLine153
005C48  2               splash_mid_line5   =   hiresLine154
005C48  2               splash_mid_line6   =   hiresLine155
005C48  2               splash_mid_line7   =   hiresLine156
005C48  2               
005C48  2               bucket_mid_line0   =   hiresLine157
005C48  2               bucket_mid_line1   =   hiresLine158
005C48  2               bucket_mid_line2   =   hiresLine159
005C48  2               bucket_mid_line3   =   hiresLine160
005C48  2               bucket_mid_line4   =   hiresLine161
005C48  2               bucket_mid_line5   =   hiresLine162
005C48  2               bucket_mid_line6   =   hiresLine163
005C48  2               bucket_mid_line7   =   hiresLine164
005C48  2               
005C48  2               splash_bot_line0   =   hiresLine165
005C48  2               splash_bot_line1   =   hiresLine166
005C48  2               splash_bot_line2   =   hiresLine167
005C48  2               splash_bot_line3   =   hiresLine168
005C48  2               splash_bot_line4   =   hiresLine169
005C48  2               splash_bot_line5   =   hiresLine170
005C48  2               splash_bot_line6   =   hiresLine171
005C48  2               splash_bot_line7   =   hiresLine172
005C48  2               
005C48  2               bucket_bot_line0   =   hiresLine173
005C48  2               bucket_bot_line1   =   hiresLine174
005C48  2               bucket_bot_line2   =   hiresLine175
005C48  2               bucket_bot_line3   =   hiresLine176
005C48  2               bucket_bot_line4   =   hiresLine177
005C48  2               bucket_bot_line5   =   hiresLine178
005C48  2               bucket_bot_line6   =   hiresLine179
005C48  2               bucket_bot_line7   =   hiresLine180
005C48  2               
005C48  2               ;
005C48  2               ; On entry:
005C48  2               ;   bucket_xcol and bucket_xshift setup based on buckets_x * 2
005C48  2               ;
005C48  2  A4 9C        draw_buckets    ldy splash_bucket
005C4A  2  A6 AF                        ldx splash_frame
005C4C  2  F0 03                        beq @1
005C4E  2  CA                           dex
005C4F  2  86 AF                        stx splash_frame
005C51  2  8A           @1              txa
005C52  2  D0 02                        bne @2
005C54  2  A0 01                        ldy #1                  ; force middle bucket on splash_frame == 0
005C56  2  8A           @2              txa
005C57  2                               ; 4 repeats per frame
005C57  2  4A                           lsr
005C58  2  4A                           lsr
005C59  2  85 00                        sta temp
005C5B  2  98                           tya
005C5C  2  0A                           asl
005C5D  2  0A                           asl
005C5E  2               ;               clc
005C5E  2  65 00                        adc temp
005C60  2  0A                           asl
005C61  2  A8                           tay
005C62  2               
005C62  2  B9 E9 60                     lda splash_procs+0,y
005C65  2  8D 7D 5C                     sta @mod1+1
005C68  2  B9 EA 60                     lda splash_procs+1,y
005C6B  2  8D 7E 5C                     sta @mod1+2
005C6E  2  A4 09                        ldy bucket_xshift
005C70  2  BE E0 64                     ldx splash_offsets,y
005C73  2  A4 08                        ldy bucket_xcol
005C75  2  8C 23 60                     sty prev_bucket_xcol
005C78  2  98                           tya
005C79  2  18                           clc
005C7A  2  69 05                        adc #bucketByteWidth-1
005C7C  2  20 FF FF     @mod1           jsr $ffff
005C7F  2               
005C7F  2  A4 A1                        ldy player_buckets
005C81  2  F0 1A                        beq @3
005C83  2  B9 9D 5C                     lda bucket_procs_lo-1,y
005C86  2  8D 9B 5C                     sta @mod2+1
005C89  2  B9 A0 5C                     lda bucket_procs_hi-1,y
005C8C  2  8D 9C 5C                     sta @mod2+2
005C8F  2  A4 09                        ldy bucket_xshift
005C91  2  BE 9E 5F                     ldx bucket_offsets,y
005C94  2  A4 08                        ldy bucket_xcol
005C96  2  98                           tya
005C97  2  18                           clc
005C98  2  69 05                        adc #bucketByteWidth-1
005C9A  2  4C FF FF     @mod2           jmp $ffff
005C9D  2  60           @3              rts
005C9E  2               
005C9E  2  A0           bucket_procs_lo .byte <draw_1bucket
005C9F  2  A2                           .byte <draw_2buckets
005CA0  2  A4                           .byte <draw_3buckets
005CA1  2               
005CA1  2  5E           bucket_procs_hi .byte >draw_1bucket
005CA2  2  5D                           .byte >draw_2buckets
005CA3  2  5C                           .byte >draw_3buckets
005CA4  2               
005CA4  2  8D F4 5C     draw_3buckets   sta @mod+1
005CA7  2  BD A5 5F     @1              lda bucket_bits,x
005CAA  2  99 D0 34                     sta bucket_top_line0,y
005CAD  2  99 D0 35                     sta bucket_mid_line0,y
005CB0  2  99 D0 36                     sta bucket_bot_line0,y
005CB3  2  E8                           inx
005CB4  2  BD A5 5F                     lda bucket_bits,x
005CB7  2  99 D0 3C                     sta bucket_top_line2,y
005CBA  2  99 D0 3D                     sta bucket_mid_line2,y
005CBD  2  99 D0 3E                     sta bucket_bot_line2,y
005CC0  2  99 50 21                     sta bucket_top_line3,y
005CC3  2  99 50 22                     sta bucket_mid_line3,y
005CC6  2  99 50 23                     sta bucket_bot_line3,y
005CC9  2  99 50 25                     sta bucket_top_line4,y
005CCC  2  99 50 26                     sta bucket_mid_line4,y
005CCF  2  99 50 27                     sta bucket_bot_line4,y
005CD2  2  99 50 29                     sta bucket_top_line5,y
005CD5  2  99 50 2A                     sta bucket_mid_line5,y
005CD8  2  99 50 2B                     sta bucket_bot_line5,y
005CDB  2  99 50 2D                     sta bucket_top_line6,y
005CDE  2  99 50 2E                     sta bucket_mid_line6,y
005CE1  2  99 50 2F                     sta bucket_bot_line6,y
005CE4  2  E8                           inx
005CE5  2  BD A5 5F                     lda bucket_bits,x
005CE8  2  99 50 31                     sta bucket_top_line7,y
005CEB  2  99 50 32                     sta bucket_mid_line7,y
005CEE  2  99 50 33                     sta bucket_bot_line7,y
005CF1  2  E8                           inx
005CF2  2  C8                           iny
005CF3  2  C0 FF        @mod            cpy #$ff
005CF5  2  90 B0                        bcc @1
005CF7  2                               same_page_as @1
005CF7  2               
005CF7  2  BD A5 5F                     lda bucket_bits,x
005CFA  2  59 D0 34                     eor bucket_top_line0,y
005CFD  2  99 D0 34                     sta bucket_top_line0,y
005D00  2  BD A5 5F                     lda bucket_bits,x
005D03  2  59 D0 35                     eor bucket_mid_line0,y
005D06  2  99 D0 35                     sta bucket_mid_line0,y
005D09  2  BD A5 5F                     lda bucket_bits,x
005D0C  2  59 D0 36                     eor bucket_bot_line0,y
005D0F  2  99 D0 36                     sta bucket_bot_line0,y
005D12  2  E8                           inx
005D13  2  8A                           txa
005D14  2  48                           pha
005D15  2  BD A5 5F                     lda bucket_bits,x
005D18  2  AA                           tax
005D19  2               ;               txa
005D19  2  59 D0 3C                     eor bucket_top_line2,y
005D1C  2  99 D0 3C                     sta bucket_top_line2,y
005D1F  2  8A                           txa
005D20  2  59 D0 3D                     eor bucket_mid_line2,y
005D23  2  99 D0 3D                     sta bucket_mid_line2,y
005D26  2  8A                           txa
005D27  2  59 D0 3E                     eor bucket_bot_line2,y
005D2A  2  99 D0 3E                     sta bucket_bot_line2,y
005D2D  2  8A                           txa
005D2E  2  59 50 21                     eor bucket_top_line3,y
005D31  2  99 50 21                     sta bucket_top_line3,y
005D34  2  8A                           txa
005D35  2  59 50 22                     eor bucket_mid_line3,y
005D38  2  99 50 22                     sta bucket_mid_line3,y
005D3B  2  8A                           txa
005D3C  2  59 50 23                     eor bucket_bot_line3,y
005D3F  2  99 50 23                     sta bucket_bot_line3,y
005D42  2  8A                           txa
005D43  2  59 50 25                     eor bucket_top_line4,y
005D46  2  99 50 25                     sta bucket_top_line4,y
005D49  2  8A                           txa
005D4A  2  59 50 26                     eor bucket_mid_line4,y
005D4D  2  99 50 26                     sta bucket_mid_line4,y
005D50  2  8A                           txa
005D51  2  59 50 27                     eor bucket_bot_line4,y
005D54  2  99 50 27                     sta bucket_bot_line4,y
005D57  2  8A                           txa
005D58  2  59 50 29                     eor bucket_top_line5,y
005D5B  2  99 50 29                     sta bucket_top_line5,y
005D5E  2  8A                           txa
005D5F  2  59 50 2A                     eor bucket_mid_line5,y
005D62  2  99 50 2A                     sta bucket_mid_line5,y
005D65  2  8A                           txa
005D66  2  59 50 2B                     eor bucket_bot_line5,y
005D69  2  99 50 2B                     sta bucket_bot_line5,y
005D6C  2  8A                           txa
005D6D  2  59 50 2D                     eor bucket_top_line6,y
005D70  2  99 50 2D                     sta bucket_top_line6,y
005D73  2  8A                           txa
005D74  2  59 50 2E                     eor bucket_mid_line6,y
005D77  2  99 50 2E                     sta bucket_mid_line6,y
005D7A  2  8A                           txa
005D7B  2  59 50 2F                     eor bucket_bot_line6,y
005D7E  2  99 50 2F                     sta bucket_bot_line6,y
005D81  2  68                           pla
005D82  2  AA                           tax
005D83  2  E8                           inx
005D84  2  BD A5 5F                     lda bucket_bits,x
005D87  2  59 50 31                     eor bucket_top_line7,y
005D8A  2  99 50 31                     sta bucket_top_line7,y
005D8D  2  BD A5 5F                     lda bucket_bits,x
005D90  2  59 50 32                     eor bucket_mid_line7,y
005D93  2  99 50 32                     sta bucket_mid_line7,y
005D96  2  BD A5 5F                     lda bucket_bits,x
005D99  2  59 50 33                     eor bucket_bot_line7,y
005D9C  2  99 50 33                     sta bucket_bot_line7,y
005D9F  2  E8                           inx
005DA0  2  C8                           iny
005DA1  2  60                           rts
005DA2  2               
005DA2  2  8D F2 5D     draw_2buckets   sta @mod+1
005DA5  2  BD A5 5F     @1              lda bucket_bits,x
005DA8  2  99 D0 34                     sta bucket_top_line0,y
005DAB  2  99 D0 35                     sta bucket_mid_line0,y
005DAE  2  99 00 18                     sta clip_buffer,y
005DB1  2  E8                           inx
005DB2  2  BD A5 5F                     lda bucket_bits,x
005DB5  2  99 D0 3C                     sta bucket_top_line2,y
005DB8  2  99 D0 3D                     sta bucket_mid_line2,y
005DBB  2  99 00 18                     sta clip_buffer,y
005DBE  2  99 50 21                     sta bucket_top_line3,y
005DC1  2  99 50 22                     sta bucket_mid_line3,y
005DC4  2  99 00 18                     sta clip_buffer,y
005DC7  2  99 50 25                     sta bucket_top_line4,y
005DCA  2  99 50 26                     sta bucket_mid_line4,y
005DCD  2  99 00 18                     sta clip_buffer,y
005DD0  2  99 50 29                     sta bucket_top_line5,y
005DD3  2  99 50 2A                     sta bucket_mid_line5,y
005DD6  2  99 00 18                     sta clip_buffer,y
005DD9  2  99 50 2D                     sta bucket_top_line6,y
005DDC  2  99 50 2E                     sta bucket_mid_line6,y
005DDF  2  99 00 18                     sta clip_buffer,y
005DE2  2  E8                           inx
005DE3  2  BD A5 5F                     lda bucket_bits,x
005DE6  2  99 50 31                     sta bucket_top_line7,y
005DE9  2  99 50 32                     sta bucket_mid_line7,y
005DEC  2  99 00 18                     sta clip_buffer,y
005DEF  2  E8                           inx
005DF0  2  C8                           iny
005DF1  2  C0 FF        @mod            cpy #$ff
005DF3  2  90 B0                        bcc @1
005DF5  2                               same_page_as @1
005DF5  2               
005DF5  2  BD A5 5F                     lda bucket_bits,x
005DF8  2  59 D0 34                     eor bucket_top_line0,y
005DFB  2  99 D0 34                     sta bucket_top_line0,y
005DFE  2  BD A5 5F                     lda bucket_bits,x
005E01  2  59 D0 35                     eor bucket_mid_line0,y
005E04  2  99 D0 35                     sta bucket_mid_line0,y
005E07  2  BD A5 5F                     lda bucket_bits,x
005E0A  2  59 00 18                     eor clip_buffer,y
005E0D  2  99 00 18                     sta clip_buffer,y
005E10  2  E8                           inx
005E11  2  8A                           txa
005E12  2  48                           pha
005E13  2  BD A5 5F                     lda bucket_bits,x
005E16  2  AA                           tax
005E17  2               ;               txa
005E17  2  59 D0 3C                     eor bucket_top_line2,y
005E1A  2  99 D0 3C                     sta bucket_top_line2,y
005E1D  2  8A                           txa
005E1E  2  59 D0 3D                     eor bucket_mid_line2,y
005E21  2  99 D0 3D                     sta bucket_mid_line2,y
005E24  2  8A                           txa
005E25  2  59 00 18                     eor clip_buffer,y
005E28  2  99 00 18                     sta clip_buffer,y
005E2B  2  8A                           txa
005E2C  2  59 50 21                     eor bucket_top_line3,y
005E2F  2  99 50 21                     sta bucket_top_line3,y
005E32  2  8A                           txa
005E33  2  59 50 22                     eor bucket_mid_line3,y
005E36  2  99 50 22                     sta bucket_mid_line3,y
005E39  2  8A                           txa
005E3A  2  59 00 18                     eor clip_buffer,y
005E3D  2  99 00 18                     sta clip_buffer,y
005E40  2  8A                           txa
005E41  2  59 50 25                     eor bucket_top_line4,y
005E44  2  99 50 25                     sta bucket_top_line4,y
005E47  2  8A                           txa
005E48  2  59 50 26                     eor bucket_mid_line4,y
005E4B  2  99 50 26                     sta bucket_mid_line4,y
005E4E  2  8A                           txa
005E4F  2  59 00 18                     eor clip_buffer,y
005E52  2  99 00 18                     sta clip_buffer,y
005E55  2  8A                           txa
005E56  2  59 50 29                     eor bucket_top_line5,y
005E59  2  99 50 29                     sta bucket_top_line5,y
005E5C  2  8A                           txa
005E5D  2  59 50 2A                     eor bucket_mid_line5,y
005E60  2  99 50 2A                     sta bucket_mid_line5,y
005E63  2  8A                           txa
005E64  2  59 00 18                     eor clip_buffer,y
005E67  2  99 00 18                     sta clip_buffer,y
005E6A  2  8A                           txa
005E6B  2  59 50 2D                     eor bucket_top_line6,y
005E6E  2  99 50 2D                     sta bucket_top_line6,y
005E71  2  8A                           txa
005E72  2  59 50 2E                     eor bucket_mid_line6,y
005E75  2  99 50 2E                     sta bucket_mid_line6,y
005E78  2  8A                           txa
005E79  2  59 00 18                     eor clip_buffer,y
005E7C  2  99 00 18                     sta clip_buffer,y
005E7F  2  68                           pla
005E80  2  AA                           tax
005E81  2  E8                           inx
005E82  2  BD A5 5F                     lda bucket_bits,x
005E85  2  59 50 31                     eor bucket_top_line7,y
005E88  2  99 50 31                     sta bucket_top_line7,y
005E8B  2  BD A5 5F                     lda bucket_bits,x
005E8E  2  59 50 32                     eor bucket_mid_line7,y
005E91  2  99 50 32                     sta bucket_mid_line7,y
005E94  2  BD A5 5F                     lda bucket_bits,x
005E97  2  59 00 18                     eor clip_buffer,y
005E9A  2  99 00 18                     sta clip_buffer,y
005E9D  2  E8                           inx
005E9E  2  C8                           iny
005E9F  2  60                           rts
005EA0  2               
005EA0  2  8D F0 5E     draw_1bucket    sta @mod+1
005EA3  2  BD A5 5F     @1              lda bucket_bits,x
005EA6  2  99 D0 34                     sta bucket_top_line0,y
005EA9  2  99 00 18                     sta clip_buffer,y
005EAC  2  99 00 18                     sta clip_buffer,y
005EAF  2  E8                           inx
005EB0  2  BD A5 5F                     lda bucket_bits,x
005EB3  2  99 D0 3C                     sta bucket_top_line2,y
005EB6  2  99 00 18                     sta clip_buffer,y
005EB9  2  99 00 18                     sta clip_buffer,y
005EBC  2  99 50 21                     sta bucket_top_line3,y
005EBF  2  99 00 18                     sta clip_buffer,y
005EC2  2  99 00 18                     sta clip_buffer,y
005EC5  2  99 50 25                     sta bucket_top_line4,y
005EC8  2  99 00 18                     sta clip_buffer,y
005ECB  2  99 00 18                     sta clip_buffer,y
005ECE  2  99 50 29                     sta bucket_top_line5,y
005ED1  2  99 00 18                     sta clip_buffer,y
005ED4  2  99 00 18                     sta clip_buffer,y
005ED7  2  99 50 2D                     sta bucket_top_line6,y
005EDA  2  99 00 18                     sta clip_buffer,y
005EDD  2  99 00 18                     sta clip_buffer,y
005EE0  2  E8                           inx
005EE1  2  BD A5 5F                     lda bucket_bits,x
005EE4  2  99 50 31                     sta bucket_top_line7,y
005EE7  2  99 00 18                     sta clip_buffer,y
005EEA  2  99 00 18                     sta clip_buffer,y
005EED  2  E8                           inx
005EEE  2  C8                           iny
005EEF  2  C0 FF        @mod            cpy #$ff
005EF1  2  90 B0                        bcc @1
005EF3  2                               same_page_as @1
005EF3  2               
005EF3  2  BD A5 5F                     lda bucket_bits,x
005EF6  2  59 D0 34                     eor bucket_top_line0,y
005EF9  2  99 D0 34                     sta bucket_top_line0,y
005EFC  2  BD A5 5F                     lda bucket_bits,x
005EFF  2  59 00 18                     eor clip_buffer,y
005F02  2  99 00 18                     sta clip_buffer,y
005F05  2  BD A5 5F                     lda bucket_bits,x
005F08  2  59 00 18                     eor clip_buffer,y
005F0B  2  99 00 18                     sta clip_buffer,y
005F0E  2  E8                           inx
005F0F  2  8A                           txa
005F10  2  48                           pha
005F11  2  BD A5 5F                     lda bucket_bits,x
005F14  2  AA                           tax
005F15  2               ;               txa
005F15  2  59 D0 3C                     eor bucket_top_line2,y
005F18  2  99 D0 3C                     sta bucket_top_line2,y
005F1B  2  8A                           txa
005F1C  2  59 00 18                     eor clip_buffer,y
005F1F  2  99 00 18                     sta clip_buffer,y
005F22  2  8A                           txa
005F23  2  59 00 18                     eor clip_buffer,y
005F26  2  99 00 18                     sta clip_buffer,y
005F29  2  8A                           txa
005F2A  2  59 50 21                     eor bucket_top_line3,y
005F2D  2  99 50 21                     sta bucket_top_line3,y
005F30  2  8A                           txa
005F31  2  59 00 18                     eor clip_buffer,y
005F34  2  99 00 18                     sta clip_buffer,y
005F37  2  8A                           txa
005F38  2  59 00 18                     eor clip_buffer,y
005F3B  2  99 00 18                     sta clip_buffer,y
005F3E  2  8A                           txa
005F3F  2  59 50 25                     eor bucket_top_line4,y
005F42  2  99 50 25                     sta bucket_top_line4,y
005F45  2  8A                           txa
005F46  2  59 00 18                     eor clip_buffer,y
005F49  2  99 00 18                     sta clip_buffer,y
005F4C  2  8A                           txa
005F4D  2  59 00 18                     eor clip_buffer,y
005F50  2  99 00 18                     sta clip_buffer,y
005F53  2  8A                           txa
005F54  2  59 50 29                     eor bucket_top_line5,y
005F57  2  99 50 29                     sta bucket_top_line5,y
005F5A  2  8A                           txa
005F5B  2  59 00 18                     eor clip_buffer,y
005F5E  2  99 00 18                     sta clip_buffer,y
005F61  2  8A                           txa
005F62  2  59 00 18                     eor clip_buffer,y
005F65  2  99 00 18                     sta clip_buffer,y
005F68  2  8A                           txa
005F69  2  59 50 2D                     eor bucket_top_line6,y
005F6C  2  99 50 2D                     sta bucket_top_line6,y
005F6F  2  8A                           txa
005F70  2  59 00 18                     eor clip_buffer,y
005F73  2  99 00 18                     sta clip_buffer,y
005F76  2  8A                           txa
005F77  2  59 00 18                     eor clip_buffer,y
005F7A  2  99 00 18                     sta clip_buffer,y
005F7D  2  68                           pla
005F7E  2  AA                           tax
005F7F  2  E8                           inx
005F80  2  BD A5 5F                     lda bucket_bits,x
005F83  2  59 50 31                     eor bucket_top_line7,y
005F86  2  99 50 31                     sta bucket_top_line7,y
005F89  2  BD A5 5F                     lda bucket_bits,x
005F8C  2  59 00 18                     eor clip_buffer,y
005F8F  2  99 00 18                     sta clip_buffer,y
005F92  2  BD A5 5F                     lda bucket_bits,x
005F95  2  59 00 18                     eor clip_buffer,y
005F98  2  99 00 18                     sta clip_buffer,y
005F9B  2  E8                           inx
005F9C  2  C8                           iny
005F9D  2  60                           rts
005F9E  2               
005F9E  2  00           bucket_offsets  .byte bucket_shift0-bucket_bits
005F9F  2  12                           .byte bucket_shift1-bucket_bits
005FA0  2  24                           .byte bucket_shift2-bucket_bits
005FA1  2  36                           .byte bucket_shift3-bucket_bits
005FA2  2  48                           .byte bucket_shift4-bucket_bits
005FA3  2  5A                           .byte bucket_shift5-bucket_bits
005FA4  2  6C                           .byte bucket_shift6-bucket_bits
005FA5  2               
005FA5  2               bucket_bits
005FA5  2  56 25 55     bucket_shift0   .byte $56,$25,$55
005FA8  2  2A 29 2A                     .byte $2a,$29,$2a
005FAB  2  55 4A 55                     .byte $55,$4a,$55
005FAE  2  2A 52 2A                     .byte $2a,$52,$2a
005FB1  2  2D 34 35                     .byte $2d,$34,$35
005FB4  2  00 00 00                     .byte $00,$00,$00
005FB7  2               
005FB7  2  2D 4B 2B     bucket_shift1   .byte $2d,$4b,$2b
005FBA  2  55 52 55                     .byte $55,$52,$55
005FBD  2  2A 14 2A                     .byte $2a,$14,$2a
005FC0  2  55 25 55                     .byte $55,$25,$55
005FC3  2  5A 69 6A                     .byte $5a,$69,$6a
005FC6  2  00 00 00                     .byte $00,$00,$00
005FC9  2               
005FC9  2  5A 16 56     bucket_shift2   .byte $5a,$16,$56
005FCC  2  2A 25 2A                     .byte $2a,$25,$2a
005FCF  2  55 29 55                     .byte $55,$29,$55
005FD2  2  2A 4A 2A                     .byte $2a,$4a,$2a
005FD5  2  35 52 55                     .byte $35,$52,$55
005FD8  2  00 00 00                     .byte $00,$00,$00
005FDB  2               
005FDB  2  35 2D 2D     bucket_shift3   .byte $35,$2d,$2d
005FDE  2  55 4A 55                     .byte $55,$4a,$55
005FE1  2  2A 52 2A                     .byte $2a,$52,$2a
005FE4  2  55 14 55                     .byte $55,$14,$55
005FE7  2  6A 25 2A                     .byte $6a,$25,$2a
005FEA  2  00 01 01                     .byte $00,$01,$01
005FED  2               
005FED  2  6A 5A 5A     bucket_shift4   .byte $6a,$5a,$5a
005FF0  2  2A 14 2A                     .byte $2a,$14,$2a
005FF3  2  55 25 55                     .byte $55,$25,$55
005FF6  2  2A 29 2A                     .byte $2a,$29,$2a
005FF9  2  55 4A 55                     .byte $55,$4a,$55
005FFC  2  00 03 03                     .byte $00,$03,$03
005FFF  2               
005FFF  2  55 35 35     bucket_shift5   .byte $55,$35,$35
006002  2  55 29 55                     .byte $55,$29,$55
006005  2  2A 4A 2A                     .byte $2a,$4a,$2a
006008  2  55 52 55                     .byte $55,$52,$55
00600B  2  2A 14 2A                     .byte $2a,$14,$2a
00600E  2  01 07 07                     .byte $01,$07,$07
006011  2               
006011  2  2A 6A 6A     bucket_shift6   .byte $2a,$6a,$6a
006014  2  2B 52 2A                     .byte $2b,$52,$2a
006017  2  55 14 55                     .byte $55,$14,$55
00601A  2  2A 25 2A                     .byte $2a,$25,$2a
00601D  2  55 29 55                     .byte $55,$29,$55
006020  2  03 0F 0F                     .byte $03,$0f,$0f
006023  2               
006023  2  00           prev_bucket_xcol .byte 0
006024  2               
006024  2  AC 23 60     erase_buckets   ldy prev_bucket_xcol
006027  2  A2 06                        ldx #6
006029  2  98                           tya
00602A  2  4A                           lsr
00602B  2  A9 2A                        lda #$2a
00602D  2  90 02                        bcc @1
00602F  2  A9 55                        lda #$55
006031  2  99 D0 34     @1              sta bucket_top_line0,y
006034  2  99 D0 35                     sta bucket_mid_line0,y
006037  2  99 D0 36                     sta bucket_bot_line0,y
00603A  2  99 D0 38                     sta bucket_top_line1,y
00603D  2  99 D0 39                     sta bucket_mid_line1,y
006040  2  99 D0 3A                     sta bucket_bot_line1,y
006043  2  99 D0 3C                     sta bucket_top_line2,y
006046  2  99 D0 3D                     sta bucket_mid_line2,y
006049  2  99 D0 3E                     sta bucket_bot_line2,y
00604C  2  99 50 21                     sta bucket_top_line3,y
00604F  2  99 50 22                     sta bucket_mid_line3,y
006052  2  99 50 23                     sta bucket_bot_line3,y
006055  2  99 50 25                     sta bucket_top_line4,y
006058  2  99 50 26                     sta bucket_mid_line4,y
00605B  2  99 50 27                     sta bucket_bot_line4,y
00605E  2  99 50 29                     sta bucket_top_line5,y
006061  2  99 50 2A                     sta bucket_mid_line5,y
006064  2  99 50 2B                     sta bucket_bot_line5,y
006067  2  99 50 2D                     sta bucket_top_line6,y
00606A  2  99 50 2E                     sta bucket_mid_line6,y
00606D  2  99 50 2F                     sta bucket_bot_line6,y
006070  2  99 50 31                     sta bucket_top_line7,y
006073  2  99 50 32                     sta bucket_mid_line7,y
006076  2  99 50 33                     sta bucket_bot_line7,y
006079  2  49 7F                        eor #$7f
00607B  2  C8                           iny
00607C  2  CA                           dex
00607D  2  D0 B2                        bne @1
00607F  2                               same_page_as @1
00607F  2                               ; fall through
00607F  2               
00607F  2               erase_splash_cols
00607F  2  A5 9C                        lda splash_bucket
006081  2  85 00                        sta temp
006083  2  A4 08                        ldy bucket_xcol
006085  2  A2 05                        ldx #5
006087  2  98                           tya
006088  2  4A                           lsr
006089  2  A9 2A                        lda #$2a
00608B  2  90 02                        bcc @1
00608D  2  A9 55                        lda #$55
00608F  2  46 00        @1              lsr temp
006091  2  D0 3A                        bne erase_splash_bot_cols
006093  2  B0 1C                        bcs erase_splash_mid_cols
006095  2                               ; fall through
006095  2               
006095  2               erase_splash_top_cols
006095  2  99 50 38     @1              sta splash_top_line1,y
006098  2  99 50 3C                     sta splash_top_line2,y
00609B  2  99 D0 20                     sta splash_top_line3,y
00609E  2  99 D0 24                     sta splash_top_line4,y
0060A1  2  99 D0 28                     sta splash_top_line5,y
0060A4  2  99 D0 2C                     sta splash_top_line6,y
0060A7  2  99 D0 30                     sta splash_top_line7,y
0060AA  2  49 7F                        eor #$7f
0060AC  2  C8                           iny
0060AD  2  CA                           dex
0060AE  2  D0 E5                        bne @1
0060B0  2                               same_page_as @1
0060B0  2  60                           rts
0060B1  2               
0060B1  2               erase_splash_mid_cols
0060B1  2  99 50 39     @1              sta splash_mid_line1,y
0060B4  2  99 50 3D                     sta splash_mid_line2,y
0060B7  2  99 D0 21                     sta splash_mid_line3,y
0060BA  2  99 D0 25                     sta splash_mid_line4,y
0060BD  2  99 D0 29                     sta splash_mid_line5,y
0060C0  2  99 D0 2D                     sta splash_mid_line6,y
0060C3  2  99 D0 31                     sta splash_mid_line7,y
0060C6  2  49 7F                        eor #$7f
0060C8  2  C8                           iny
0060C9  2  CA                           dex
0060CA  2  D0 E5                        bne @1
0060CC  2                               same_page_as @1
0060CC  2  60                           rts
0060CD  2               
0060CD  2               erase_splash_bot_cols
0060CD  2  99 50 3A     @1              sta splash_bot_line1,y
0060D0  2  99 50 3E                     sta splash_bot_line2,y
0060D3  2  99 D0 22                     sta splash_bot_line3,y
0060D6  2  99 D0 26                     sta splash_bot_line4,y
0060D9  2  99 D0 2A                     sta splash_bot_line5,y
0060DC  2  99 D0 2E                     sta splash_bot_line6,y
0060DF  2  99 D0 32                     sta splash_bot_line7,y
0060E2  2  49 7F                        eor #$7f
0060E4  2  C8                           iny
0060E5  2  CA                           dex
0060E6  2  D0 E5                        bne @1
0060E8  2                               same_page_as @1
0060E8  2  60                           rts
0060E9  2               
0060E9  2               .macro splash_top _bits
0060E9  2                               sta @mod+1
0060E9  2                               clc
0060E9  2               @1              lda _bits+0,x
0060E9  2                               sta splash_top_line1,y
0060E9  2                               lda _bits+1,x
0060E9  2                               sta splash_top_line2,y
0060E9  2                               lda _bits+2,x
0060E9  2                               sta splash_top_line3,y
0060E9  2                               lda _bits+3,x
0060E9  2                               sta splash_top_line4,y
0060E9  2                               lda _bits+4,x
0060E9  2                               sta splash_top_line5,y
0060E9  2                               lda _bits+5,x
0060E9  2                               sta splash_top_line6,y
0060E9  2                               lda _bits+6,x
0060E9  2                               sta splash_top_line7,y
0060E9  2                               txa
0060E9  2               ;               clc
0060E9  2                               adc #7
0060E9  2                               tax
0060E9  2                               iny
0060E9  2               @mod            cpy #$ff
0060E9  2                               bcc @1
0060E9  2                               same_page_as @1
0060E9  2                               rts
0060E9  2               .endmacro
0060E9  2               
0060E9  2               .macro splash_mid _bits
0060E9  2                               sta @mod+1
0060E9  2                               clc
0060E9  2               @1              lda _bits+0,x
0060E9  2                               sta splash_mid_line1,y
0060E9  2                               lda _bits+1,x
0060E9  2                               sta splash_mid_line2,y
0060E9  2                               lda _bits+2,x
0060E9  2                               sta splash_mid_line3,y
0060E9  2                               lda _bits+3,x
0060E9  2                               sta splash_mid_line4,y
0060E9  2                               lda _bits+4,x
0060E9  2                               sta splash_mid_line5,y
0060E9  2                               lda _bits+5,x
0060E9  2                               sta splash_mid_line6,y
0060E9  2                               lda _bits+6,x
0060E9  2                               sta splash_mid_line7,y
0060E9  2                               txa
0060E9  2               ;               clc
0060E9  2                               adc #7
0060E9  2                               tax
0060E9  2                               iny
0060E9  2               @mod            cpy #$ff
0060E9  2                               bcc @1
0060E9  2                               same_page_as @1
0060E9  2                               rts
0060E9  2               .endmacro
0060E9  2               
0060E9  2               .macro splash_bot _bits
0060E9  2                               sta @mod+1
0060E9  2                               clc
0060E9  2               @1              lda _bits+0,x
0060E9  2                               sta splash_bot_line1,y
0060E9  2                               lda _bits+1,x
0060E9  2                               sta splash_bot_line2,y
0060E9  2                               lda _bits+2,x
0060E9  2                               sta splash_bot_line3,y
0060E9  2                               lda _bits+3,x
0060E9  2                               sta splash_bot_line4,y
0060E9  2                               lda _bits+4,x
0060E9  2                               sta splash_bot_line5,y
0060E9  2                               lda _bits+5,x
0060E9  2                               sta splash_bot_line6,y
0060E9  2                               lda _bits+6,x
0060E9  2                               sta splash_bot_line7,y
0060E9  2                               txa
0060E9  2               ;               clc
0060E9  2                               adc #7
0060E9  2                               tax
0060E9  2                               iny
0060E9  2               @mod            cpy #$ff
0060E9  2                               bcc @1
0060E9  2                               same_page_as @1
0060E9  2                               rts
0060E9  2               .endmacro
0060E9  2               
0060E9  2  00 62        splash_procs    .word draw_splash_top_f0
0060EB  2  38 62                        .word draw_splash_top_f1
0060ED  2  70 62                        .word draw_splash_top_f2
0060EF  2  A8 62                        .word draw_splash_top_f3
0060F1  2               
0060F1  2  00 63                        .word draw_splash_mid_f0
0060F3  2  38 63                        .word draw_splash_mid_f1
0060F5  2  70 63                        .word draw_splash_mid_f2
0060F7  2  A8 63                        .word draw_splash_mid_f3
0060F9  2               
0060F9  2  00 64                        .word draw_splash_bot_f0
0060FB  2  38 64                        .word draw_splash_bot_f1
0060FD  2  70 64                        .word draw_splash_bot_f2
0060FF  2  A8 64                        .word draw_splash_bot_f3
006101  2               
006101  2  xx xx xx xx                  .align 256
006105  2  xx xx xx xx  
006109  2  xx xx xx xx  
006200  2               
006200  2  8D 34 62 18  draw_splash_top_f0  splash_top splash_f0
006204  2  BD 00 65 99  
006208  2  50 38 BD 01  
006238  2  8D 6C 62 18  draw_splash_top_f1  splash_top splash_f1
00623C  2  BD 00 66 99  
006240  2  50 38 BD 01  
006270  2  8D A4 62 18  draw_splash_top_f2  splash_top splash_f2
006274  2  BD 00 67 99  
006278  2  50 38 BD 01  
0062A8  2  8D DC 62 18  draw_splash_top_f3  splash_top splash_f3
0062AC  2  BD 00 68 99  
0062B0  2  50 38 BD 01  
0062E0  2               
0062E0  2  xx xx xx xx                  .res 32                 ; avoid branch page crossings
0062E4  2  xx xx xx xx  
0062E8  2  xx xx xx xx  
006300  2               
006300  2  8D 34 63 18  draw_splash_mid_f0  splash_mid splash_f0
006304  2  BD 00 65 99  
006308  2  50 39 BD 01  
006338  2  8D 6C 63 18  draw_splash_mid_f1  splash_mid splash_f1
00633C  2  BD 00 66 99  
006340  2  50 39 BD 01  
006370  2  8D A4 63 18  draw_splash_mid_f2  splash_mid splash_f2
006374  2  BD 00 67 99  
006378  2  50 39 BD 01  
0063A8  2  8D DC 63 18  draw_splash_mid_f3  splash_mid splash_f3
0063AC  2  BD 00 68 99  
0063B0  2  50 39 BD 01  
0063E0  2               
0063E0  2  xx xx xx xx                  .res 32                 ; avoid branch page crossings
0063E4  2  xx xx xx xx  
0063E8  2  xx xx xx xx  
006400  2               
006400  2  8D 34 64 18  draw_splash_bot_f0  splash_bot splash_f0
006404  2  BD 00 65 99  
006408  2  50 3A BD 01  
006438  2  8D 6C 64 18  draw_splash_bot_f1  splash_bot splash_f1
00643C  2  BD 00 66 99  
006440  2  50 3A BD 01  
006470  2  8D A4 64 18  draw_splash_bot_f2  splash_bot splash_f2
006474  2  BD 00 67 99  
006478  2  50 3A BD 01  
0064A8  2  8D DC 64 18  draw_splash_bot_f3  splash_bot splash_f3
0064AC  2  BD 00 68 99  
0064B0  2  50 3A BD 01  
0064E0  2               
0064E0  2  00 23 46 69  splash_offsets  .byte 0*35,1*35,2*35,3*35,4*35,5*35,6*35
0064E4  2  8C AF D2     
0064E7  2               
0064E7  2  xx xx xx xx                  .align 256
0064EB  2  xx xx xx xx  
0064EF  2  xx xx xx xx  
006500  2               splash_f0
006500  2  2A 2A 2A 2A  splash_f0_0     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006504  2  2A 2A 2A     
006507  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
00650B  2  55 55 55     
00650E  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006512  2  2A 2A 2A     
006515  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
006519  2  55 55 55     
00651C  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006520  2  2A 2A 2A     
006523  2               
006523  2  55 55 55 55  splash_f0_1     .byte $55,$55,$55,$55,$55,$55,$55
006527  2  55 55 55     
00652A  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
00652E  2  2A 2A 2A     
006531  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
006535  2  55 55 55     
006538  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
00653C  2  2A 2A 2A     
00653F  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
006543  2  55 55 55     
006546  2               
006546  2  2A 2A 2A 2A  splash_f0_2     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
00654A  2  2A 2A 2A     
00654D  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
006551  2  55 55 55     
006554  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006558  2  2A 2A 2A     
00655B  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
00655F  2  55 55 55     
006562  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006566  2  2A 2A 2A     
006569  2               
006569  2  55 55 55 55  splash_f0_3     .byte $55,$55,$55,$55,$55,$55,$55
00656D  2  55 55 55     
006570  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006574  2  2A 2A 2A     
006577  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
00657B  2  55 55 55     
00657E  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006582  2  2A 2A 2A     
006585  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
006589  2  55 55 55     
00658C  2               
00658C  2  2A 2A 2A 2A  splash_f0_4     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006590  2  2A 2A 2A     
006593  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
006597  2  55 55 55     
00659A  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
00659E  2  2A 2A 2A     
0065A1  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0065A5  2  55 55 55     
0065A8  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0065AC  2  2A 2A 2A     
0065AF  2               
0065AF  2  55 55 55 55  splash_f0_5     .byte $55,$55,$55,$55,$55,$55,$55
0065B3  2  55 55 55     
0065B6  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0065BA  2  2A 2A 2A     
0065BD  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0065C1  2  55 55 55     
0065C4  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0065C8  2  2A 2A 2A     
0065CB  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0065CF  2  55 55 55     
0065D2  2               
0065D2  2  2A 2A 2A 2A  splash_f0_6     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0065D6  2  2A 2A 2A     
0065D9  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0065DD  2  55 55 55     
0065E0  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0065E4  2  2A 2A 2A     
0065E7  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0065EB  2  55 55 55     
0065EE  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0065F2  2  2A 2A 2A     
0065F5  2               
0065F5  2  xx xx xx xx                  .align 256
0065F9  2  xx xx xx xx  
0065FD  2  xx xx xx     
006600  2               splash_f1
006600  2  2A 2A 7A 2A  splash_f1_0     .byte $2a,$2a,$7a,$2a,$2a,$2a,$7a
006604  2  2A 2A 7A     
006607  2  55 7D 55 55                  .byte $55,$7d,$55,$55,$7d,$55,$55
00660B  2  7D 55 55     
00660E  2  2A 6A 2A 2E                  .byte $2a,$6a,$2a,$2e,$7f,$2a,$2e
006612  2  7F 2A 2E     
006615  2  55 57 75 55                  .byte $55,$57,$75,$55,$57,$55,$75
006619  2  57 55 75     
00661C  2  2A 2A 2B 2A                  .byte $2a,$2a,$2b,$2a,$2a,$2a,$2b
006620  2  2A 2A 2B     
006623  2               
006623  2  55 55 75 55  splash_f1_1     .byte $55,$55,$75,$55,$55,$55,$75
006627  2  55 55 75     
00662A  2  2A 7A 2B 2A                  .byte $2a,$7a,$2b,$2a,$7a,$2a,$2b
00662E  2  7A 2A 2B     
006631  2  55 55 55 5D                  .byte $55,$55,$55,$5d,$7f,$55,$5d
006635  2  7F 55 5D     
006638  2  2A 2F 6A 2A                  .byte $2a,$2f,$6a,$2a,$2f,$2a,$6a
00663C  2  2F 2A 6A     
00663F  2  55 55 57 55                  .byte $55,$55,$57,$55,$55,$55,$57
006643  2  55 55 57     
006646  2               
006646  2  2A 2A 6A 2A  splash_f1_2     .byte $2a,$2a,$6a,$2a,$2a,$2a,$6a
00664A  2  2A 2A 6A     
00664D  2  55 75 57 55                  .byte $55,$75,$57,$55,$75,$55,$57
006651  2  75 55 57     
006654  2  2A 2B 2A 3A                  .byte $2a,$2b,$2a,$3a,$7f,$2a,$3a
006658  2  7F 2A 3A     
00665B  2  55 5F 55 55                  .byte $55,$5f,$55,$55,$5f,$55,$55
00665F  2  5F 55 55     
006662  2  2A 2A 2F 2A                  .byte $2a,$2a,$2f,$2a,$2a,$2a,$2f
006666  2  2A 2A 2F     
006669  2               
006669  2  55 55 55 55  splash_f1_3     .byte $55,$55,$55,$55,$55,$55,$55
00666D  2  55 55 55     
006670  2  2A 6A 2F 2A                  .byte $2a,$6a,$2f,$2a,$6a,$2a,$2f
006674  2  6A 2A 2F     
006677  2  55 57 55 75                  .byte $55,$57,$55,$75,$7f,$55,$75
00667B  2  7F 55 75     
00667E  2  2A 3E 2A 2A                  .byte $2a,$3e,$2a,$2a,$3f,$2a,$2a
006682  2  3F 2A 2A     
006685  2  55 55 5F 55                  .byte $55,$55,$5f,$55,$55,$55,$5f
006689  2  55 55 5F     
00668C  2               
00668C  2  2A 2A 2A 2A  splash_f1_4     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006690  2  2A 2A 2A     
006693  2  55 55 5F 55                  .byte $55,$55,$5f,$55,$55,$55,$5f
006697  2  55 55 5F     
00669A  2  2A 2F 2A 6A                  .byte $2a,$2f,$2a,$6a,$7f,$2a,$6a
00669E  2  7F 2A 6A     
0066A1  2  55 7D 55 55                  .byte $55,$7d,$55,$55,$7f,$55,$55
0066A5  2  7F 55 55     
0066A8  2  2A 2A 3E 2A                  .byte $2a,$2a,$3e,$2a,$2a,$2a,$3e
0066AC  2  2A 2A 3E     
0066AF  2               
0066AF  2  55 55 55 55  splash_f1_5     .byte $55,$55,$55,$55,$55,$55,$55
0066B3  2  55 55 55     
0066B6  2  2A 2A 3E 2A                  .byte $2a,$2a,$3e,$2a,$2a,$2a,$3e
0066BA  2  2A 2A 3E     
0066BD  2  55 5F 55 55                  .byte $55,$5f,$55,$55,$7f,$55,$55
0066C1  2  7F 55 55     
0066C4  2  2A 7A 2A 2B                  .byte $2a,$7a,$2a,$2b,$7f,$2a,$2b
0066C8  2  7F 2A 2B     
0066CB  2  55 55 7D 55                  .byte $55,$55,$7d,$55,$55,$55,$7d
0066CF  2  55 55 7D     
0066D2  2               
0066D2  2  2A 2A 2A 2A  splash_f1_6     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0066D6  2  2A 2A 2A     
0066D9  2  55 55 7D 55                  .byte $55,$55,$7d,$55,$55,$55,$7d
0066DD  2  55 55 7D     
0066E0  2  2A 3E 2A 2A                  .byte $2a,$3e,$2a,$2a,$7e,$2a,$2a
0066E4  2  7E 2A 2A     
0066E7  2  55 75 55 57                  .byte $55,$75,$55,$57,$7f,$55,$57
0066EB  2  7F 55 57     
0066EE  2  2A 2B 7A 2A                  .byte $2a,$2b,$7a,$2a,$2b,$2a,$7a
0066F2  2  2B 2A 7A     
0066F5  2               
0066F5  2  xx xx xx xx                  .align 256
0066F9  2  xx xx xx xx  
0066FD  2  xx xx xx     
006700  2               splash_f2
006700  2  2A 2A 2A 7A  splash_f2_0     .byte $2a,$2a,$2a,$7a,$2a,$2a,$2a
006704  2  2A 2A 2A     
006707  2  7D 55 55 55                  .byte $7d,$55,$55,$55,$5d,$55,$55
00670B  2  5D 55 55     
00670E  2  6A 2A 2E 2E                  .byte $6a,$2a,$2e,$2e,$2a,$2e,$2e
006712  2  2A 2E 2E     
006715  2  57 55 55 75                  .byte $57,$55,$55,$75,$57,$55,$55
006719  2  57 55 55     
00671C  2  2A 2A 2A 2B                  .byte $2a,$2a,$2a,$2b,$2a,$2a,$2a
006720  2  2A 2A 2A     
006723  2               
006723  2  55 55 55 7D  splash_f2_1     .byte $55,$55,$55,$7d,$55,$55,$55
006727  2  55 55 55     
00672A  2  7A 2A 2A 2A                  .byte $7a,$2a,$2a,$2a,$3a,$2a,$2a
00672E  2  3A 2A 2A     
006731  2  55 55 5D 5D                  .byte $55,$55,$5d,$5d,$55,$5d,$5d
006735  2  55 5D 5D     
006738  2  2F 2A 2A 6A                  .byte $2f,$2a,$2a,$6a,$2e,$2a,$2a
00673C  2  2E 2A 2A     
00673F  2  55 55 55 57                  .byte $55,$55,$55,$57,$55,$55,$55
006743  2  55 55 55     
006746  2               
006746  2  2A 2A 2A 6A  splash_f2_2     .byte $2a,$2a,$2a,$6a,$2a,$2a,$2a
00674A  2  2A 2A 2A     
00674D  2  75 55 55 57                  .byte $75,$55,$55,$57,$75,$55,$55
006751  2  75 55 55     
006754  2  2B 2A 3A 3A                  .byte $2b,$2a,$3a,$3a,$2a,$3a,$3a
006758  2  2A 3A 3A     
00675B  2  5F 55 55 55                  .byte $5f,$55,$55,$55,$5d,$55,$55
00675F  2  5D 55 55     
006762  2  2A 2A 2A 2F                  .byte $2a,$2a,$2a,$2f,$2a,$2a,$2a
006766  2  2A 2A 2A     
006769  2               
006769  2  55 55 55 75  splash_f2_3     .byte $55,$55,$55,$75,$55,$55,$55
00676D  2  55 55 55     
006770  2  6A 2A 2A 2B                  .byte $6a,$2a,$2a,$2b,$6a,$2a,$2a
006774  2  6A 2A 2A     
006777  2  57 55 75 55                  .byte $57,$55,$75,$55,$55,$75,$75
00677B  2  55 75 75     
00677E  2  3E 2A 2A 2A                  .byte $3e,$2a,$2a,$2a,$3a,$2a,$2a
006782  2  3A 2A 2A     
006785  2  55 55 55 5F                  .byte $55,$55,$55,$5f,$55,$55,$55
006789  2  55 55 55     
00678C  2               
00678C  2  2A 2A 2A 2A  splash_f2_4     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006790  2  2A 2A 2A     
006793  2  55 55 55 5F                  .byte $55,$55,$55,$5f,$55,$55,$55
006797  2  55 55 55     
00679A  2  2F 2A 6A 6A                  .byte $2f,$2a,$6a,$6a,$2b,$6a,$6a
00679E  2  2B 6A 6A     
0067A1  2  7D 55 55 55                  .byte $7d,$55,$55,$55,$75,$55,$55
0067A5  2  75 55 55     
0067A8  2  2A 2A 2A 3E                  .byte $2a,$2a,$2a,$3e,$2a,$2a,$2a
0067AC  2  2A 2A 2A     
0067AF  2               
0067AF  2  55 55 55 55  splash_f2_5     .byte $55,$55,$55,$55,$55,$55,$55
0067B3  2  55 55 55     
0067B6  2  2A 2A 2A 2F                  .byte $2a,$2a,$2a,$2f,$2a,$2a,$2a
0067BA  2  2A 2A 2A     
0067BD  2  5F 55 55 55                  .byte $5f,$55,$55,$55,$57,$55,$55
0067C1  2  57 55 55     
0067C4  2  7A 2A 2B 2B                  .byte $7a,$2a,$2b,$2b,$6a,$2b,$2b
0067C8  2  6A 2B 2B     
0067CB  2  55 55 55 7D                  .byte $55,$55,$55,$7d,$55,$55,$55
0067CF  2  55 55 55     
0067D2  2               
0067D2  2  2A 2A 2A 2A  splash_f2_6     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0067D6  2  2A 2A 2A     
0067D9  2  55 55 55 7D                  .byte $55,$55,$55,$7d,$55,$55,$55
0067DD  2  55 55 55     
0067E0  2  3E 2A 2A 2A                  .byte $3e,$2a,$2a,$2a,$2e,$2a,$2a
0067E4  2  2E 2A 2A     
0067E7  2  75 55 57 57                  .byte $75,$55,$57,$57,$55,$57,$57
0067EB  2  55 57 57     
0067EE  2  2B 2A 2A 7A                  .byte $2b,$2a,$2a,$7a,$2b,$2a,$2a
0067F2  2  2B 2A 2A     
0067F5  2               
0067F5  2  xx xx xx xx                  .align 256
0067F9  2  xx xx xx xx  
0067FD  2  xx xx xx     
006800  2               splash_f3
006800  2  2A 7A 2A 2A  splash_f3_0     .byte $2a,$7a,$2a,$2a,$2a,$7a,$2a
006804  2  2A 7A 2A     
006807  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
00680B  2  55 55 55     
00680E  2  2A 2A 2E 2A                  .byte $2a,$2a,$2e,$2a,$2e,$2e,$2a
006812  2  2E 2E 2A     
006815  2  55 75 55 55                  .byte $55,$75,$55,$55,$55,$75,$55
006819  2  55 75 55     
00681C  2  2A 2B 2A 2A                  .byte $2a,$2b,$2a,$2a,$2a,$2b,$2a
006820  2  2A 2B 2A     
006823  2               
006823  2  55 75 55 55  splash_f3_1     .byte $55,$75,$55,$55,$55,$75,$55
006827  2  55 75 55     
00682A  2  2A 2B 2A 2A                  .byte $2a,$2b,$2a,$2a,$2a,$2b,$2a
00682E  2  2A 2B 2A     
006831  2  55 55 5D 55                  .byte $55,$55,$5d,$55,$5d,$5d,$55
006835  2  5D 5D 55     
006838  2  2A 6A 2A 2A                  .byte $2a,$6a,$2a,$2a,$2a,$6a,$2a
00683C  2  2A 6A 2A     
00683F  2  55 57 55 55                  .byte $55,$57,$55,$55,$55,$57,$55
006843  2  55 57 55     
006846  2               
006846  2  2A 6A 2A 2A  splash_f3_2     .byte $2a,$6a,$2a,$2a,$2a,$6a,$2a
00684A  2  2A 6A 2A     
00684D  2  55 57 55 55                  .byte $55,$57,$55,$55,$55,$57,$55
006851  2  55 57 55     
006854  2  2A 2A 3A 2A                  .byte $2a,$2a,$3a,$2a,$3a,$3a,$2a
006858  2  3A 3A 2A     
00685B  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
00685F  2  55 55 55     
006862  2  2A 2F 2A 2A                  .byte $2a,$2f,$2a,$2a,$2a,$2f,$2a
006866  2  2A 2F 2A     
006869  2               
006869  2  55 55 55 55  splash_f3_3     .byte $55,$55,$55,$55,$55,$55,$55
00686D  2  55 55 55     
006870  2  2A 2F 2A 2A                  .byte $2a,$2f,$2a,$2a,$2a,$2f,$2a
006874  2  2A 2F 2A     
006877  2  55 55 75 55                  .byte $55,$55,$75,$55,$75,$75,$55
00687B  2  75 75 55     
00687E  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006882  2  2A 2A 2A     
006885  2  55 5F 55 55                  .byte $55,$5f,$55,$55,$55,$5f,$55
006889  2  55 5F 55     
00688C  2               
00688C  2  2A 2A 2A 2A  splash_f3_4     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
006890  2  2A 2A 2A     
006893  2  55 5F 55 55                  .byte $55,$5f,$55,$55,$55,$5f,$55
006897  2  55 5F 55     
00689A  2  2A 2A 6A 2A                  .byte $2a,$2a,$6a,$2a,$6a,$6a,$2a
00689E  2  6A 6A 2A     
0068A1  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0068A5  2  55 55 55     
0068A8  2  2A 3E 2A 2A                  .byte $2a,$3e,$2a,$2a,$2a,$3e,$2a
0068AC  2  2A 3E 2A     
0068AF  2               
0068AF  2  55 55 55 55  splash_f3_5     .byte $55,$55,$55,$55,$55,$55,$55
0068B3  2  55 55 55     
0068B6  2  2A 3E 2A 2A                  .byte $2a,$3e,$2a,$2a,$2a,$3e,$2a
0068BA  2  2A 3E 2A     
0068BD  2  55 55 55 55                  .byte $55,$55,$55,$55,$55,$55,$55
0068C1  2  55 55 55     
0068C4  2  2A 2A 2B 2A                  .byte $2a,$2a,$2b,$2a,$2b,$2b,$2a
0068C8  2  2B 2B 2A     
0068CB  2  55 7D 55 55                  .byte $55,$7d,$55,$55,$55,$7d,$55
0068CF  2  55 7D 55     
0068D2  2               
0068D2  2  2A 2A 2A 2A  splash_f3_6     .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0068D6  2  2A 2A 2A     
0068D9  2  55 7D 55 55                  .byte $55,$7d,$55,$55,$55,$7d,$55
0068DD  2  55 7D 55     
0068E0  2  2A 2A 2A 2A                  .byte $2a,$2a,$2a,$2a,$2a,$2a,$2a
0068E4  2  2A 2A 2A     
0068E7  2  55 55 57 55                  .byte $55,$55,$57,$55,$57,$57,$55
0068EB  2  57 57 55     
0068EE  2  2A 7A 2A 2A                  .byte $2a,$7a,$2a,$2a,$2a,$7a,$2a
0068F2  2  2A 7A 2A     
0068F5  2               
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %........####....####............
0068F5  2                               ; .byte %####....................####....
0068F5  2                               ; .byte %............####................
0068F5  2                               ; .byte %........############............
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %####........####........####....		; splash 1
0068F5  2               
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %....####............####........
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %............####................
0068F5  2                               ; .byte %####........####........####....
0068F5  2                               ; .byte %....####............####........
0068F5  2                               ; .byte %............####................
0068F5  2                               ; .byte %............####................		; splash 2
0068F5  2               
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %####....................####....
0068F5  2                               ; .byte %............####................
0068F5  2                               ; .byte %................................
0068F5  2                               ; .byte %............####................
0068F5  2                               ; .byte %####........####........####....
0068F5  2                               ; .byte %................................		; splash 3
0068F5  2               
0068F5  2                               ; .byte %....####################........
0068F5  2                               ; .byte %....################............
0068F5  2                               ; .byte %####....####....####....####....
0068F5  2                               ; .byte %####....####....####....####....
0068F5  2                               ; .byte %####....####....####....####....
0068F5  2                               ; .byte %####....####....####....####....
0068F5  2                               ; .byte %####....####....####....####....
0068F5  2                               ; .byte %############################....
0068F5  2               
0068F5  1                               .include "score.s"
0068F5  2               
0068F5  2               scoreLine0      =   hiresLine1
0068F5  2               scoreLine1      =   hiresLine2
0068F5  2               scoreLine2      =   hiresLine3
0068F5  2               scoreLine3      =   hiresLine4
0068F5  2               scoreLine4      =   hiresLine5
0068F5  2               scoreLine5      =   hiresLine6
0068F5  2               scoreLine6      =   hiresLine7
0068F5  2               scoreLine7      =   hiresLine8
0068F5  2               
0068F5  2  4B           digit_x         .byte 0*18+scoreLeft
0068F6  2  5D                           .byte 1*18+scoreLeft
0068F7  2  6F                           .byte 2*18+scoreLeft
0068F8  2  81                           .byte 3*18+scoreLeft
0068F9  2  93                           .byte 4*18+scoreLeft
0068FA  2  A5                           .byte 5*18+scoreLeft
0068FB  2               
0068FB  2               draw_score
0068FB  2               ; expand score into new_digits buffer
0068FB  2  A2 00                        ldx #0
0068FD  2  A0 00                        ldy #0
0068FF  2  B9 A3 00     @1              lda player_score,y
006902  2  C8                           iny
006903  2  48                           pha
006904  2  4A                           lsr
006905  2  4A                           lsr
006906  2  4A                           lsr
006907  2  4A                           lsr
006908  2  95 7A                        sta new_digits,x
00690A  2  E8                           inx
00690B  2  68                           pla
00690C  2  29 0F                        and #$0f
00690E  2  95 7A                        sta new_digits,x
006910  2  E8                           inx
006911  2  E0 06                        cpx #6
006913  2  D0 EA                        bne @1
006915  2               
006915  2               ; clear leading zeroes
006915  2  A2 00                        ldx #0
006917  2  A9 0A                        lda #$0a
006919  2  B4 7A        @2              ldy new_digits,x
00691B  2  D0 07                        bne @3
00691D  2  95 7A                        sta new_digits,x
00691F  2  E8                           inx
006920  2  E0 05                        cpx #5
006922  2  D0 F5                        bne @2
006924  2               @3
006924  2               ; draw first changed digit, but always draw something
006924  2  A2 FF                        ldx #$ff
006926  2  E8           @4              inx
006927  2  B5 7A                        lda new_digits,x
006929  2  D5 74                        cmp cur_digits,x
00692B  2  D0 04                        bne @5
00692D  2  E0 05                        cpx #5
00692F  2  D0 F5                        bne @4
006931  2               
006931  2  95 74        @5              sta cur_digits,x
006933  2  0A                           asl
006934  2  0A                           asl
006935  2  0A                           asl                     ; clc
006936  2  85 00                        sta temp                ; temp = digit * 8
006938  2  BC F5 68                     ldy digit_x,x           ; y = actual x coordinate
00693B  2  A5 A0                        lda player_num
00693D  2  F0 01                        beq @6
00693F  2  C8                           iny                     ; shift right 1 pixel for player 2
006940  2  BE 00 78     @6              ldx mod7,y              ; x = shift
006943  2  BD 40 6A                     lda digit_lmasks,x
006946  2  85 70                        sta lmask
006948  2  BD 47 6A                     lda digit_rmasks,x
00694B  2  85 71                        sta rmask
00694D  2  8A                           txa
00694E  2               ;               clc
00694E  2  65 00                        adc temp                ; shift + digit * 8
006950  2  AA                           tax
006951  2  BD 4E 6A                     lda digits_lo,x
006954  2  85 72                        sta data_ptr
006956  2  BD A5 6A                     lda digits_hi,x
006959  2  85 73                        sta data_ptr_h
00695B  2  BE 00 77                     ldx div7,y              ; x = column
00695E  2  A0 00                        ldy #0
006960  2               
006960  2  BD 00 24                     lda scoreLine0+0,x
006963  2  25 70                        and lmask
006965  2  11 72                        ora (data_ptr),y
006967  2  9D 00 24                     sta scoreLine0+0,x
00696A  2  C8                           iny
00696B  2  B1 72                        lda (data_ptr),y
00696D  2  9D 01 24                     sta scoreLine0+1,x
006970  2  C8                           iny
006971  2  BD 02 24                     lda scoreLine0+2,x
006974  2  25 71                        and rmask
006976  2  11 72                        ora (data_ptr),y
006978  2  9D 02 24                     sta scoreLine0+2,x
00697B  2  C8                           iny
00697C  2               
00697C  2  BD 00 28                     lda scoreLine1+0,x
00697F  2  25 70                        and lmask
006981  2  11 72                        ora (data_ptr),y
006983  2  9D 00 28                     sta scoreLine1+0,x
006986  2  C8                           iny
006987  2  B1 72                        lda (data_ptr),y
006989  2  9D 01 28                     sta scoreLine1+1,x
00698C  2  C8                           iny
00698D  2  BD 02 28                     lda scoreLine1+2,x
006990  2  25 71                        and rmask
006992  2  11 72                        ora (data_ptr),y
006994  2  9D 02 28                     sta scoreLine1+2,x
006997  2  C8                           iny
006998  2               
006998  2  BD 00 2C                     lda scoreLine2+0,x
00699B  2  25 70                        and lmask
00699D  2  11 72                        ora (data_ptr),y
00699F  2  9D 00 2C                     sta scoreLine2+0,x
0069A2  2  C8                           iny
0069A3  2  B1 72                        lda (data_ptr),y
0069A5  2  9D 01 2C                     sta scoreLine2+1,x
0069A8  2  C8                           iny
0069A9  2  BD 02 2C                     lda scoreLine2+2,x
0069AC  2  25 71                        and rmask
0069AE  2  11 72                        ora (data_ptr),y
0069B0  2  9D 02 2C                     sta scoreLine2+2,x
0069B3  2  C8                           iny
0069B4  2               
0069B4  2  BD 00 30                     lda scoreLine3+0,x
0069B7  2  25 70                        and lmask
0069B9  2  11 72                        ora (data_ptr),y
0069BB  2  9D 00 30                     sta scoreLine3+0,x
0069BE  2  C8                           iny
0069BF  2  B1 72                        lda (data_ptr),y
0069C1  2  9D 01 30                     sta scoreLine3+1,x
0069C4  2  C8                           iny
0069C5  2  BD 02 30                     lda scoreLine3+2,x
0069C8  2  25 71                        and rmask
0069CA  2  11 72                        ora (data_ptr),y
0069CC  2  9D 02 30                     sta scoreLine3+2,x
0069CF  2  C8                           iny
0069D0  2               
0069D0  2  BD 00 34                     lda scoreLine4+0,x
0069D3  2  25 70                        and lmask
0069D5  2  11 72                        ora (data_ptr),y
0069D7  2  9D 00 34                     sta scoreLine4+0,x
0069DA  2  C8                           iny
0069DB  2  B1 72                        lda (data_ptr),y
0069DD  2  9D 01 34                     sta scoreLine4+1,x
0069E0  2  C8                           iny
0069E1  2  BD 02 34                     lda scoreLine4+2,x
0069E4  2  25 71                        and rmask
0069E6  2  11 72                        ora (data_ptr),y
0069E8  2  9D 02 34                     sta scoreLine4+2,x
0069EB  2  C8                           iny
0069EC  2               
0069EC  2  BD 00 38                     lda scoreLine5+0,x
0069EF  2  25 70                        and lmask
0069F1  2  11 72                        ora (data_ptr),y
0069F3  2  9D 00 38                     sta scoreLine5+0,x
0069F6  2  C8                           iny
0069F7  2  B1 72                        lda (data_ptr),y
0069F9  2  9D 01 38                     sta scoreLine5+1,x
0069FC  2  C8                           iny
0069FD  2  BD 02 38                     lda scoreLine5+2,x
006A00  2  25 71                        and rmask
006A02  2  11 72                        ora (data_ptr),y
006A04  2  9D 02 38                     sta scoreLine5+2,x
006A07  2  C8                           iny
006A08  2               
006A08  2  BD 00 3C                     lda scoreLine6+0,x
006A0B  2  25 70                        and lmask
006A0D  2  11 72                        ora (data_ptr),y
006A0F  2  9D 00 3C                     sta scoreLine6+0,x
006A12  2  C8                           iny
006A13  2  B1 72                        lda (data_ptr),y
006A15  2  9D 01 3C                     sta scoreLine6+1,x
006A18  2  C8                           iny
006A19  2  BD 02 3C                     lda scoreLine6+2,x
006A1C  2  25 71                        and rmask
006A1E  2  11 72                        ora (data_ptr),y
006A20  2  9D 02 3C                     sta scoreLine6+2,x
006A23  2  C8                           iny
006A24  2               
006A24  2  BD 80 20                     lda scoreLine7+0,x
006A27  2  25 70                        and lmask
006A29  2  11 72                        ora (data_ptr),y
006A2B  2  9D 80 20                     sta scoreLine7+0,x
006A2E  2  C8                           iny
006A2F  2  B1 72                        lda (data_ptr),y
006A31  2  9D 81 20                     sta scoreLine7+1,x
006A34  2  C8                           iny
006A35  2  BD 82 20                     lda scoreLine7+2,x
006A38  2  25 71                        and rmask
006A3A  2  11 72                        ora (data_ptr),y
006A3C  2  9D 82 20                     sta scoreLine7+2,x
006A3F  2  60                           rts
006A40  2               
006A40  2  00           digit_lmasks    .byte %00000000
006A41  2  01                           .byte %00000001
006A42  2  03                           .byte %00000011
006A43  2  07                           .byte %00000111
006A44  2  0F                           .byte %00001111
006A45  2  1F                           .byte %00011111
006A46  2  3F                           .byte %00111111
006A47  2               
006A47  2  7E           digit_rmasks    .byte %01111110
006A48  2  7C                           .byte %01111100
006A49  2  78                           .byte %01111000
006A4A  2  70                           .byte %01110000
006A4B  2  60                           .byte %01100000
006A4C  2  40                           .byte %01000000
006A4D  2  00                           .byte %00000000
006A4E  2               
006A4E  2  FC           digits_lo       .byte <digits0_0
006A4F  2  14                           .byte <digits0_1
006A50  2  2C                           .byte <digits0_2
006A51  2  44                           .byte <digits0_3
006A52  2  5C                           .byte <digits0_4
006A53  2  74                           .byte <digits0_5
006A54  2  8C                           .byte <digits0_6
006A55  2  00                           .byte 0
006A56  2  A4                           .byte <digits1_0
006A57  2  BC                           .byte <digits1_1
006A58  2  D4                           .byte <digits1_2
006A59  2  EC                           .byte <digits1_3
006A5A  2  04                           .byte <digits1_4
006A5B  2  1C                           .byte <digits1_5
006A5C  2  34                           .byte <digits1_6
006A5D  2  00                           .byte 0
006A5E  2  4C                           .byte <digits2_0
006A5F  2  64                           .byte <digits2_1
006A60  2  7C                           .byte <digits2_2
006A61  2  94                           .byte <digits2_3
006A62  2  AC                           .byte <digits2_4
006A63  2  C4                           .byte <digits2_5
006A64  2  DC                           .byte <digits2_6
006A65  2  00                           .byte 0
006A66  2  F4                           .byte <digits3_0
006A67  2  0C                           .byte <digits3_1
006A68  2  24                           .byte <digits3_2
006A69  2  3C                           .byte <digits3_3
006A6A  2  54                           .byte <digits3_4
006A6B  2  6C                           .byte <digits3_5
006A6C  2  84                           .byte <digits3_6
006A6D  2  00                           .byte 0
006A6E  2  9C                           .byte <digits4_0
006A6F  2  B4                           .byte <digits4_1
006A70  2  CC                           .byte <digits4_2
006A71  2  E4                           .byte <digits4_3
006A72  2  FC                           .byte <digits4_4
006A73  2  14                           .byte <digits4_5
006A74  2  2C                           .byte <digits4_6
006A75  2  00                           .byte 0
006A76  2  44                           .byte <digits5_0
006A77  2  5C                           .byte <digits5_1
006A78  2  74                           .byte <digits5_2
006A79  2  8C                           .byte <digits5_3
006A7A  2  A4                           .byte <digits5_4
006A7B  2  BC                           .byte <digits5_5
006A7C  2  D4                           .byte <digits5_6
006A7D  2  00                           .byte 0
006A7E  2  EC                           .byte <digits6_0
006A7F  2  04                           .byte <digits6_1
006A80  2  1C                           .byte <digits6_2
006A81  2  34                           .byte <digits6_3
006A82  2  4C                           .byte <digits6_4
006A83  2  64                           .byte <digits6_5
006A84  2  7C                           .byte <digits6_6
006A85  2  00                           .byte 0
006A86  2  94                           .byte <digits7_0
006A87  2  AC                           .byte <digits7_1
006A88  2  C4                           .byte <digits7_2
006A89  2  DC                           .byte <digits7_3
006A8A  2  F4                           .byte <digits7_4
006A8B  2  0C                           .byte <digits7_5
006A8C  2  24                           .byte <digits7_6
006A8D  2  00                           .byte 0
006A8E  2  3C                           .byte <digits8_0
006A8F  2  54                           .byte <digits8_1
006A90  2  6C                           .byte <digits8_2
006A91  2  84                           .byte <digits8_3
006A92  2  9C                           .byte <digits8_4
006A93  2  B4                           .byte <digits8_5
006A94  2  CC                           .byte <digits8_6
006A95  2  00                           .byte 0
006A96  2  E4                           .byte <digits9_0
006A97  2  FC                           .byte <digits9_1
006A98  2  14                           .byte <digits9_2
006A99  2  2C                           .byte <digits9_3
006A9A  2  44                           .byte <digits9_4
006A9B  2  5C                           .byte <digits9_5
006A9C  2  74                           .byte <digits9_6
006A9D  2  00                           .byte 0
006A9E  2  8C                           .byte <digitsX_0
006A9F  2  A4                           .byte <digitsX_1
006AA0  2  BC                           .byte <digitsX_2
006AA1  2  D4                           .byte <digitsX_3
006AA2  2  EC                           .byte <digitsX_4
006AA3  2  04                           .byte <digitsX_5
006AA4  2  1C                           .byte <digitsX_6
006AA5  2               ;               .byte 0
006AA5  2               
006AA5  2  6A           digits_hi       .byte >digits0_0
006AA6  2  6B                           .byte >digits0_1
006AA7  2  6B                           .byte >digits0_2
006AA8  2  6B                           .byte >digits0_3
006AA9  2  6B                           .byte >digits0_4
006AAA  2  6B                           .byte >digits0_5
006AAB  2  6B                           .byte >digits0_6
006AAC  2  00                           .byte 0
006AAD  2  6B                           .byte >digits1_0
006AAE  2  6B                           .byte >digits1_1
006AAF  2  6B                           .byte >digits1_2
006AB0  2  6B                           .byte >digits1_3
006AB1  2  6C                           .byte >digits1_4
006AB2  2  6C                           .byte >digits1_5
006AB3  2  6C                           .byte >digits1_6
006AB4  2  00                           .byte 0
006AB5  2  6C                           .byte >digits2_0
006AB6  2  6C                           .byte >digits2_1
006AB7  2  6C                           .byte >digits2_2
006AB8  2  6C                           .byte >digits2_3
006AB9  2  6C                           .byte >digits2_4
006ABA  2  6C                           .byte >digits2_5
006ABB  2  6C                           .byte >digits2_6
006ABC  2  00                           .byte 0
006ABD  2  6C                           .byte >digits3_0
006ABE  2  6D                           .byte >digits3_1
006ABF  2  6D                           .byte >digits3_2
006AC0  2  6D                           .byte >digits3_3
006AC1  2  6D                           .byte >digits3_4
006AC2  2  6D                           .byte >digits3_5
006AC3  2  6D                           .byte >digits3_6
006AC4  2  00                           .byte 0
006AC5  2  6D                           .byte >digits4_0
006AC6  2  6D                           .byte >digits4_1
006AC7  2  6D                           .byte >digits4_2
006AC8  2  6D                           .byte >digits4_3
006AC9  2  6D                           .byte >digits4_4
006ACA  2  6E                           .byte >digits4_5
006ACB  2  6E                           .byte >digits4_6
006ACC  2  00                           .byte 0
006ACD  2  6E                           .byte >digits5_0
006ACE  2  6E                           .byte >digits5_1
006ACF  2  6E                           .byte >digits5_2
006AD0  2  6E                           .byte >digits5_3
006AD1  2  6E                           .byte >digits5_4
006AD2  2  6E                           .byte >digits5_5
006AD3  2  6E                           .byte >digits5_6
006AD4  2  00                           .byte 0
006AD5  2  6E                           .byte >digits6_0
006AD6  2  6F                           .byte >digits6_1
006AD7  2  6F                           .byte >digits6_2
006AD8  2  6F                           .byte >digits6_3
006AD9  2  6F                           .byte >digits6_4
006ADA  2  6F                           .byte >digits6_5
006ADB  2  6F                           .byte >digits6_6
006ADC  2  00                           .byte 0
006ADD  2  6F                           .byte >digits7_0
006ADE  2  6F                           .byte >digits7_1
006ADF  2  6F                           .byte >digits7_2
006AE0  2  6F                           .byte >digits7_3
006AE1  2  6F                           .byte >digits7_4
006AE2  2  70                           .byte >digits7_5
006AE3  2  70                           .byte >digits7_6
006AE4  2  00                           .byte 0
006AE5  2  70                           .byte >digits8_0
006AE6  2  70                           .byte >digits8_1
006AE7  2  70                           .byte >digits8_2
006AE8  2  70                           .byte >digits8_3
006AE9  2  70                           .byte >digits8_4
006AEA  2  70                           .byte >digits8_5
006AEB  2  70                           .byte >digits8_6
006AEC  2  00                           .byte 0
006AED  2  70                           .byte >digits9_0
006AEE  2  70                           .byte >digits9_1
006AEF  2  71                           .byte >digits9_2
006AF0  2  71                           .byte >digits9_3
006AF1  2  71                           .byte >digits9_4
006AF2  2  71                           .byte >digits9_5
006AF3  2  71                           .byte >digits9_6
006AF4  2  00                           .byte 0
006AF5  2  71                           .byte >digitsX_0
006AF6  2  71                           .byte >digitsX_1
006AF7  2  71                           .byte >digitsX_2
006AF8  2  71                           .byte >digitsX_3
006AF9  2  71                           .byte >digitsX_4
006AFA  2  72                           .byte >digitsX_5
006AFB  2  72                           .byte >digitsX_6
006AFC  2               ;               .byte 0
006AFC  2               
006AFC  2  AB F5 81     digits0_0       .byte $ab,$f5,$81
006AFF  2  EA D5 81                     .byte $ea,$d5,$81
006B02  2  EA D5 81                     .byte $ea,$d5,$81
006B05  2  EA D5 81                     .byte $ea,$d5,$81
006B08  2  EA D5 81                     .byte $ea,$d5,$81
006B0B  2  EA D5 81                     .byte $ea,$d5,$81
006B0E  2  EA D5 81                     .byte $ea,$d5,$81
006B11  2  AB F5 81                     .byte $ab,$f5,$81
006B14  2               
006B14  2  D6 EA 83     digits0_1       .byte $d6,$ea,$83
006B17  2  D4 AB 83                     .byte $d4,$ab,$83
006B1A  2  D4 AB 83                     .byte $d4,$ab,$83
006B1D  2  D4 AB 83                     .byte $d4,$ab,$83
006B20  2  D4 AB 83                     .byte $d4,$ab,$83
006B23  2  D4 AB 83                     .byte $d4,$ab,$83
006B26  2  D4 AB 83                     .byte $d4,$ab,$83
006B29  2  D6 EA 83                     .byte $d6,$ea,$83
006B2C  2               
006B2C  2  AC D5 87     digits0_2       .byte $ac,$d5,$87
006B2F  2  A8 D7 86                     .byte $a8,$d7,$86
006B32  2  A8 D7 86                     .byte $a8,$d7,$86
006B35  2  A8 D7 86                     .byte $a8,$d7,$86
006B38  2  A8 D7 86                     .byte $a8,$d7,$86
006B3B  2  A8 D7 86                     .byte $a8,$d7,$86
006B3E  2  A8 D7 86                     .byte $a8,$d7,$86
006B41  2  AC D5 87                     .byte $ac,$d5,$87
006B44  2               
006B44  2  D8 AA 8F     digits0_3       .byte $d8,$aa,$8f
006B47  2  D0 AE 8D                     .byte $d0,$ae,$8d
006B4A  2  D0 AE 8D                     .byte $d0,$ae,$8d
006B4D  2  D0 AE 8D                     .byte $d0,$ae,$8d
006B50  2  D0 AE 8D                     .byte $d0,$ae,$8d
006B53  2  D0 AE 8D                     .byte $d0,$ae,$8d
006B56  2  D0 AE 8D                     .byte $d0,$ae,$8d
006B59  2  D8 AA 8F                     .byte $d8,$aa,$8f
006B5C  2               
006B5C  2  B0 D5 9E     digits0_4       .byte $b0,$d5,$9e
006B5F  2  A0 DD 9A                     .byte $a0,$dd,$9a
006B62  2  A0 DD 9A                     .byte $a0,$dd,$9a
006B65  2  A0 DD 9A                     .byte $a0,$dd,$9a
006B68  2  A0 DD 9A                     .byte $a0,$dd,$9a
006B6B  2  A0 DD 9A                     .byte $a0,$dd,$9a
006B6E  2  A0 DD 9A                     .byte $a0,$dd,$9a
006B71  2  B0 D5 9E                     .byte $b0,$d5,$9e
006B74  2               
006B74  2  E0 AA BD     digits0_5       .byte $e0,$aa,$bd
006B77  2  C0 BA B5                     .byte $c0,$ba,$b5
006B7A  2  C0 BA B5                     .byte $c0,$ba,$b5
006B7D  2  C0 BA B5                     .byte $c0,$ba,$b5
006B80  2  C0 BA B5                     .byte $c0,$ba,$b5
006B83  2  C0 BA B5                     .byte $c0,$ba,$b5
006B86  2  C0 BA B5                     .byte $c0,$ba,$b5
006B89  2  E0 AA BD                     .byte $e0,$aa,$bd
006B8C  2               
006B8C  2  C0 D5 FA     digits0_6       .byte $c0,$d5,$fa
006B8F  2  80 F5 EA                     .byte $80,$f5,$ea
006B92  2  80 F5 EA                     .byte $80,$f5,$ea
006B95  2  80 F5 EA                     .byte $80,$f5,$ea
006B98  2  80 F5 EA                     .byte $80,$f5,$ea
006B9B  2  80 F5 EA                     .byte $80,$f5,$ea
006B9E  2  80 F5 EA                     .byte $80,$f5,$ea
006BA1  2  C0 D5 FA                     .byte $c0,$d5,$fa
006BA4  2               
006BA4  2  AF FD 81     digits1_0       .byte $af,$fd,$81
006BA7  2  AB FD 81                     .byte $ab,$fd,$81
006BAA  2  AF FD 81                     .byte $af,$fd,$81
006BAD  2  AF FD 81                     .byte $af,$fd,$81
006BB0  2  AF FD 81                     .byte $af,$fd,$81
006BB3  2  AF FD 81                     .byte $af,$fd,$81
006BB6  2  AF FD 81                     .byte $af,$fd,$81
006BB9  2  AB F5 81                     .byte $ab,$f5,$81
006BBC  2               
006BBC  2  DE FA 83     digits1_1       .byte $de,$fa,$83
006BBF  2  D6 FA 83                     .byte $d6,$fa,$83
006BC2  2  DE FA 83                     .byte $de,$fa,$83
006BC5  2  DE FA 83                     .byte $de,$fa,$83
006BC8  2  DE FA 83                     .byte $de,$fa,$83
006BCB  2  DE FA 83                     .byte $de,$fa,$83
006BCE  2  DE FA 83                     .byte $de,$fa,$83
006BD1  2  D6 EA 83                     .byte $d6,$ea,$83
006BD4  2               
006BD4  2  BC F5 87     digits1_2       .byte $bc,$f5,$87
006BD7  2  AC F5 87                     .byte $ac,$f5,$87
006BDA  2  BC F5 87                     .byte $bc,$f5,$87
006BDD  2  BC F5 87                     .byte $bc,$f5,$87
006BE0  2  BC F5 87                     .byte $bc,$f5,$87
006BE3  2  BC F5 87                     .byte $bc,$f5,$87
006BE6  2  BC F5 87                     .byte $bc,$f5,$87
006BE9  2  AC D5 87                     .byte $ac,$d5,$87
006BEC  2               
006BEC  2  F8 EA 8F     digits1_3       .byte $f8,$ea,$8f
006BEF  2  D8 EA 8F                     .byte $d8,$ea,$8f
006BF2  2  F8 EA 8F                     .byte $f8,$ea,$8f
006BF5  2  F8 EA 8F                     .byte $f8,$ea,$8f
006BF8  2  F8 EA 8F                     .byte $f8,$ea,$8f
006BFB  2  F8 EA 8F                     .byte $f8,$ea,$8f
006BFE  2  F8 EA 8F                     .byte $f8,$ea,$8f
006C01  2  D8 AA 8F                     .byte $d8,$aa,$8f
006C04  2               
006C04  2  F0 D5 9F     digits1_4       .byte $f0,$d5,$9f
006C07  2  B0 D5 9F                     .byte $b0,$d5,$9f
006C0A  2  F0 D5 9F                     .byte $f0,$d5,$9f
006C0D  2  F0 D5 9F                     .byte $f0,$d5,$9f
006C10  2  F0 D5 9F                     .byte $f0,$d5,$9f
006C13  2  F0 D5 9F                     .byte $f0,$d5,$9f
006C16  2  F0 D5 9F                     .byte $f0,$d5,$9f
006C19  2  B0 D5 9E                     .byte $b0,$d5,$9e
006C1C  2               
006C1C  2  E0 AB BF     digits1_5       .byte $e0,$ab,$bf
006C1F  2  E0 AA BF                     .byte $e0,$aa,$bf
006C22  2  E0 AB BF                     .byte $e0,$ab,$bf
006C25  2  E0 AB BF                     .byte $e0,$ab,$bf
006C28  2  E0 AB BF                     .byte $e0,$ab,$bf
006C2B  2  E0 AB BF                     .byte $e0,$ab,$bf
006C2E  2  E0 AB BF                     .byte $e0,$ab,$bf
006C31  2  E0 AA BD                     .byte $e0,$aa,$bd
006C34  2               
006C34  2  C0 D7 FE     digits1_6       .byte $c0,$d7,$fe
006C37  2  C0 D5 FE                     .byte $c0,$d5,$fe
006C3A  2  C0 D7 FE                     .byte $c0,$d7,$fe
006C3D  2  C0 D7 FE                     .byte $c0,$d7,$fe
006C40  2  C0 D7 FE                     .byte $c0,$d7,$fe
006C43  2  C0 D7 FE                     .byte $c0,$d7,$fe
006C46  2  C0 D7 FE                     .byte $c0,$d7,$fe
006C49  2  C0 D5 FA                     .byte $c0,$d5,$fa
006C4C  2               
006C4C  2  AB F5 81     digits2_0       .byte $ab,$f5,$81
006C4F  2  EA D5 81                     .byte $ea,$d5,$81
006C52  2  FF D5 81                     .byte $ff,$d5,$81
006C55  2  FF D5 81                     .byte $ff,$d5,$81
006C58  2  AB F5 81                     .byte $ab,$f5,$81
006C5B  2  EA FF 81                     .byte $ea,$ff,$81
006C5E  2  EA FF 81                     .byte $ea,$ff,$81
006C61  2  AA D5 81                     .byte $aa,$d5,$81
006C64  2               
006C64  2  D6 EA 83     digits2_1       .byte $d6,$ea,$83
006C67  2  D4 AB 83                     .byte $d4,$ab,$83
006C6A  2  FE AB 83                     .byte $fe,$ab,$83
006C6D  2  FE AB 83                     .byte $fe,$ab,$83
006C70  2  D6 EA 83                     .byte $d6,$ea,$83
006C73  2  D4 FF 83                     .byte $d4,$ff,$83
006C76  2  D4 FF 83                     .byte $d4,$ff,$83
006C79  2  D4 AA 83                     .byte $d4,$aa,$83
006C7C  2               
006C7C  2  AC D5 87     digits2_2       .byte $ac,$d5,$87
006C7F  2  A8 D7 86                     .byte $a8,$d7,$86
006C82  2  FC D7 86                     .byte $fc,$d7,$86
006C85  2  FC D7 86                     .byte $fc,$d7,$86
006C88  2  AC D5 87                     .byte $ac,$d5,$87
006C8B  2  A8 FF 87                     .byte $a8,$ff,$87
006C8E  2  A8 FF 87                     .byte $a8,$ff,$87
006C91  2  A8 D5 86                     .byte $a8,$d5,$86
006C94  2               
006C94  2  D8 AA 8F     digits2_3       .byte $d8,$aa,$8f
006C97  2  D0 AE 8D                     .byte $d0,$ae,$8d
006C9A  2  F8 AF 8D                     .byte $f8,$af,$8d
006C9D  2  F8 AF 8D                     .byte $f8,$af,$8d
006CA0  2  D8 AA 8F                     .byte $d8,$aa,$8f
006CA3  2  D0 FE 8F                     .byte $d0,$fe,$8f
006CA6  2  D0 FE 8F                     .byte $d0,$fe,$8f
006CA9  2  D0 AA 8D                     .byte $d0,$aa,$8d
006CAC  2               
006CAC  2  B0 D5 9E     digits2_4       .byte $b0,$d5,$9e
006CAF  2  A0 DD 9A                     .byte $a0,$dd,$9a
006CB2  2  F0 DF 9A                     .byte $f0,$df,$9a
006CB5  2  F0 DF 9A                     .byte $f0,$df,$9a
006CB8  2  B0 D5 9E                     .byte $b0,$d5,$9e
006CBB  2  A0 FD 9F                     .byte $a0,$fd,$9f
006CBE  2  A0 FD 9F                     .byte $a0,$fd,$9f
006CC1  2  A0 D5 9A                     .byte $a0,$d5,$9a
006CC4  2               
006CC4  2  E0 AA BD     digits2_5       .byte $e0,$aa,$bd
006CC7  2  C0 BA B5                     .byte $c0,$ba,$b5
006CCA  2  E0 BF B5                     .byte $e0,$bf,$b5
006CCD  2  E0 BF B5                     .byte $e0,$bf,$b5
006CD0  2  E0 AA BD                     .byte $e0,$aa,$bd
006CD3  2  C0 FA BF                     .byte $c0,$fa,$bf
006CD6  2  C0 FA BF                     .byte $c0,$fa,$bf
006CD9  2  C0 AA B5                     .byte $c0,$aa,$b5
006CDC  2               
006CDC  2  C0 D5 FA     digits2_6       .byte $c0,$d5,$fa
006CDF  2  80 F5 EA                     .byte $80,$f5,$ea
006CE2  2  C0 FF EA                     .byte $c0,$ff,$ea
006CE5  2  C0 FF EA                     .byte $c0,$ff,$ea
006CE8  2  C0 D5 FA                     .byte $c0,$d5,$fa
006CEB  2  80 F5 FF                     .byte $80,$f5,$ff
006CEE  2  80 F5 FF                     .byte $80,$f5,$ff
006CF1  2  80 D5 EA                     .byte $80,$d5,$ea
006CF4  2               
006CF4  2  AB F5 81     digits3_0       .byte $ab,$f5,$81
006CF7  2  EA D5 81                     .byte $ea,$d5,$81
006CFA  2  FF D5 81                     .byte $ff,$d5,$81
006CFD  2  BF D5 81                     .byte $bf,$d5,$81
006D00  2  BF F5 81                     .byte $bf,$f5,$81
006D03  2  FF D5 81                     .byte $ff,$d5,$81
006D06  2  EA D5 81                     .byte $ea,$d5,$81
006D09  2  AB F5 81                     .byte $ab,$f5,$81
006D0C  2               
006D0C  2  D6 EA 83     digits3_1       .byte $d6,$ea,$83
006D0F  2  D4 AB 83                     .byte $d4,$ab,$83
006D12  2  FE AB 83                     .byte $fe,$ab,$83
006D15  2  FE AA 83                     .byte $fe,$aa,$83
006D18  2  FE EA 83                     .byte $fe,$ea,$83
006D1B  2  FE AB 83                     .byte $fe,$ab,$83
006D1E  2  D4 AB 83                     .byte $d4,$ab,$83
006D21  2  D6 EA 83                     .byte $d6,$ea,$83
006D24  2               
006D24  2  AC D5 87     digits3_2       .byte $ac,$d5,$87
006D27  2  A8 D7 86                     .byte $a8,$d7,$86
006D2A  2  FC D7 86                     .byte $fc,$d7,$86
006D2D  2  FC D5 86                     .byte $fc,$d5,$86
006D30  2  FC D5 87                     .byte $fc,$d5,$87
006D33  2  FC D7 86                     .byte $fc,$d7,$86
006D36  2  A8 D7 86                     .byte $a8,$d7,$86
006D39  2  AC D5 87                     .byte $ac,$d5,$87
006D3C  2               
006D3C  2  D8 AA 8F     digits3_3       .byte $d8,$aa,$8f
006D3F  2  D0 AE 8D                     .byte $d0,$ae,$8d
006D42  2  F8 AF 8D                     .byte $f8,$af,$8d
006D45  2  F8 AB 8D                     .byte $f8,$ab,$8d
006D48  2  F8 AB 8F                     .byte $f8,$ab,$8f
006D4B  2  F8 AF 8D                     .byte $f8,$af,$8d
006D4E  2  D0 AE 8D                     .byte $d0,$ae,$8d
006D51  2  D8 AA 8F                     .byte $d8,$aa,$8f
006D54  2               
006D54  2  B0 D5 9E     digits3_4       .byte $b0,$d5,$9e
006D57  2  A0 DD 9A                     .byte $a0,$dd,$9a
006D5A  2  F0 DF 9A                     .byte $f0,$df,$9a
006D5D  2  F0 D7 9A                     .byte $f0,$d7,$9a
006D60  2  F0 D7 9E                     .byte $f0,$d7,$9e
006D63  2  F0 DF 9A                     .byte $f0,$df,$9a
006D66  2  A0 DD 9A                     .byte $a0,$dd,$9a
006D69  2  B0 D5 9E                     .byte $b0,$d5,$9e
006D6C  2               
006D6C  2  E0 AA BD     digits3_5       .byte $e0,$aa,$bd
006D6F  2  C0 BA B5                     .byte $c0,$ba,$b5
006D72  2  E0 BF B5                     .byte $e0,$bf,$b5
006D75  2  E0 AF B5                     .byte $e0,$af,$b5
006D78  2  E0 AF BD                     .byte $e0,$af,$bd
006D7B  2  E0 BF B5                     .byte $e0,$bf,$b5
006D7E  2  C0 BA B5                     .byte $c0,$ba,$b5
006D81  2  E0 AA BD                     .byte $e0,$aa,$bd
006D84  2               
006D84  2  C0 D5 FA     digits3_6       .byte $c0,$d5,$fa
006D87  2  80 F5 EA                     .byte $80,$f5,$ea
006D8A  2  C0 FF EA                     .byte $c0,$ff,$ea
006D8D  2  C0 DF EA                     .byte $c0,$df,$ea
006D90  2  C0 DF FA                     .byte $c0,$df,$fa
006D93  2  C0 FF EA                     .byte $c0,$ff,$ea
006D96  2  80 F5 EA                     .byte $80,$f5,$ea
006D99  2  C0 D5 FA                     .byte $c0,$d5,$fa
006D9C  2               
006D9C  2  BF D5 81     digits4_0       .byte $bf,$d5,$81
006D9F  2  AF D5 81                     .byte $af,$d5,$81
006DA2  2  EB D5 81                     .byte $eb,$d5,$81
006DA5  2  FA D5 81                     .byte $fa,$d5,$81
006DA8  2  AA D5 80                     .byte $aa,$d5,$80
006DAB  2  FF D5 81                     .byte $ff,$d5,$81
006DAE  2  FF D5 81                     .byte $ff,$d5,$81
006DB1  2  FF D5 81                     .byte $ff,$d5,$81
006DB4  2               
006DB4  2  FE AA 83     digits4_1       .byte $fe,$aa,$83
006DB7  2  DE AA 83                     .byte $de,$aa,$83
006DBA  2  D6 AB 83                     .byte $d6,$ab,$83
006DBD  2  F4 AB 83                     .byte $f4,$ab,$83
006DC0  2  D4 AA 81                     .byte $d4,$aa,$81
006DC3  2  FE AB 83                     .byte $fe,$ab,$83
006DC6  2  FE AB 83                     .byte $fe,$ab,$83
006DC9  2  FE AB 83                     .byte $fe,$ab,$83
006DCC  2               
006DCC  2  FC D5 86     digits4_2       .byte $fc,$d5,$86
006DCF  2  BC D5 86                     .byte $bc,$d5,$86
006DD2  2  AC D7 86                     .byte $ac,$d7,$86
006DD5  2  E8 D7 86                     .byte $e8,$d7,$86
006DD8  2  A8 D5 82                     .byte $a8,$d5,$82
006DDB  2  FC D7 86                     .byte $fc,$d7,$86
006DDE  2  FC D7 86                     .byte $fc,$d7,$86
006DE1  2  FC D7 86                     .byte $fc,$d7,$86
006DE4  2               
006DE4  2  F8 AB 8D     digits4_3       .byte $f8,$ab,$8d
006DE7  2  F8 AA 8D                     .byte $f8,$aa,$8d
006DEA  2  D8 AE 8D                     .byte $d8,$ae,$8d
006DED  2  D0 AF 8D                     .byte $d0,$af,$8d
006DF0  2  D0 AA 85                     .byte $d0,$aa,$85
006DF3  2  F8 AF 8D                     .byte $f8,$af,$8d
006DF6  2  F8 AF 8D                     .byte $f8,$af,$8d
006DF9  2  F8 AF 8D                     .byte $f8,$af,$8d
006DFC  2               
006DFC  2  F0 D7 9A     digits4_4       .byte $f0,$d7,$9a
006DFF  2  F0 D5 9A                     .byte $f0,$d5,$9a
006E02  2  B0 DD 9A                     .byte $b0,$dd,$9a
006E05  2  A0 DF 9A                     .byte $a0,$df,$9a
006E08  2  A0 D5 8A                     .byte $a0,$d5,$8a
006E0B  2  F0 DF 9A                     .byte $f0,$df,$9a
006E0E  2  F0 DF 9A                     .byte $f0,$df,$9a
006E11  2  F0 DF 9A                     .byte $f0,$df,$9a
006E14  2               
006E14  2  E0 AF B5     digits4_5       .byte $e0,$af,$b5
006E17  2  E0 AB B5                     .byte $e0,$ab,$b5
006E1A  2  E0 BA B5                     .byte $e0,$ba,$b5
006E1D  2  C0 BE B5                     .byte $c0,$be,$b5
006E20  2  C0 AA 95                     .byte $c0,$aa,$95
006E23  2  E0 BF B5                     .byte $e0,$bf,$b5
006E26  2  E0 BF B5                     .byte $e0,$bf,$b5
006E29  2  E0 BF B5                     .byte $e0,$bf,$b5
006E2C  2               
006E2C  2  C0 DF EA     digits4_6       .byte $c0,$df,$ea
006E2F  2  C0 D7 EA                     .byte $c0,$d7,$ea
006E32  2  C0 F5 EA                     .byte $c0,$f5,$ea
006E35  2  80 FD EA                     .byte $80,$fd,$ea
006E38  2  80 D5 AA                     .byte $80,$d5,$aa
006E3B  2  C0 FF EA                     .byte $c0,$ff,$ea
006E3E  2  C0 FF EA                     .byte $c0,$ff,$ea
006E41  2  C0 FF EA                     .byte $c0,$ff,$ea
006E44  2               
006E44  2  AA D5 81     digits5_0       .byte $aa,$d5,$81
006E47  2  EA FF 81                     .byte $ea,$ff,$81
006E4A  2  EA FF 81                     .byte $ea,$ff,$81
006E4D  2  AA F5 81                     .byte $aa,$f5,$81
006E50  2  FF D5 81                     .byte $ff,$d5,$81
006E53  2  FF D5 81                     .byte $ff,$d5,$81
006E56  2  FA D5 81                     .byte $fa,$d5,$81
006E59  2  AA F5 81                     .byte $aa,$f5,$81
006E5C  2               
006E5C  2  D4 AA 83     digits5_1       .byte $d4,$aa,$83
006E5F  2  D4 FF 83                     .byte $d4,$ff,$83
006E62  2  D4 FF 83                     .byte $d4,$ff,$83
006E65  2  D4 EA 83                     .byte $d4,$ea,$83
006E68  2  FE AB 83                     .byte $fe,$ab,$83
006E6B  2  FE AB 83                     .byte $fe,$ab,$83
006E6E  2  F4 AB 83                     .byte $f4,$ab,$83
006E71  2  D4 EA 83                     .byte $d4,$ea,$83
006E74  2               
006E74  2  A8 D5 86     digits5_2       .byte $a8,$d5,$86
006E77  2  A8 FF 87                     .byte $a8,$ff,$87
006E7A  2  A8 FF 87                     .byte $a8,$ff,$87
006E7D  2  A8 D5 87                     .byte $a8,$d5,$87
006E80  2  FC D7 86                     .byte $fc,$d7,$86
006E83  2  FC D7 86                     .byte $fc,$d7,$86
006E86  2  E8 D7 86                     .byte $e8,$d7,$86
006E89  2  A8 D5 87                     .byte $a8,$d5,$87
006E8C  2               
006E8C  2  D0 AA 8D     digits5_3       .byte $d0,$aa,$8d
006E8F  2  D0 FE 8F                     .byte $d0,$fe,$8f
006E92  2  D0 FE 8F                     .byte $d0,$fe,$8f
006E95  2  D0 AA 8F                     .byte $d0,$aa,$8f
006E98  2  F8 AF 8D                     .byte $f8,$af,$8d
006E9B  2  F8 AF 8D                     .byte $f8,$af,$8d
006E9E  2  D0 AF 8D                     .byte $d0,$af,$8d
006EA1  2  D0 AA 8F                     .byte $d0,$aa,$8f
006EA4  2               
006EA4  2  A0 D5 9A     digits5_4       .byte $a0,$d5,$9a
006EA7  2  A0 FD 9F                     .byte $a0,$fd,$9f
006EAA  2  A0 FD 9F                     .byte $a0,$fd,$9f
006EAD  2  A0 D5 9E                     .byte $a0,$d5,$9e
006EB0  2  F0 DF 9A                     .byte $f0,$df,$9a
006EB3  2  F0 DF 9A                     .byte $f0,$df,$9a
006EB6  2  A0 DF 9A                     .byte $a0,$df,$9a
006EB9  2  A0 D5 9E                     .byte $a0,$d5,$9e
006EBC  2               
006EBC  2  C0 AA B5     digits5_5       .byte $c0,$aa,$b5
006EBF  2  C0 FA BF                     .byte $c0,$fa,$bf
006EC2  2  C0 FA BF                     .byte $c0,$fa,$bf
006EC5  2  C0 AA BD                     .byte $c0,$aa,$bd
006EC8  2  E0 BF B5                     .byte $e0,$bf,$b5
006ECB  2  E0 BF B5                     .byte $e0,$bf,$b5
006ECE  2  C0 BE B5                     .byte $c0,$be,$b5
006ED1  2  C0 AA BD                     .byte $c0,$aa,$bd
006ED4  2               
006ED4  2  80 D5 EA     digits5_6       .byte $80,$d5,$ea
006ED7  2  80 F5 FF                     .byte $80,$f5,$ff
006EDA  2  80 F5 FF                     .byte $80,$f5,$ff
006EDD  2  80 D5 FA                     .byte $80,$d5,$fa
006EE0  2  C0 FF EA                     .byte $c0,$ff,$ea
006EE3  2  C0 FF EA                     .byte $c0,$ff,$ea
006EE6  2  80 FD EA                     .byte $80,$fd,$ea
006EE9  2  80 D5 FA                     .byte $80,$d5,$fa
006EEC  2               
006EEC  2  AB F5 81     digits6_0       .byte $ab,$f5,$81
006EEF  2  EA D7 81                     .byte $ea,$d7,$81
006EF2  2  EA FF 81                     .byte $ea,$ff,$81
006EF5  2  AA F5 81                     .byte $aa,$f5,$81
006EF8  2  EA D5 81                     .byte $ea,$d5,$81
006EFB  2  EA D5 81                     .byte $ea,$d5,$81
006EFE  2  EA D5 81                     .byte $ea,$d5,$81
006F01  2  AB F5 81                     .byte $ab,$f5,$81
006F04  2               
006F04  2  D6 EA 83     digits6_1       .byte $d6,$ea,$83
006F07  2  D4 AF 83                     .byte $d4,$af,$83
006F0A  2  D4 FF 83                     .byte $d4,$ff,$83
006F0D  2  D4 EA 83                     .byte $d4,$ea,$83
006F10  2  D4 AB 83                     .byte $d4,$ab,$83
006F13  2  D4 AB 83                     .byte $d4,$ab,$83
006F16  2  D4 AB 83                     .byte $d4,$ab,$83
006F19  2  D6 EA 83                     .byte $d6,$ea,$83
006F1C  2               
006F1C  2  AC D5 87     digits6_2       .byte $ac,$d5,$87
006F1F  2  A8 DF 86                     .byte $a8,$df,$86
006F22  2  A8 FF 87                     .byte $a8,$ff,$87
006F25  2  A8 D5 87                     .byte $a8,$d5,$87
006F28  2  A8 D7 86                     .byte $a8,$d7,$86
006F2B  2  A8 D7 86                     .byte $a8,$d7,$86
006F2E  2  A8 D7 86                     .byte $a8,$d7,$86
006F31  2  AC D5 87                     .byte $ac,$d5,$87
006F34  2               
006F34  2  D8 AA 8F     digits6_3       .byte $d8,$aa,$8f
006F37  2  D0 BE 8D                     .byte $d0,$be,$8d
006F3A  2  D0 FE 8F                     .byte $d0,$fe,$8f
006F3D  2  D0 AA 8F                     .byte $d0,$aa,$8f
006F40  2  D0 AE 8D                     .byte $d0,$ae,$8d
006F43  2  D0 AE 8D                     .byte $d0,$ae,$8d
006F46  2  D0 AE 8D                     .byte $d0,$ae,$8d
006F49  2  D8 AA 8F                     .byte $d8,$aa,$8f
006F4C  2               
006F4C  2  B0 D5 9E     digits6_4       .byte $b0,$d5,$9e
006F4F  2  A0 FD 9A                     .byte $a0,$fd,$9a
006F52  2  A0 FD 9F                     .byte $a0,$fd,$9f
006F55  2  A0 D5 9E                     .byte $a0,$d5,$9e
006F58  2  A0 DD 9A                     .byte $a0,$dd,$9a
006F5B  2  A0 DD 9A                     .byte $a0,$dd,$9a
006F5E  2  A0 DD 9A                     .byte $a0,$dd,$9a
006F61  2  B0 D5 9E                     .byte $b0,$d5,$9e
006F64  2               
006F64  2  E0 AA BD     digits6_5       .byte $e0,$aa,$bd
006F67  2  C0 FA B5                     .byte $c0,$fa,$b5
006F6A  2  C0 FA BF                     .byte $c0,$fa,$bf
006F6D  2  C0 AA BD                     .byte $c0,$aa,$bd
006F70  2  C0 BA B5                     .byte $c0,$ba,$b5
006F73  2  C0 BA B5                     .byte $c0,$ba,$b5
006F76  2  C0 BA B5                     .byte $c0,$ba,$b5
006F79  2  E0 AA BD                     .byte $e0,$aa,$bd
006F7C  2               
006F7C  2  C0 D5 FA     digits6_6       .byte $c0,$d5,$fa
006F7F  2  80 F5 EB                     .byte $80,$f5,$eb
006F82  2  80 F5 FF                     .byte $80,$f5,$ff
006F85  2  80 D5 FA                     .byte $80,$d5,$fa
006F88  2  80 F5 EA                     .byte $80,$f5,$ea
006F8B  2  80 F5 EA                     .byte $80,$f5,$ea
006F8E  2  80 F5 EA                     .byte $80,$f5,$ea
006F91  2  C0 D5 FA                     .byte $c0,$d5,$fa
006F94  2               
006F94  2  AA D5 81     digits7_0       .byte $aa,$d5,$81
006F97  2  FA D7 81                     .byte $fa,$d7,$81
006F9A  2  FF D5 81                     .byte $ff,$d5,$81
006F9D  2  BF F5 81                     .byte $bf,$f5,$81
006FA0  2  AF FD 81                     .byte $af,$fd,$81
006FA3  2  AF FD 81                     .byte $af,$fd,$81
006FA6  2  AF FD 81                     .byte $af,$fd,$81
006FA9  2  AF FD 81                     .byte $af,$fd,$81
006FAC  2               
006FAC  2  D4 AA 83     digits7_1       .byte $d4,$aa,$83
006FAF  2  F4 AF 83                     .byte $f4,$af,$83
006FB2  2  FE AB 83                     .byte $fe,$ab,$83
006FB5  2  FE EA 83                     .byte $fe,$ea,$83
006FB8  2  DE FA 83                     .byte $de,$fa,$83
006FBB  2  DE FA 83                     .byte $de,$fa,$83
006FBE  2  DE FA 83                     .byte $de,$fa,$83
006FC1  2  DE FA 83                     .byte $de,$fa,$83
006FC4  2               
006FC4  2  A8 D5 86     digits7_2       .byte $a8,$d5,$86
006FC7  2  E8 DF 86                     .byte $e8,$df,$86
006FCA  2  FC D7 86                     .byte $fc,$d7,$86
006FCD  2  FC D5 87                     .byte $fc,$d5,$87
006FD0  2  BC F5 87                     .byte $bc,$f5,$87
006FD3  2  BC F5 87                     .byte $bc,$f5,$87
006FD6  2  BC F5 87                     .byte $bc,$f5,$87
006FD9  2  BC F5 87                     .byte $bc,$f5,$87
006FDC  2               
006FDC  2  D0 AA 8D     digits7_3       .byte $d0,$aa,$8d
006FDF  2  D0 BF 8D                     .byte $d0,$bf,$8d
006FE2  2  F8 AF 8D                     .byte $f8,$af,$8d
006FE5  2  F8 AB 8F                     .byte $f8,$ab,$8f
006FE8  2  F8 EA 8F                     .byte $f8,$ea,$8f
006FEB  2  F8 EA 8F                     .byte $f8,$ea,$8f
006FEE  2  F8 EA 8F                     .byte $f8,$ea,$8f
006FF1  2  F8 EA 8F                     .byte $f8,$ea,$8f
006FF4  2               
006FF4  2  A0 D5 9A     digits7_4       .byte $a0,$d5,$9a
006FF7  2  A0 FF 9A                     .byte $a0,$ff,$9a
006FFA  2  F0 DF 9A                     .byte $f0,$df,$9a
006FFD  2  F0 D7 9E                     .byte $f0,$d7,$9e
007000  2  F0 D5 9F                     .byte $f0,$d5,$9f
007003  2  F0 D5 9F                     .byte $f0,$d5,$9f
007006  2  F0 D5 9F                     .byte $f0,$d5,$9f
007009  2  F0 D5 9F                     .byte $f0,$d5,$9f
00700C  2               
00700C  2  C0 AA B5     digits7_5       .byte $c0,$aa,$b5
00700F  2  C0 FE B5                     .byte $c0,$fe,$b5
007012  2  E0 BF B5                     .byte $e0,$bf,$b5
007015  2  E0 AF BD                     .byte $e0,$af,$bd
007018  2  E0 AB BF                     .byte $e0,$ab,$bf
00701B  2  E0 AB BF                     .byte $e0,$ab,$bf
00701E  2  E0 AB BF                     .byte $e0,$ab,$bf
007021  2  E0 AB BF                     .byte $e0,$ab,$bf
007024  2               
007024  2  80 D5 EA     digits7_6       .byte $80,$d5,$ea
007027  2  80 FD EB                     .byte $80,$fd,$eb
00702A  2  C0 FF EA                     .byte $c0,$ff,$ea
00702D  2  C0 DF FA                     .byte $c0,$df,$fa
007030  2  C0 D7 FE                     .byte $c0,$d7,$fe
007033  2  C0 D7 FE                     .byte $c0,$d7,$fe
007036  2  C0 D7 FE                     .byte $c0,$d7,$fe
007039  2  C0 D7 FE                     .byte $c0,$d7,$fe
00703C  2               
00703C  2  AB F5 81     digits8_0       .byte $ab,$f5,$81
00703F  2  EA D5 81                     .byte $ea,$d5,$81
007042  2  EA D5 81                     .byte $ea,$d5,$81
007045  2  AB F5 81                     .byte $ab,$f5,$81
007048  2  AB F5 81                     .byte $ab,$f5,$81
00704B  2  EA D5 81                     .byte $ea,$d5,$81
00704E  2  EA D5 81                     .byte $ea,$d5,$81
007051  2  AB F5 81                     .byte $ab,$f5,$81
007054  2               
007054  2  D6 EA 83     digits8_1       .byte $d6,$ea,$83
007057  2  D4 AB 83                     .byte $d4,$ab,$83
00705A  2  D4 AB 83                     .byte $d4,$ab,$83
00705D  2  D6 EA 83                     .byte $d6,$ea,$83
007060  2  D6 EA 83                     .byte $d6,$ea,$83
007063  2  D4 AB 83                     .byte $d4,$ab,$83
007066  2  D4 AB 83                     .byte $d4,$ab,$83
007069  2  D6 EA 83                     .byte $d6,$ea,$83
00706C  2               
00706C  2  AC D5 87     digits8_2       .byte $ac,$d5,$87
00706F  2  A8 D7 86                     .byte $a8,$d7,$86
007072  2  A8 D7 86                     .byte $a8,$d7,$86
007075  2  AC D5 87                     .byte $ac,$d5,$87
007078  2  AC D5 87                     .byte $ac,$d5,$87
00707B  2  A8 D7 86                     .byte $a8,$d7,$86
00707E  2  A8 D7 86                     .byte $a8,$d7,$86
007081  2  AC D5 87                     .byte $ac,$d5,$87
007084  2               
007084  2  D8 AA 8F     digits8_3       .byte $d8,$aa,$8f
007087  2  D0 AE 8D                     .byte $d0,$ae,$8d
00708A  2  D0 AE 8D                     .byte $d0,$ae,$8d
00708D  2  D8 AA 8F                     .byte $d8,$aa,$8f
007090  2  D8 AA 8F                     .byte $d8,$aa,$8f
007093  2  D0 AE 8D                     .byte $d0,$ae,$8d
007096  2  D0 AE 8D                     .byte $d0,$ae,$8d
007099  2  D8 AA 8F                     .byte $d8,$aa,$8f
00709C  2               
00709C  2  B0 D5 9E     digits8_4       .byte $b0,$d5,$9e
00709F  2  A0 DD 9A                     .byte $a0,$dd,$9a
0070A2  2  A0 DD 9A                     .byte $a0,$dd,$9a
0070A5  2  B0 D5 9E                     .byte $b0,$d5,$9e
0070A8  2  B0 D5 9E                     .byte $b0,$d5,$9e
0070AB  2  A0 DD 9A                     .byte $a0,$dd,$9a
0070AE  2  A0 DD 9A                     .byte $a0,$dd,$9a
0070B1  2  B0 D5 9E                     .byte $b0,$d5,$9e
0070B4  2               
0070B4  2  E0 AA BD     digits8_5       .byte $e0,$aa,$bd
0070B7  2  C0 BA B5                     .byte $c0,$ba,$b5
0070BA  2  C0 BA B5                     .byte $c0,$ba,$b5
0070BD  2  E0 AA BD                     .byte $e0,$aa,$bd
0070C0  2  E0 AA BD                     .byte $e0,$aa,$bd
0070C3  2  C0 BA B5                     .byte $c0,$ba,$b5
0070C6  2  C0 BA B5                     .byte $c0,$ba,$b5
0070C9  2  E0 AA BD                     .byte $e0,$aa,$bd
0070CC  2               
0070CC  2  C0 D5 FA     digits8_6       .byte $c0,$d5,$fa
0070CF  2  80 F5 EA                     .byte $80,$f5,$ea
0070D2  2  80 F5 EA                     .byte $80,$f5,$ea
0070D5  2  C0 D5 FA                     .byte $c0,$d5,$fa
0070D8  2  C0 D5 FA                     .byte $c0,$d5,$fa
0070DB  2  80 F5 EA                     .byte $80,$f5,$ea
0070DE  2  80 F5 EA                     .byte $80,$f5,$ea
0070E1  2  C0 D5 FA                     .byte $c0,$d5,$fa
0070E4  2               
0070E4  2  AB F5 81     digits9_0       .byte $ab,$f5,$81
0070E7  2  EA D5 81                     .byte $ea,$d5,$81
0070EA  2  EA D5 81                     .byte $ea,$d5,$81
0070ED  2  EA D5 81                     .byte $ea,$d5,$81
0070F0  2  AB D5 81                     .byte $ab,$d5,$81
0070F3  2  FF D5 81                     .byte $ff,$d5,$81
0070F6  2  EA D5 81                     .byte $ea,$d5,$81
0070F9  2  AB F5 81                     .byte $ab,$f5,$81
0070FC  2               
0070FC  2  D6 EA 83     digits9_1       .byte $d6,$ea,$83
0070FF  2  D4 AB 83                     .byte $d4,$ab,$83
007102  2  D4 AB 83                     .byte $d4,$ab,$83
007105  2  D4 AB 83                     .byte $d4,$ab,$83
007108  2  D6 AA 83                     .byte $d6,$aa,$83
00710B  2  FE AB 83                     .byte $fe,$ab,$83
00710E  2  D4 AB 83                     .byte $d4,$ab,$83
007111  2  D6 EA 83                     .byte $d6,$ea,$83
007114  2               
007114  2  AC D5 87     digits9_2       .byte $ac,$d5,$87
007117  2  A8 D7 86                     .byte $a8,$d7,$86
00711A  2  A8 D7 86                     .byte $a8,$d7,$86
00711D  2  A8 D7 86                     .byte $a8,$d7,$86
007120  2  AC D5 86                     .byte $ac,$d5,$86
007123  2  FC D7 86                     .byte $fc,$d7,$86
007126  2  A8 D7 86                     .byte $a8,$d7,$86
007129  2  AC D5 87                     .byte $ac,$d5,$87
00712C  2               
00712C  2  D8 AA 8F     digits9_3       .byte $d8,$aa,$8f
00712F  2  D0 AE 8D                     .byte $d0,$ae,$8d
007132  2  D0 AE 8D                     .byte $d0,$ae,$8d
007135  2  D0 AE 8D                     .byte $d0,$ae,$8d
007138  2  D8 AA 8D                     .byte $d8,$aa,$8d
00713B  2  F8 AF 8D                     .byte $f8,$af,$8d
00713E  2  D0 AE 8D                     .byte $d0,$ae,$8d
007141  2  D8 AA 8F                     .byte $d8,$aa,$8f
007144  2               
007144  2  B0 D5 9E     digits9_4       .byte $b0,$d5,$9e
007147  2  A0 DD 9A                     .byte $a0,$dd,$9a
00714A  2  A0 DD 9A                     .byte $a0,$dd,$9a
00714D  2  A0 DD 9A                     .byte $a0,$dd,$9a
007150  2  B0 D5 9A                     .byte $b0,$d5,$9a
007153  2  F0 DF 9A                     .byte $f0,$df,$9a
007156  2  A0 DD 9A                     .byte $a0,$dd,$9a
007159  2  B0 D5 9E                     .byte $b0,$d5,$9e
00715C  2               
00715C  2  E0 AA BD     digits9_5       .byte $e0,$aa,$bd
00715F  2  C0 BA B5                     .byte $c0,$ba,$b5
007162  2  C0 BA B5                     .byte $c0,$ba,$b5
007165  2  C0 BA B5                     .byte $c0,$ba,$b5
007168  2  E0 AA B5                     .byte $e0,$aa,$b5
00716B  2  E0 BF B5                     .byte $e0,$bf,$b5
00716E  2  C0 BA B5                     .byte $c0,$ba,$b5
007171  2  E0 AA BD                     .byte $e0,$aa,$bd
007174  2               
007174  2  C0 D5 FA     digits9_6       .byte $c0,$d5,$fa
007177  2  80 F5 EA                     .byte $80,$f5,$ea
00717A  2  80 F5 EA                     .byte $80,$f5,$ea
00717D  2  80 F5 EA                     .byte $80,$f5,$ea
007180  2  C0 D5 EA                     .byte $c0,$d5,$ea
007183  2  C0 FF EA                     .byte $c0,$ff,$ea
007186  2  80 F5 EA                     .byte $80,$f5,$ea
007189  2  C0 D5 FA                     .byte $c0,$d5,$fa
00718C  2               
00718C  2  FF FF 81     digitsX_0       .byte $ff,$ff,$81
00718F  2  FF FF 81                     .byte $ff,$ff,$81
007192  2  FF FF 81                     .byte $ff,$ff,$81
007195  2  FF FF 81                     .byte $ff,$ff,$81
007198  2  FF FF 81                     .byte $ff,$ff,$81
00719B  2  FF FF 81                     .byte $ff,$ff,$81
00719E  2  FF FF 81                     .byte $ff,$ff,$81
0071A1  2  FF FF 81                     .byte $ff,$ff,$81
0071A4  2               
0071A4  2  FE FF 83     digitsX_1       .byte $fe,$ff,$83
0071A7  2  FE FF 83                     .byte $fe,$ff,$83
0071AA  2  FE FF 83                     .byte $fe,$ff,$83
0071AD  2  FE FF 83                     .byte $fe,$ff,$83
0071B0  2  FE FF 83                     .byte $fe,$ff,$83
0071B3  2  FE FF 83                     .byte $fe,$ff,$83
0071B6  2  FE FF 83                     .byte $fe,$ff,$83
0071B9  2  FE FF 83                     .byte $fe,$ff,$83
0071BC  2               
0071BC  2  FC FF 87     digitsX_2       .byte $fc,$ff,$87
0071BF  2  FC FF 87                     .byte $fc,$ff,$87
0071C2  2  FC FF 87                     .byte $fc,$ff,$87
0071C5  2  FC FF 87                     .byte $fc,$ff,$87
0071C8  2  FC FF 87                     .byte $fc,$ff,$87
0071CB  2  FC FF 87                     .byte $fc,$ff,$87
0071CE  2  FC FF 87                     .byte $fc,$ff,$87
0071D1  2  FC FF 87                     .byte $fc,$ff,$87
0071D4  2               
0071D4  2  F8 FF 8F     digitsX_3       .byte $f8,$ff,$8f
0071D7  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071DA  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071DD  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071E0  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071E3  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071E6  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071E9  2  F8 FF 8F                     .byte $f8,$ff,$8f
0071EC  2               
0071EC  2  F0 FF 9F     digitsX_4       .byte $f0,$ff,$9f
0071EF  2  F0 FF 9F                     .byte $f0,$ff,$9f
0071F2  2  F0 FF 9F                     .byte $f0,$ff,$9f
0071F5  2  F0 FF 9F                     .byte $f0,$ff,$9f
0071F8  2  F0 FF 9F                     .byte $f0,$ff,$9f
0071FB  2  F0 FF 9F                     .byte $f0,$ff,$9f
0071FE  2  F0 FF 9F                     .byte $f0,$ff,$9f
007201  2  F0 FF 9F                     .byte $f0,$ff,$9f
007204  2               
007204  2  E0 FF BF     digitsX_5       .byte $e0,$ff,$bf
007207  2  E0 FF BF                     .byte $e0,$ff,$bf
00720A  2  E0 FF BF                     .byte $e0,$ff,$bf
00720D  2  E0 FF BF                     .byte $e0,$ff,$bf
007210  2  E0 FF BF                     .byte $e0,$ff,$bf
007213  2  E0 FF BF                     .byte $e0,$ff,$bf
007216  2  E0 FF BF                     .byte $e0,$ff,$bf
007219  2  E0 FF BF                     .byte $e0,$ff,$bf
00721C  2               
00721C  2  C0 FF FF     digitsX_6       .byte $c0,$ff,$ff
00721F  2  C0 FF FF                     .byte $c0,$ff,$ff
007222  2  C0 FF FF                     .byte $c0,$ff,$ff
007225  2  C0 FF FF                     .byte $c0,$ff,$ff
007228  2  C0 FF FF                     .byte $c0,$ff,$ff
00722B  2  C0 FF FF                     .byte $c0,$ff,$ff
00722E  2  C0 FF FF                     .byte $c0,$ff,$ff
007231  2  C0 FF FF                     .byte $c0,$ff,$ff
007234  2               
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %........################........		; zero
007234  2               
007234  2                               ; .byte %............########............
007234  2                               ; .byte %........############............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %........################........		; one
007234  2               
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....####............########....
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....########....................
007234  2                               ; .byte %....########....................
007234  2                               ; .byte %....########################....		; two
007234  2               
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....####............########....
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %................########........
007234  2                               ; .byte %................########........
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %....####............########....
007234  2                               ; .byte %........################........		; three
007234  2               
007234  2                               ; .byte %................########........
007234  2                               ; .byte %............############........
007234  2                               ; .byte %........####....########........
007234  2                               ; .byte %....####........########........
007234  2                               ; .byte %....########################....
007234  2                               ; .byte %................########........
007234  2                               ; .byte %................########........
007234  2                               ; .byte %................########........		; four
007234  2               
007234  2                               ; .byte %....########################....
007234  2                               ; .byte %....########....................
007234  2                               ; .byte %....########....................
007234  2                               ; .byte %....####################........
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %....####............########....
007234  2                               ; .byte %....####################........		; five
007234  2               
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....########............####....
007234  2                               ; .byte %....########....................
007234  2                               ; .byte %....####################........
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %........################........		; six
007234  2               
007234  2                               ; .byte %....########################....
007234  2                               ; .byte %....####................####....
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %................########........
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............
007234  2                               ; .byte %............########............		; seven
007234  2               
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %........################........
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %........################........		; eight
007234  2               
007234  2                               ; .byte %........################........
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %....########........########....
007234  2                               ; .byte %........####################....
007234  2                               ; .byte %....................########....
007234  2                               ; .byte %....####............########....
007234  2                               ; .byte %........################........		; nine
007234  2               
007234  1                               .include "flash.s"
007234  2               
007234  2               ; NOTE: This may seem like overkill for just a screen flash
007234  2               ;   but I really wanted to approximate the speed of the original
007234  2               ;   flash and not watch the screen slowly paint from top to bottom.
007234  2               ;   Good thing I'm not limited to a 2K cartridge!
007234  2               
007234  2               ;---------------------------------------
007234  2               
007234  2               ; 5680 bytes for center area (142 * 40)
007234  2               ; 5 cycles per sta $9999,x
007234  2               ; 28400 cycles for complete fill
007234  2               
007234  2               ; 8 line by 40 column bucket line fill
007234  2               ; 18 chunks of 8 (6) lines
007234  2               ;
007234  2               ; 8 line by 40 column fill
007234  2               ; 40 * 47 = 1880 cycles
007234  2               
007234  2               left            =   temp
007234  2               right           =   offset
007234  2               eor_value       =   linenum
007234  2               
007234  2               ; NOTE: exp_bomb_frame decreases from $1E down to $01
007234  2               
007234  2  A6 08        flash_screen    ldx bucket_xcol
007236  2  8A                           txa
007237  2  29 FE                        and #$fe
007239  2  85 00                        sta left
00723B  2  8A                           txa
00723C  2  38                           sec                     ; +1
00723D  2  69 06                        adc #6
00723F  2  29 FE                        and #$fe
007241  2  C9 28                        cmp #40
007243  2  90 02                        bcc @1
007245  2  A9 28                        lda #40
007247  2  85 01        @1              sta right
007249  2  C6 01                        dec right
00724B  2               
00724B  2  A5 AE                        lda exp_bomb_frame
00724D  2  AA                           tax
00724E  2  38                           sec
00724F  2  E9 01                        sbc #1
007251  2  A8           @2              tay
007252  2  E9 0C                        sbc #12
007254  2  B0 FB                        bcs @2
007256  2  B9 AE 72                     lda flash_eor,y
007259  2  E0 1C                        cpx #$1C
00725B  2  90 02                        bcc @3
00725D  2  A9 FF                        lda #$ff
00725F  2  85 02        @3              sta eor_value
007261  2  B9 A2 72                     lda flash_color,y
007264  2  BE BA 72                     ldx flash_phase,y
007267  2  CA                           dex
007268  2  F0 14                        beq flash_phase1
00726A  2  10 24                        bpl flash_phase2
00726C  2               
00726C  2  20 00 73     flash_phase0    jsr flash_40
00726F  2  20 60 73                     jsr flash_64
007272  2  20 C0 73                     jsr flash_88
007275  2  20 20 74                     jsr flash_112
007278  2  20 80 74                     jsr flash_136
00727B  2  4C 6E 75                     jmp flash_middle_bucket_157
00727E  2               
00727E  2  20 20 73     flash_phase1    jsr flash_48
007281  2  20 80 73                     jsr flash_72
007284  2  20 E0 73                     jsr flash_96
007287  2  20 40 74                     jsr flash_120
00728A  2  20 FA 74                     jsr flash_top_bucket_141
00728D  2  4C BA 74                     jmp flash_165
007290  2               
007290  2  20 40 73     flash_phase2    jsr flash_56
007293  2  20 A0 73                     jsr flash_80
007296  2  20 00 74                     jsr flash_104
007299  2  20 60 74                     jsr flash_128
00729C  2  20 9A 74                     jsr flash_149
00729F  2  4C 08 76                     jmp flash_bottom_bucket_173
0072A2  2               
0072A2  2  2A 2A 2A     flash_color     .byte $2a,$2a,$2a
0072A5  2  D5 D5 D5                     .byte $d5,$d5,$d5
0072A8  2  55 55 55                     .byte $55,$55,$55
0072AB  2  AA AA AA                     .byte $aa,$aa,$aa
0072AE  2               
0072AE  2  FF FF FF     flash_eor       .byte $ff,$ff,$ff
0072B1  2  80 80 80                     .byte $80,$80,$80
0072B4  2  FF FF FF                     .byte $ff,$ff,$ff
0072B7  2  80 80 80                     .byte $80,$80,$80
0072BA  2               
0072BA  2  02 01 00     flash_phase     .byte 2,1,0
0072BD  2  02 01 00                     .byte 2,1,0
0072C0  2  02 01 00                     .byte 2,1,0
0072C3  2  02 01 00                     .byte 2,1,0
0072C6  2               
0072C6  2  xx xx xx xx                  .align 256              ; avoid branch page crossing
0072CA  2  xx xx xx xx  
0072CE  2  xx xx xx xx  
007300  2               
007300  2  A0 27        flash_40        ldy #39
007302  2  49 7F        @1              eor #$7f
007304  2  99 80 22                     sta hiresLine40,y
007307  2  99 80 26                     sta hiresLine41,y
00730A  2  99 80 2A                     sta hiresLine42,y
00730D  2  99 80 2E                     sta hiresLine43,y
007310  2  99 80 32                     sta hiresLine44,y
007313  2  99 80 36                     sta hiresLine45,y
007316  2  99 80 3A                     sta hiresLine46,y
007319  2  99 80 3E                     sta hiresLine47,y
00731C  2  88                           dey
00731D  2  10 E3                        bpl @1
00731F  2                               same_page_as @1
00731F  2  60                           rts
007320  2               
007320  2  A0 27        flash_48        ldy #39
007322  2  49 7F        @1              eor #$7f
007324  2  99 00 23                     sta hiresLine48,y
007327  2  99 00 27                     sta hiresLine49,y
00732A  2  99 00 2B                     sta hiresLine50,y
00732D  2  99 00 2F                     sta hiresLine51,y
007330  2  99 00 33                     sta hiresLine52,y
007333  2  99 00 37                     sta hiresLine53,y
007336  2  99 00 3B                     sta hiresLine54,y
007339  2  99 00 3F                     sta hiresLine55,y
00733C  2  88                           dey
00733D  2  10 E3                        bpl @1
00733F  2                               same_page_as @1
00733F  2  60                           rts
007340  2               
007340  2  A0 27        flash_56        ldy #39
007342  2  49 7F        @1              eor #$7f
007344  2  99 80 23                     sta hiresLine56,y
007347  2  99 80 27                     sta hiresLine57,y
00734A  2  99 80 2B                     sta hiresLine58,y
00734D  2  99 80 2F                     sta hiresLine59,y
007350  2  99 80 33                     sta hiresLine60,y
007353  2  99 80 37                     sta hiresLine61,y
007356  2  99 80 3B                     sta hiresLine62,y
007359  2  99 80 3F                     sta hiresLine63,y
00735C  2  88                           dey
00735D  2  10 E3                        bpl @1
00735F  2                               same_page_as @1
00735F  2  60                           rts
007360  2               
007360  2  A0 27        flash_64        ldy #39
007362  2  49 7F        @1              eor #$7f
007364  2  99 28 20                     sta hiresLine64,y
007367  2  99 28 24                     sta hiresLine65,y
00736A  2  99 28 28                     sta hiresLine66,y
00736D  2  99 28 2C                     sta hiresLine67,y
007370  2  99 28 30                     sta hiresLine68,y
007373  2  99 28 34                     sta hiresLine69,y
007376  2  99 28 38                     sta hiresLine70,y
007379  2  99 28 3C                     sta hiresLine71,y
00737C  2  88                           dey
00737D  2  10 E3                        bpl @1
00737F  2                               same_page_as @1
00737F  2  60                           rts
007380  2               
007380  2  A0 27        flash_72        ldy #39
007382  2  49 7F        @1              eor #$7f
007384  2  99 A8 20                     sta hiresLine72,y
007387  2  99 A8 24                     sta hiresLine73,y
00738A  2  99 A8 28                     sta hiresLine74,y
00738D  2  99 A8 2C                     sta hiresLine75,y
007390  2  99 A8 30                     sta hiresLine76,y
007393  2  99 A8 34                     sta hiresLine77,y
007396  2  99 A8 38                     sta hiresLine78,y
007399  2  99 A8 3C                     sta hiresLine79,y
00739C  2  88                           dey
00739D  2  10 E3                        bpl @1
00739F  2                               same_page_as @1
00739F  2  60                           rts
0073A0  2               
0073A0  2  A0 27        flash_80        ldy #39
0073A2  2  49 7F        @1              eor #$7f
0073A4  2  99 28 21                     sta hiresLine80,y
0073A7  2  99 28 25                     sta hiresLine81,y
0073AA  2  99 28 29                     sta hiresLine82,y
0073AD  2  99 28 2D                     sta hiresLine83,y
0073B0  2  99 28 31                     sta hiresLine84,y
0073B3  2  99 28 35                     sta hiresLine85,y
0073B6  2  99 28 39                     sta hiresLine86,y
0073B9  2  99 28 3D                     sta hiresLine87,y
0073BC  2  88                           dey
0073BD  2  10 E3                        bpl @1
0073BF  2                               same_page_as @1
0073BF  2  60                           rts
0073C0  2               
0073C0  2  A0 27        flash_88        ldy #39
0073C2  2  49 7F        @1              eor #$7f
0073C4  2  99 A8 21                     sta hiresLine88,y
0073C7  2  99 A8 25                     sta hiresLine89,y
0073CA  2  99 A8 29                     sta hiresLine90,y
0073CD  2  99 A8 2D                     sta hiresLine91,y
0073D0  2  99 A8 31                     sta hiresLine92,y
0073D3  2  99 A8 35                     sta hiresLine93,y
0073D6  2  99 A8 39                     sta hiresLine94,y
0073D9  2  99 A8 3D                     sta hiresLine95,y
0073DC  2  88                           dey
0073DD  2  10 E3                        bpl @1
0073DF  2                               same_page_as @1
0073DF  2  60                           rts
0073E0  2               
0073E0  2  A0 27        flash_96        ldy #39
0073E2  2  49 7F        @1              eor #$7f
0073E4  2  99 28 22                     sta hiresLine96,y
0073E7  2  99 28 26                     sta hiresLine97,y
0073EA  2  99 28 2A                     sta hiresLine98,y
0073ED  2  99 28 2E                     sta hiresLine99,y
0073F0  2  99 28 32                     sta hiresLine100,y
0073F3  2  99 28 36                     sta hiresLine101,y
0073F6  2  99 28 3A                     sta hiresLine102,y
0073F9  2  99 28 3E                     sta hiresLine103,y
0073FC  2  88                           dey
0073FD  2  10 E3                        bpl @1
0073FF  2                               same_page_as @1
0073FF  2  60                           rts
007400  2               
007400  2  A0 27        flash_104       ldy #39
007402  2  49 7F        @1              eor #$7f
007404  2  99 A8 22                     sta hiresLine104,y
007407  2  99 A8 26                     sta hiresLine105,y
00740A  2  99 A8 2A                     sta hiresLine106,y
00740D  2  99 A8 2E                     sta hiresLine107,y
007410  2  99 A8 32                     sta hiresLine108,y
007413  2  99 A8 36                     sta hiresLine109,y
007416  2  99 A8 3A                     sta hiresLine110,y
007419  2  99 A8 3E                     sta hiresLine111,y
00741C  2  88                           dey
00741D  2  10 E3                        bpl @1
00741F  2                               same_page_as @1
00741F  2  60                           rts
007420  2               
007420  2  A0 27        flash_112       ldy #39
007422  2  49 7F        @1              eor #$7f
007424  2  99 28 23                     sta hiresLine112,y
007427  2  99 28 27                     sta hiresLine113,y
00742A  2  99 28 2B                     sta hiresLine114,y
00742D  2  99 28 2F                     sta hiresLine115,y
007430  2  99 28 33                     sta hiresLine116,y
007433  2  99 28 37                     sta hiresLine117,y
007436  2  99 28 3B                     sta hiresLine118,y
007439  2  99 28 3F                     sta hiresLine119,y
00743C  2  88                           dey
00743D  2  10 E3                        bpl @1
00743F  2                               same_page_as @1
00743F  2  60                           rts
007440  2               
007440  2  A0 27        flash_120       ldy #39
007442  2  49 7F        @1              eor #$7f
007444  2  99 A8 23                     sta hiresLine120,y
007447  2  99 A8 27                     sta hiresLine121,y
00744A  2  99 A8 2B                     sta hiresLine122,y
00744D  2  99 A8 2F                     sta hiresLine123,y
007450  2  99 A8 33                     sta hiresLine124,y
007453  2  99 A8 37                     sta hiresLine125,y
007456  2  99 A8 3B                     sta hiresLine126,y
007459  2  99 A8 3F                     sta hiresLine127,y
00745C  2  88                           dey
00745D  2  10 E3                        bpl @1
00745F  2                               same_page_as @1
00745F  2  60                           rts
007460  2               
007460  2  A0 27        flash_128       ldy #39
007462  2  49 7F        @1              eor #$7f
007464  2  99 50 20                     sta hiresLine128,y
007467  2  99 50 24                     sta hiresLine129,y
00746A  2  99 50 28                     sta hiresLine130,y
00746D  2  99 50 2C                     sta hiresLine131,y
007470  2  99 50 30                     sta hiresLine132,y
007473  2  99 50 34                     sta hiresLine133,y
007476  2  99 50 38                     sta hiresLine134,y
007479  2  99 50 3C                     sta hiresLine135,y
00747C  2  88                           dey
00747D  2  10 E3                        bpl @1
00747F  2                               same_page_as @1
00747F  2  60                           rts
007480  2               
007480  2  A0 27        flash_136       ldy #39
007482  2  49 7F        @1              eor #$7f
007484  2  99 D0 20                     sta hiresLine136,y      ; 5 lines
007487  2  99 D0 24                     sta hiresLine137,y
00748A  2  99 D0 28                     sta hiresLine138,y
00748D  2  99 D0 2C                     sta hiresLine139,y
007490  2  99 D0 30                     sta hiresLine140,y
007493  2                               ;
007493  2  99 50 37                     sta hiresLine181,y      ; 1 line
007496  2  88                           dey
007497  2  10 E9                        bpl @1
007499  2                               same_page_as @1
007499  2  60                           rts
00749A  2               
00749A  2  A0 27        flash_149       ldy #39
00749C  2  49 7F        @1              eor #$7f
00749E  2  99 50 35                     sta hiresLine149,y
0074A1  2  99 50 39                     sta hiresLine150,y
0074A4  2  99 50 3D                     sta hiresLine151,y
0074A7  2  99 D0 21                     sta hiresLine152,y
0074AA  2  99 D0 25                     sta hiresLine153,y
0074AD  2  99 D0 29                     sta hiresLine154,y
0074B0  2  99 D0 2D                     sta hiresLine155,y
0074B3  2  99 D0 31                     sta hiresLine156,y
0074B6  2  88                           dey
0074B7  2  10 E3                        bpl @1
0074B9  2                               same_page_as @1
0074B9  2  60                           rts
0074BA  2               
0074BA  2  A0 27        flash_165       ldy #39
0074BC  2  49 7F        @1              eor #$7f
0074BE  2  99 50 36                     sta hiresLine165,y
0074C1  2  99 50 3A                     sta hiresLine166,y
0074C4  2  99 50 3E                     sta hiresLine167,y
0074C7  2  99 D0 22                     sta hiresLine168,y
0074CA  2  99 D0 26                     sta hiresLine169,y
0074CD  2  99 D0 2A                     sta hiresLine170,y
0074D0  2  99 D0 2E                     sta hiresLine171,y
0074D3  2  99 D0 32                     sta hiresLine172,y
0074D6  2  88                           dey
0074D7  2  10 E3                        bpl @1
0074D9  2                               same_page_as @1
0074D9  2  60                           rts
0074DA  2               
0074DA  2  xx xx xx xx                  .res 32                 ; avoid branch page crossing
0074DE  2  xx xx xx xx  
0074E2  2  xx xx xx xx  
0074FA  2               
0074FA  2               flash_top_bucket_141
0074FA  2  A0 27                        ldy #39
0074FC  2  C4 01                        cpy right
0074FE  2  F0 21                        beq @2
007500  2  49 7F        @1              eor #$7f
007502  2  99 D0 34                     sta hiresLine141,y
007505  2  99 D0 38                     sta hiresLine142,y
007508  2  99 D0 3C                     sta hiresLine143,y
00750B  2  99 50 21                     sta hiresLine144,y
00750E  2  99 50 25                     sta hiresLine145,y
007511  2  99 50 29                     sta hiresLine146,y
007514  2  99 50 2D                     sta hiresLine147,y
007517  2  99 50 31                     sta hiresLine148,y
00751A  2  88                           dey
00751B  2  30 50                        bmi @5
00751D  2  C4 01                        cpy right
00751F  2  D0 DF                        bne @1
007521  2  AA           @2              tax
007522  2  A5 02        @3              lda eor_value
007524  2  59 D0 34                     eor hiresLine141,y
007527  2  99 D0 34                     sta hiresLine141,y
00752A  2  A5 02                        lda eor_value
00752C  2  59 D0 38                     eor hiresLine142,y
00752F  2  99 D0 38                     sta hiresLine142,y
007532  2  A5 02                        lda eor_value
007534  2  59 D0 3C                     eor hiresLine143,y
007537  2  99 D0 3C                     sta hiresLine143,y
00753A  2  A5 02                        lda eor_value
00753C  2  59 50 21                     eor hiresLine144,y
00753F  2  99 50 21                     sta hiresLine144,y
007542  2  A5 02                        lda eor_value
007544  2  59 50 25                     eor hiresLine145,y
007547  2  99 50 25                     sta hiresLine145,y
00754A  2  A5 02                        lda eor_value
00754C  2  59 50 29                     eor hiresLine146,y
00754F  2  99 50 29                     sta hiresLine146,y
007552  2  A5 02                        lda eor_value
007554  2  59 50 2D                     eor hiresLine147,y
007557  2  99 50 2D                     sta hiresLine147,y
00755A  2  A5 02                        lda eor_value
00755C  2  59 50 31                     eor hiresLine148,y
00755F  2  99 50 31                     sta hiresLine148,y
007562  2  88                           dey
007563  2  30 07                        bmi @4
007565  2  C4 00                        cpy left
007567  2  B0 B9                        bcs @3
007569  2  8A                           txa
00756A  2  D0 94                        bne @1                  ; always
00756C  2                               same_page_as @1
00756C  2  8A           @4              txa
00756D  2  60           @5              rts
00756E  2               
00756E  2               flash_middle_bucket_157
00756E  2  A0 27                        ldy #39
007570  2  C4 01                        cpy right
007572  2  F0 21                        beq @2
007574  2  49 7F        @1              eor #$7f
007576  2  99 D0 35                     sta hiresLine157,y
007579  2  99 D0 39                     sta hiresLine158,y
00757C  2  99 D0 3D                     sta hiresLine159,y
00757F  2  99 50 22                     sta hiresLine160,y
007582  2  99 50 26                     sta hiresLine161,y
007585  2  99 50 2A                     sta hiresLine162,y
007588  2  99 50 2E                     sta hiresLine163,y
00758B  2  99 50 32                     sta hiresLine164,y
00758E  2  88                           dey
00758F  2  30 56                        bmi @5
007591  2  C4 01                        cpy right
007593  2  D0 DF                        bne @1
007595  2  A6 A1        @2              ldx player_buckets
007597  2  E0 02                        cpx #2
007599  2  90 D9                        bcc @1
00759B  2  AA                           tax
00759C  2  A5 02        @3              lda eor_value
00759E  2  59 D0 35                     eor hiresLine157,y
0075A1  2  99 D0 35                     sta hiresLine157,y
0075A4  2  A5 02                        lda eor_value
0075A6  2  59 D0 39                     eor hiresLine158,y
0075A9  2  99 D0 39                     sta hiresLine158,y
0075AC  2  A5 02                        lda eor_value
0075AE  2  59 D0 3D                     eor hiresLine159,y
0075B1  2  99 D0 3D                     sta hiresLine159,y
0075B4  2  A5 02                        lda eor_value
0075B6  2  59 50 22                     eor hiresLine160,y
0075B9  2  99 50 22                     sta hiresLine160,y
0075BC  2  A5 02                        lda eor_value
0075BE  2  59 50 26                     eor hiresLine161,y
0075C1  2  99 50 26                     sta hiresLine161,y
0075C4  2  A5 02                        lda eor_value
0075C6  2  59 50 2A                     eor hiresLine162,y
0075C9  2  99 50 2A                     sta hiresLine162,y
0075CC  2  A5 02                        lda eor_value
0075CE  2  59 50 2E                     eor hiresLine163,y
0075D1  2  99 50 2E                     sta hiresLine163,y
0075D4  2  A5 02                        lda eor_value
0075D6  2  59 50 32                     eor hiresLine164,y
0075D9  2  99 50 32                     sta hiresLine164,y
0075DC  2  88                           dey
0075DD  2  30 07                        bmi @4
0075DF  2  C4 00                        cpy left
0075E1  2  B0 B9                        bcs @3
0075E3  2  8A                           txa
0075E4  2  D0 8E                        bne @1                  ; always
0075E6  2                               same_page_as @1
0075E6  2  8A           @4              txa
0075E7  2  60           @5              rts
0075E8  2               
0075E8  2  xx xx xx xx                  .res 32                 ; avoid branch page crossing
0075EC  2  xx xx xx xx  
0075F0  2  xx xx xx xx  
007608  2               
007608  2               flash_bottom_bucket_173
007608  2  A0 27                        ldy #39
00760A  2  C4 01                        cpy right
00760C  2  F0 21                        beq @2
00760E  2  49 7F        @1              eor #$7f
007610  2  99 D0 36                     sta hiresLine173,y
007613  2  99 D0 3A                     sta hiresLine174,y
007616  2  99 D0 3E                     sta hiresLine175,y
007619  2  99 50 23                     sta hiresLine176,y
00761C  2  99 50 27                     sta hiresLine177,y
00761F  2  99 50 2B                     sta hiresLine178,y
007622  2  99 50 2F                     sta hiresLine179,y
007625  2  99 50 33                     sta hiresLine180,y
007628  2  88                           dey
007629  2  30 56                        bmi @5
00762B  2  C4 01                        cpy right
00762D  2  D0 DF                        bne @1
00762F  2  A6 A1        @2              ldx player_buckets
007631  2  E0 03                        cpx #3
007633  2  90 D9                        bcc @1
007635  2  AA                           tax
007636  2  A5 02        @3              lda eor_value
007638  2  59 D0 36                     eor hiresLine173,y
00763B  2  99 D0 36                     sta hiresLine173,y
00763E  2  A5 02                        lda eor_value
007640  2  59 D0 3A                     eor hiresLine174,y
007643  2  99 D0 3A                     sta hiresLine174,y
007646  2  A5 02                        lda eor_value
007648  2  59 D0 3E                     eor hiresLine175,y
00764B  2  99 D0 3E                     sta hiresLine175,y
00764E  2  A5 02                        lda eor_value
007650  2  59 50 23                     eor hiresLine176,y
007653  2  99 50 23                     sta hiresLine176,y
007656  2  A5 02                        lda eor_value
007658  2  59 50 27                     eor hiresLine177,y
00765B  2  99 50 27                     sta hiresLine177,y
00765E  2  A5 02                        lda eor_value
007660  2  59 50 2B                     eor hiresLine178,y
007663  2  99 50 2B                     sta hiresLine178,y
007666  2  A5 02                        lda eor_value
007668  2  59 50 2F                     eor hiresLine179,y
00766B  2  99 50 2F                     sta hiresLine179,y
00766E  2  A5 02                        lda eor_value
007670  2  59 50 33                     eor hiresLine180,y
007673  2  99 50 33                     sta hiresLine180,y
007676  2  88                           dey
007677  2  30 07                        bmi @4
007679  2  C4 00                        cpy left
00767B  2  B0 B9                        bcs @3
00767D  2  8A                           txa
00767E  2  D0 8E                        bne @1                  ; always
007680  2                               same_page_as @1
007680  2  8A           @4              txa
007681  2  60           @5              rts
007682  2               
007682  1                               .include "tables.s"
007682  2  xx xx xx xx                  .align 256
007686  2  xx xx xx xx  
00768A  2  xx xx xx xx  
007700  2               
007700  2  00 00 00 00  div7            .byte $00,$00,$00,$00,$00,$00,$00
007704  2  00 00 00     
007707  2  01 01 01 01                  .byte $01,$01,$01,$01,$01,$01,$01
00770B  2  01 01 01     
00770E  2  02 02 02 02                  .byte $02,$02,$02,$02,$02,$02,$02
007712  2  02 02 02     
007715  2  03 03 03 03                  .byte $03,$03,$03,$03,$03,$03,$03
007719  2  03 03 03     
00771C  2  04 04 04 04                  .byte $04,$04,$04,$04,$04,$04,$04
007720  2  04 04 04     
007723  2  05 05 05 05                  .byte $05,$05,$05,$05,$05,$05,$05
007727  2  05 05 05     
00772A  2  06 06 06 06                  .byte $06,$06,$06,$06,$06,$06,$06
00772E  2  06 06 06     
007731  2  07 07 07 07                  .byte $07,$07,$07,$07,$07,$07,$07
007735  2  07 07 07     
007738  2  08 08 08 08                  .byte $08,$08,$08,$08,$08,$08,$08
00773C  2  08 08 08     
00773F  2  09 09 09 09                  .byte $09,$09,$09,$09,$09,$09,$09
007743  2  09 09 09     
007746  2  0A 0A 0A 0A                  .byte $0a,$0a,$0a,$0a,$0a,$0a,$0a
00774A  2  0A 0A 0A     
00774D  2  0B 0B 0B 0B                  .byte $0b,$0b,$0b,$0b,$0b,$0b,$0b
007751  2  0B 0B 0B     
007754  2  0C 0C 0C 0C                  .byte $0c,$0c,$0c,$0c,$0c,$0c,$0c
007758  2  0C 0C 0C     
00775B  2  0D 0D 0D 0D                  .byte $0d,$0d,$0d,$0d,$0d,$0d,$0d
00775F  2  0D 0D 0D     
007762  2  0E 0E 0E 0E                  .byte $0e,$0e,$0e,$0e,$0e,$0e,$0e
007766  2  0E 0E 0E     
007769  2  0F 0F 0F 0F                  .byte $0f,$0f,$0f,$0f,$0f,$0f,$0f
00776D  2  0F 0F 0F     
007770  2  10 10 10 10                  .byte $10,$10,$10,$10,$10,$10,$10
007774  2  10 10 10     
007777  2  11 11 11 11                  .byte $11,$11,$11,$11,$11,$11,$11
00777B  2  11 11 11     
00777E  2  12 12 12 12                  .byte $12,$12,$12,$12,$12,$12,$12
007782  2  12 12 12     
007785  2  13 13 13 13                  .byte $13,$13,$13,$13,$13,$13,$13
007789  2  13 13 13     
00778C  2  14 14 14 14                  .byte $14,$14,$14,$14,$14,$14,$14
007790  2  14 14 14     
007793  2  15 15 15 15                  .byte $15,$15,$15,$15,$15,$15,$15
007797  2  15 15 15     
00779A  2  16 16 16 16                  .byte $16,$16,$16,$16,$16,$16,$16
00779E  2  16 16 16     
0077A1  2  17 17 17 17                  .byte $17,$17,$17,$17,$17,$17,$17
0077A5  2  17 17 17     
0077A8  2  18 18 18 18                  .byte $18,$18,$18,$18,$18,$18,$18
0077AC  2  18 18 18     
0077AF  2  19 19 19 19                  .byte $19,$19,$19,$19,$19,$19,$19
0077B3  2  19 19 19     
0077B6  2  1A 1A 1A 1A                  .byte $1a,$1a,$1a,$1a,$1a,$1a,$1a
0077BA  2  1A 1A 1A     
0077BD  2  1B 1B 1B 1B                  .byte $1b,$1b,$1b,$1b,$1b,$1b,$1b
0077C1  2  1B 1B 1B     
0077C4  2  1C 1C 1C 1C                  .byte $1c,$1c,$1c,$1c,$1c,$1c,$1c
0077C8  2  1C 1C 1C     
0077CB  2  1D 1D 1D 1D                  .byte $1d,$1d,$1d,$1d,$1d,$1d,$1d
0077CF  2  1D 1D 1D     
0077D2  2  1E 1E 1E 1E                  .byte $1e,$1e,$1e,$1e,$1e,$1e,$1e
0077D6  2  1E 1E 1E     
0077D9  2  1F 1F 1F 1F                  .byte $1f,$1f,$1f,$1f,$1f,$1f,$1f
0077DD  2  1F 1F 1F     
0077E0  2  20 20 20 20                  .byte $20,$20,$20,$20,$20,$20,$20
0077E4  2  20 20 20     
0077E7  2  21 21 21 21                  .byte $21,$21,$21,$21,$21,$21,$21
0077EB  2  21 21 21     
0077EE  2  22 22 22 22                  .byte $22,$22,$22,$22,$22,$22,$22
0077F2  2  22 22 22     
0077F5  2  23 23 23 23                  .byte $23,$23,$23,$23,$23,$23,$23
0077F9  2  23 23 23     
0077FC  2  24 24 24 24                  .byte $24,$24,$24,$24
007800  2               
007800  2                               .align 256
007800  2               
007800  2  00 01 02 03  mod7            .byte $00,$01,$02,$03
007804  2  04 05 06     mod7_hi         .byte $04,$05,$06
007807  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00780B  2  04 05 06     
00780E  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007812  2  04 05 06     
007815  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007819  2  04 05 06     
00781C  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007820  2  04 05 06     
007823  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007827  2  04 05 06     
00782A  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00782E  2  04 05 06     
007831  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007835  2  04 05 06     
007838  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00783C  2  04 05 06     
00783F  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007843  2  04 05 06     
007846  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00784A  2  04 05 06     
00784D  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007851  2  04 05 06     
007854  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007858  2  04 05 06     
00785B  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00785F  2  04 05 06     
007862  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007866  2  04 05 06     
007869  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00786D  2  04 05 06     
007870  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007874  2  04 05 06     
007877  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00787B  2  04 05 06     
00787E  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007882  2  04 05 06     
007885  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007889  2  04 05 06     
00788C  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007890  2  04 05 06     
007893  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
007897  2  04 05 06     
00789A  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
00789E  2  04 05 06     
0078A1  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078A5  2  04 05 06     
0078A8  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078AC  2  04 05 06     
0078AF  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078B3  2  04 05 06     
0078B6  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078BA  2  04 05 06     
0078BD  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078C1  2  04 05 06     
0078C4  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078C8  2  04 05 06     
0078CB  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078CF  2  04 05 06     
0078D2  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078D6  2  04 05 06     
0078D9  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078DD  2  04 05 06     
0078E0  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078E4  2  04 05 06     
0078E7  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078EB  2  04 05 06     
0078EE  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078F2  2  04 05 06     
0078F5  2  00 01 02 03                  .byte $00,$01,$02,$03,$04,$05,$06
0078F9  2  04 05 06     
0078FC  2  00 01 02 03                  .byte $00,$01,$02,$03
007900  2               
007900  2                               .align 256
007900  2               
007900  2  00 00 00 00  hires_table_lo  .byte $00,$00,$00,$00,$00,$00,$00,$00
007904  2  00 00 00 00  
007908  2  80 80 80 80                  .byte $80,$80,$80,$80,$80,$80,$80,$80
00790C  2  80 80 80 80  
007910  2  00 00 00 00                  .byte $00,$00,$00,$00,$00,$00,$00,$00
007914  2  00 00 00 00  
007918  2  80 80 80 80                  .byte $80,$80,$80,$80,$80,$80,$80,$80
00791C  2  80 80 80 80  
007920  2  00 00 00 00                  .byte $00,$00,$00,$00,$00,$00,$00,$00
007924  2  00 00 00 00  
007928  2  80 80 80 80                  .byte $80,$80,$80,$80,$80,$80,$80,$80
00792C  2  80 80 80 80  
007930  2  00 00 00 00                  .byte $00,$00,$00,$00,$00,$00,$00,$00
007934  2  00 00 00 00  
007938  2  80 80 80 80                  .byte $80,$80,$80,$80,$80,$80,$80,$80
00793C  2  80 80 80 80  
007940  2  28 28 28 28                  .byte $28,$28,$28,$28,$28,$28,$28,$28
007944  2  28 28 28 28  
007948  2  A8 A8 A8 A8                  .byte $a8,$a8,$a8,$a8,$a8,$a8,$a8,$a8
00794C  2  A8 A8 A8 A8  
007950  2  28 28 28 28                  .byte $28,$28,$28,$28,$28,$28,$28,$28
007954  2  28 28 28 28  
007958  2  A8 A8 A8 A8                  .byte $a8,$a8,$a8,$a8,$a8,$a8,$a8,$a8
00795C  2  A8 A8 A8 A8  
007960  2  28 28 28 28                  .byte $28,$28,$28,$28,$28,$28,$28,$28
007964  2  28 28 28 28  
007968  2  A8 A8 A8 A8                  .byte $a8,$a8,$a8,$a8,$a8,$a8,$a8,$a8
00796C  2  A8 A8 A8 A8  
007970  2  28 28 28 28                  .byte $28,$28,$28,$28,$28,$28,$28,$28
007974  2  28 28 28 28  
007978  2  A8 A8 A8 A8                  .byte $a8,$a8,$a8,$a8,$a8,$a8,$a8,$a8
00797C  2  A8 A8 A8 A8  
007980  2  50 50 50 50                  .byte $50,$50,$50,$50,$50,$50,$50,$50
007984  2  50 50 50 50  
007988  2  D0 D0 D0 D0                  .byte $d0,$d0,$d0,$d0,$d0,$d0,$d0,$d0
00798C  2  D0 D0 D0 D0  
007990  2  50 50 50 50                  .byte $50,$50,$50,$50,$50,$50,$50,$50
007994  2  50 50 50 50  
007998  2  D0 D0 D0 D0                  .byte $d0,$d0,$d0,$d0,$d0,$d0,$d0,$d0
00799C  2  D0 D0 D0 D0  
0079A0  2  50 50 50 50                  .byte $50,$50,$50,$50,$50,$50,$50,$50
0079A4  2  50 50 50 50  
0079A8  2  D0 D0 D0 D0                  .byte $d0,$d0,$d0,$d0,$d0,$d0,$d0,$d0
0079AC  2  D0 D0 D0 D0  
0079B0  2  50 50 50 50                  .byte $50,$50,$50,$50,$50,$50,$50,$50
0079B4  2  50 50 50 50  
0079B8  2  D0 D0 D0 D0                  .byte $d0,$d0,$d0,$d0,$d0,$d0,$d0,$d0
0079BC  2  D0 D0 D0 D0  
0079C0  2               
0079C0  2  24 24 24     div7_hi         .byte $24,$24,$24
0079C3  2  25 25 25 25                  .byte $25,$25,$25,$25,$25,$25,$25
0079C7  2  25 25 25     
0079CA  2  26 26 26 26                  .byte $26,$26,$26,$26,$26,$26,$26
0079CE  2  26 26 26     
0079D1  2  27 27 27 27                  .byte $27,$27,$27,$27,$27,$27,$27
0079D5  2  27 27 27     
0079D8  2               
0079D8  2  xx xx xx xx                  .align 256
0079DC  2  xx xx xx xx  
0079E0  2  xx xx xx xx  
007A00  2               
007A00  2  20 24 28 2C  hires_table_hi  .byte $20,$24,$28,$2c,$30,$34,$38,$3c
007A04  2  30 34 38 3C  
007A08  2  20 24 28 2C                  .byte $20,$24,$28,$2c,$30,$34,$38,$3c
007A0C  2  30 34 38 3C  
007A10  2  21 25 29 2D                  .byte $21,$25,$29,$2d,$31,$35,$39,$3d
007A14  2  31 35 39 3D  
007A18  2  21 25 29 2D                  .byte $21,$25,$29,$2d,$31,$35,$39,$3d
007A1C  2  31 35 39 3D  
007A20  2  22 26 2A 2E                  .byte $22,$26,$2a,$2e,$32,$36,$3a,$3e
007A24  2  32 36 3A 3E  
007A28  2  22 26 2A 2E                  .byte $22,$26,$2a,$2e,$32,$36,$3a,$3e
007A2C  2  32 36 3A 3E  
007A30  2  23 27 2B 2F                  .byte $23,$27,$2b,$2f,$33,$37,$3b,$3f
007A34  2  33 37 3B 3F  
007A38  2  23 27 2B 2F                  .byte $23,$27,$2b,$2f,$33,$37,$3b,$3f
007A3C  2  33 37 3B 3F  
007A40  2  20 24 28 2C                  .byte $20,$24,$28,$2c,$30,$34,$38,$3c
007A44  2  30 34 38 3C  
007A48  2  20 24 28 2C                  .byte $20,$24,$28,$2c,$30,$34,$38,$3c
007A4C  2  30 34 38 3C  
007A50  2  21 25 29 2D                  .byte $21,$25,$29,$2d,$31,$35,$39,$3d
007A54  2  31 35 39 3D  
007A58  2  21 25 29 2D                  .byte $21,$25,$29,$2d,$31,$35,$39,$3d
007A5C  2  31 35 39 3D  
007A60  2  22 26 2A 2E                  .byte $22,$26,$2a,$2e,$32,$36,$3a,$3e
007A64  2  32 36 3A 3E  
007A68  2  22 26 2A 2E                  .byte $22,$26,$2a,$2e,$32,$36,$3a,$3e
007A6C  2  32 36 3A 3E  
007A70  2  23 27 2B 2F                  .byte $23,$27,$2b,$2f,$33,$37,$3b,$3f
007A74  2  33 37 3B 3F  
007A78  2  23 27 2B 2F                  .byte $23,$27,$2b,$2f,$33,$37,$3b,$3f
007A7C  2  33 37 3B 3F  
007A80  2  20 24 28 2C                  .byte $20,$24,$28,$2c,$30,$34,$38,$3c
007A84  2  30 34 38 3C  
007A88  2  20 24 28 2C                  .byte $20,$24,$28,$2c,$30,$34,$38,$3c
007A8C  2  30 34 38 3C  
007A90  2  21 25 29 2D                  .byte $21,$25,$29,$2d,$31,$35,$39,$3d
007A94  2  31 35 39 3D  
007A98  2  21 25 29 2D                  .byte $21,$25,$29,$2d,$31,$35,$39,$3d
007A9C  2  31 35 39 3D  
007AA0  2  22 26 2A 2E                  .byte $22,$26,$2a,$2e,$32,$36,$3a,$3e
007AA4  2  32 36 3A 3E  
007AA8  2  22 26 2A 2E                  .byte $22,$26,$2a,$2e,$32,$36,$3a,$3e
007AAC  2  32 36 3A 3E  
007AB0  2  23 27 2B 2F                  .byte $23,$27,$2b,$2f,$33,$37,$3b,$3f
007AB4  2  33 37 3B 3F  
007AB8  2  23 27 2B 2F                  .byte $23,$27,$2b,$2f,$33,$37,$3b,$3f
007ABC  2  33 37 3B 3F  
007AC0  2               
007AC0  1                               .include "sound.s"
007AC0  2               
007AC0  2               ;-------------------------------------------------------------------------------
007AC0  2               
007AC0  2               DISABLE_TONE_A         = %00000001
007AC0  2               DISABLE_TONE_B         = %00000010
007AC0  2               DISABLE_TONE_C         = %00000100
007AC0  2               DISABLE_NOISE_A        = %00001000
007AC0  2               DISABLE_NOISE_B        = %00010000
007AC0  2               DISABLE_NOISE_C        = %00100000
007AC0  2               
007AC0  2               REG_AY_A_FINE_TONE     = $00
007AC0  2               REG_AY_A_COARSE_TONE   = $01
007AC0  2               REG_AY_B_FINE_TONE     = $02
007AC0  2               REG_AY_B_COARSE_TONE   = $03
007AC0  2               REG_AY_C_FINE_TONE     = $04
007AC0  2               REG_AY_C_COARSE_TONE   = $05
007AC0  2               REG_AY_NOISE           = $06
007AC0  2               REG_AY_ENABLE          = $07
007AC0  2               REG_AY_A_VOLUME        = $08
007AC0  2               REG_AY_B_VOLUME        = $09
007AC0  2               REG_AY_C_VOLUME        = $0A
007AC0  2               REG_AY_ENVELOPE_FINE   = $0B
007AC0  2               REG_AY_ENVELOPE_COARSE = $0C
007AC0  2               REG_AY_ENVELOPE_SHAPE  = $0D
007AC0  2               
007AC0  2               ; AY-3-8910 commands
007AC0  2                                                       ; DIR BC1 BC0
007AC0  2               MB_AY_RESET     =   $00                 ;  0   0   0
007AC0  2               MB_AY_INACTIVE  =   $04                 ;  1   0   0
007AC0  2               MB_AY_READ      =   $05                 ;  1   0   1
007AC0  2               MB_AY_WRITE     =   $06                 ;  1   1   0
007AC0  2               MB_AY_LATCH     =   $07                 ;  1   1   1
007AC0  2               
007AC0  2               ; offsets from slot address
007AC0  2               
007AC0  2               MB_6522_BASE1   =   $00
007AC0  2               MB_6522_BASE2   =   $80
007AC0  2               
007AC0  2               ; left speaker
007AC0  2               MB_6552_ORB1    =   $00                 ; #1 port B data
007AC0  2               MB_6552_ORA1    =   $01                 ; #1 port A data
007AC0  2               MB_6522_DDRB1   =   $02                 ; #1 data direction port B
007AC0  2               MB_6522_DDRA1   =   $03                 ; #1 data direction port A
007AC0  2               
007AC0  2               ; right speaker
007AC0  2               MB_6552_ORB2    =   $80                 ; #2 port B data
007AC0  2               MB_6552_ORA2    =   $81                 ; #2 port A data
007AC0  2               MB_6522_DDRB2   =   $82                 ; #2 data direction port B
007AC0  2               MB_6522_DDRA2   =   $83                 ; #2 data direction port A
007AC0  2               
007AC0  2               MB_6522_T1CL    =   $04                 ; #1 timer 1 low order counter
007AC0  2               MB_6522_T1CH    =   $05                 ; #1 timer 1 high order counter
007AC0  2               MB_6522_T1LL    =   $06                 ; #1 timer 1 low order latch
007AC0  2               MB_6522_T1LH    =   $07                 ; #1 timer 1 high order latch
007AC0  2               MB_6522_T2CL    =   $08                 ; #1 timer 2 low order counter
007AC0  2               MB_6522_T2CH    =   $09                 ; #1 timer 2 high order counter
007AC0  2               MB_6522_SR      =   $0A                 ; #1 shift register
007AC0  2               MB_6522_ACR     =   $0B                 ; #1 auxilliary control register
007AC0  2               MB_6522_PCR     =   $0C                 ; #1 peripheral control register
007AC0  2               MB_6522_IFR     =   $0D                 ; #1 interrupt flag register
007AC0  2               MB_6522_IER     =   $0E                 ; #1 interrupt enable register
007AC0  2               MB_6522_ORANH   =   $0F                 ; #1 port a data no handshake
007AC0  2               
007AC0  2               ;-------------------------------------------------------------------------------
007AC0  2               
007AC0  2  24 0F        init_sound      bit machine_type
007AC2  2  50 08                        bvc @1
007AC4  2               ; enable IIc mockingboard
007AC4  2  A9 FF                        lda #$ff
007AC6  2  8D 03 C4                     sta $c403
007AC9  2  8D 04 C4                     sta $c404
007ACC  2  A9 00        @1              lda #$00
007ACE  2  85 06                        sta mb_ptr
007AD0  2  A9 C7                        lda #$c7
007AD2  2  85 07                        sta mb_ptr_h
007AD4  2               ; detect mockingboard
007AD4  2  A0 04                        ldy #4
007AD6  2  A2 02        @2              ldx #2
007AD8  2  B1 06        @3              lda (mb_ptr),y
007ADA  2  85 00                        sta temp                ; 3
007ADC  2  B1 06                        lda (mb_ptr),y          ; 5
007ADE  2  38                           sec
007ADF  2  E5 00                        sbc temp
007AE1  2  C9 F8                        cmp #$f8
007AE3  2  D0 05                        bne @4
007AE5  2  CA                           dex
007AE6  2  D0 F0                        bne @3
007AE8  2  F0 0B                        beq mb_init             ; always
007AEA  2  C6 07        @4              dec mb_ptr_h
007AEC  2  A5 07                        lda mb_ptr_h
007AEE  2  C9 C0                        cmp #$c0
007AF0  2  D0 E4                        bne @2
007AF2  2  C6 06                        dec mb_ptr              ; not found
007AF4  2  60                           rts
007AF5  2               
007AF5  2  A9 FF        mb_init         lda #$ff                ; all output
007AF7  2  A0 02                        ldy #MB_6522_DDRB1
007AF9  2  20 FE 7A                     jsr @init
007AFC  2  A0 82                        ldy #MB_6522_DDRB2
007AFE  2  91 06        @init           sta (mb_ptr),y
007B00  2  C8                           iny
007B01  2  91 06                        sta (mb_ptr),y
007B03  2               ;               rts
007B03  2               
007B03  2  A0 00        mb_reset        ldy #MB_6552_ORB1
007B05  2  20 0A 7B                     jsr @reset
007B08  2  A0 80                        ldy #MB_6552_ORB2
007B0A  2  A9 00        @reset          lda #MB_AY_RESET
007B0C  2  91 06                        sta (mb_ptr),y
007B0E  2  A9 04                        lda #MB_AY_INACTIVE
007B10  2  91 06                        sta (mb_ptr),y
007B12  2               ;               rts
007B12  2               
007B12  2  A2 0D        mb_clear        ldx #13
007B14  2  A9 00        @1              lda #0
007B16  2  20 1D 7B                     jsr mb_write
007B19  2  CA                           dex
007B1A  2  10 F8                        bpl @1
007B1C  2  60                           rts
007B1D  2               ;
007B1D  2               ; On entry:
007B1D  2               ;   X: register
007B1D  2               ;   A: value
007B1D  2               ;
007B1D  2               ; On exit:
007B1D  2               ;   X: unchanged
007B1D  2               ;
007B1D  2  A4 06        mb_write        ldy mb_ptr
007B1F  2  D0 2B                        bne @no_sound
007B21  2               
007B21  2  48                           pha
007B22  2  8A                           txa
007B23  2  20 44 7B                     jsr @write_a
007B26  2  A9 07                        lda #MB_AY_LATCH
007B28  2  20 3B 7B                     jsr @write_b
007B2B  2  A9 04                        lda #MB_AY_INACTIVE
007B2D  2  20 3B 7B                     jsr @write_b
007B30  2  68                           pla
007B31  2  20 44 7B                     jsr @write_a
007B34  2  A9 06                        lda #MB_AY_WRITE
007B36  2  20 3B 7B                     jsr @write_b
007B39  2  A9 04                        lda #MB_AY_INACTIVE
007B3B  2                               ; fall through
007B3B  2               
007B3B  2  A0 00        @write_b        ldy #MB_6552_ORB1
007B3D  2  91 06                        sta (mb_ptr),y
007B3F  2  A0 80                        ldy #MB_6552_ORB2
007B41  2  91 06                        sta (mb_ptr),y
007B43  2  60                           rts
007B44  2               
007B44  2  A0 01        @write_a        ldy #MB_6552_ORA1
007B46  2  91 06                        sta (mb_ptr),y
007B48  2  A0 81                        ldy #MB_6552_ORA2
007B4A  2  91 06                        sta (mb_ptr),y
007B4C  2  60           @no_sound       rts
007B4D  2               
007B4D  2               ;-------------------------------------------------------------------------------
007B4D  2               
007B4D  2               ; volume:      4-bits  (atari: 4-bits)
007B4D  2               ; noise pitch: 5-bits  (atari: 5-bits)
007B4D  2               ; tone pitch: 12-bits  (atari: 5-bits on 3/3 pattern)
007B4D  2               
007B4D  2               ; Tone Freq  = A2 Clock Freq/ [ (4096 x Coarse) + (16 x Fine) ]
007B4D  2               ; Noise Freq = A2 Clock Freq/ (16 x NG value)
007B4D  2               
007B4D  2               ; a2freq = 1023000
007B4D  2               ; mbfreq = 63938    ; a2freq / 16 = 63937.5
007B4D  2               ; atfreq = 32400    ; NTSC: 31399.5 Hz (3.579545MHz/114)
007B4D  2               
007B4D  2               ; Mockingboard baseline frequency works out to be approximately
007B4D  2               ;   2x the baseine frequency of the Atari 2600.  So, any frequency
007B4D  2               ;   divider value from the Atari needs to be doubled to get the
007B4D  2               ;   same pitch on the Mockingboard.
007B4D  2               
007B4D  2               update_sound
007B4D  2               
007B4D  2               ; play bonus bucket sound (highest priority)
007B4D  2               ;
007B4D  2               ; bonus_sound ($3F -> $01)
007B4D  2               ;
007B4D  2               ; control = "div 6 : pure tone"
007B4D  2               ; if (bonus_sound & 2)
007B4D  2               ;     freq = bonus_sound >> 2
007B4D  2               ; else
007B4D  2               ;     freq = bonus_sound
007B4D  2               ; volume = #$0C
007B4D  2               ;
007B4D  2  A5 B0                        lda bonus_sound
007B4F  2  F0 30                        beq @2
007B51  2  C6 B0                        dec bonus_sound
007B53  2  AA                           tax                     ; tone6 freq = bonus_sound
007B54  2  29 02                        and #2
007B56  2  F0 04                        beq @1
007B58  2  8A                           txa                     ; if (bonus_sound & 2)
007B59  2  4A                           lsr                     ;   tone6 freq = bonus_sound >> 2
007B5A  2  4A                           lsr
007B5B  2  AA                           tax
007B5C  2  8A           @1              txa
007B5D  2  29 1F                        and #$1f                ; original assumes bits 7:5 ignored
007B5F  2  0A                           asl
007B60  2  AA                           tax
007B61  2  BD 19 7C                     lda tone6_table+1,x
007B64  2  48                           pha
007B65  2  BD 18 7C                     lda tone6_table+0,x
007B68  2  A2 00                        ldx #REG_AY_A_FINE_TONE
007B6A  2  20 1D 7B                     jsr mb_write
007B6D  2  68                           pla
007B6E  2  A2 01                        ldx #REG_AY_A_COARSE_TONE
007B70  2  20 1D 7B                     jsr mb_write
007B73  2  A2 08                        ldx #REG_AY_A_VOLUME
007B75  2  A9 0C                        lda #$0C
007B77  2  20 1D 7B                     jsr mb_write            ; channel A volume = #$0C
007B7A  2  A2 07                        ldx #REG_AY_ENABLE
007B7C  2  A9 3E                        lda #$3e
007B7E  2  4C 1D 7B                     jmp mb_write            ; enable tone channel A
007B81  2               
007B81  2               ; play bomb explosion sound
007B81  2               ;
007B81  2               ; exp_bomb_frame ($2B-1 -> $01), ($20-1 -> $01)
007B81  2               ;
007B81  2               ; control = white noise
007B81  2               ; if (exp_bomb_frame + exp_bomb_index < #$20)
007B81  2               ;     volume = (exp_bomb_frame + exp_bomb_index) >> 1
007B81  2               ;     freq = #$1F
007B81  2               ; else
007B81  2               ;     volume = exp_bomb_frame + exp_bomb_index
007B81  2               ;     freq = #$08
007B81  2               ;
007B81  2  A5 AE        @2              lda exp_bomb_frame
007B83  2  F0 25                        beq @5
007B85  2  18                           clc
007B86  2  65 AC                        adc exp_bomb_index
007B88  2  A2 08                        ldx #REG_AY_A_VOLUME
007B8A  2  C9 20                        cmp #$20
007B8C  2  B0 08                        bcs @3
007B8E  2               ; if (exp_bomb_frame + exp_bomb_index < #$20)
007B8E  2  4A                           lsr
007B8F  2  20 1D 7B                     jsr mb_write            ; volume = (exp_bomb_frame + exp_bomb_index) >> 1
007B92  2  A2 1F                        ldx #$1F                ; noise freq = #$1F
007B94  2  D0 05                        bne @4                  ; always
007B96  2               
007B96  2               ; else (exp_bomb_frame + exp_bomb_index >= #$20)
007B96  2  20 1D 7B     @3              jsr mb_write            ; volume = exp_bomb_frame + exp_bomb_index
007B99  2  A2 08                        ldx #$08                ; noise freq = #$08
007B9B  2  BD 58 7C     @4              lda noise_table,x
007B9E  2  A2 06                        ldx #REG_AY_NOISE
007BA0  2  20 1D 7B                     jsr mb_write
007BA3  2  A2 07                        ldx #REG_AY_ENABLE
007BA5  2  A9 37                        lda #$37
007BA7  2  4C 1D 7B                     jmp mb_write            ; enable noise channel A
007BAA  2               
007BAA  2               ; play bucket splash sound
007BAA  2               ;
007BAA  2               ; splash_frame ($10 -> $01)
007BAA  2               ;
007BAA  2               ; if (splash_frame >= $0F)
007BAA  2               ;   control = "div 6 : pure tone"
007BAA  2               ;   freq = splash_frame - game_wave
007BAA  2               ;   volume = 12
007BAA  2               ; else
007BAA  2               ;   control = white noise
007BAA  2               ;   freq = splash_frame
007BAA  2               ;   volume = 8
007BAA  2               ;
007BAA  2  A5 AF        @5              lda splash_frame
007BAC  2  F0 42                        beq @7
007BAE  2  C9 0F                        cmp #$0F
007BB0  2  90 27                        bcc @6
007BB2  2               ; if splash_frame >= #$0F
007BB2  2  38                           sec
007BB3  2  E5 A2                        sbc player_wave
007BB5  2  29 1F                        and #$1f
007BB7  2  0A                           asl
007BB8  2  AA                           tax
007BB9  2  BD 19 7C                     lda tone6_table+1,x
007BBC  2  48                           pha
007BBD  2  BD 18 7C                     lda tone6_table+0,x
007BC0  2  A2 00                        ldx #REG_AY_A_FINE_TONE
007BC2  2  20 1D 7B                     jsr mb_write            ; tone freq = splash_frame - game_wave
007BC5  2  68                           pla
007BC6  2  A2 01                        ldx #REG_AY_A_COARSE_TONE
007BC8  2  20 1D 7B                     jsr mb_write
007BCB  2  A2 08                        ldx #REG_AY_A_VOLUME
007BCD  2  A9 0C                        lda #$0C
007BCF  2  20 1D 7B                     jsr mb_write            ; volume = #$0C
007BD2  2  A2 07                        ldx #REG_AY_ENABLE
007BD4  2  A9 3E                        lda #$3e
007BD6  2  4C 1D 7B                     JMP mb_write            ; enable tone channel A
007BD9  2               
007BD9  2               ; if splash_frame < #$0F
007BD9  2  AA           @6              tax
007BDA  2  BD 58 7C                     lda noise_table,x
007BDD  2  A2 06                        ldx #REG_AY_NOISE
007BDF  2  20 1D 7B                     jsr mb_write            ; noise pitch = splash_frame
007BE2  2  A2 08                        ldx #REG_AY_A_VOLUME
007BE4  2  A9 08                        lda #$08
007BE6  2  20 1D 7B                     jsr mb_write            ; volume = #$08
007BE9  2  A2 07                        ldx #REG_AY_ENABLE
007BEB  2  A9 37                        lda #$37
007BED  2  4C 1D 7B                     jmp mb_write            ; enable noise channel A
007BF0  2               
007BF0  2               ; play active bomb fuse burn sound
007BF0  2               ;
007BF0  2               ; rnd_0123 = random & 3
007BF0  2               ; control = white noise
007BF0  2               ; freq = rnd_0123
007BF0  2               ; volume = rnd_0123 >> 1
007BF0  2               ;
007BF0  2  A5 88        @7              lda active_bombs
007BF2  2  F0 1D                        beq @8
007BF4  2  20 61 45                     jsr random
007BF7  2  29 03                        and #$03
007BF9  2  48                           pha
007BFA  2  AA                           tax
007BFB  2  BD 58 7C                     lda noise_table,x
007BFE  2  A2 06                        ldx #REG_AY_NOISE
007C00  2  20 1D 7B                     jsr mb_write            ; noise freq = rnd_0123
007C03  2  68                           pla
007C04  2  4A                           lsr
007C05  2  A2 08                        ldx #REG_AY_A_VOLUME
007C07  2  20 1D 7B                     jsr mb_write            ; volume = rnd_0123 >> 1
007C0A  2  A2 07                        ldx #REG_AY_ENABLE
007C0C  2  A9 37                        lda #$37
007C0E  2  4C 1D 7B                     jmp mb_write            ; enable noise channel A
007C11  2               
007C11  2               ; no sound active
007C11  2               ;
007C11  2  A2 07        @8              ldx #REG_AY_ENABLE
007C13  2  A9 3F                        lda #$3f
007C15  2  4C 1D 7B                     jmp mb_write            ; disable all channels
007C18  2               
007C18  2  0C 00        tone6_table     .word 6*1*2             ; *2 MB adjust
007C1A  2  18 00                        .word 6*2*2
007C1C  2  24 00                        .word 6*3*2
007C1E  2  30 00                        .word 6*4*2
007C20  2  3C 00                        .word 6*5*2
007C22  2  48 00                        .word 6*6*2
007C24  2  54 00                        .word 6*7*2
007C26  2  60 00                        .word 6*8*2
007C28  2  6C 00                        .word 6*9*2
007C2A  2  78 00                        .word 6*10*2
007C2C  2  84 00                        .word 6*11*2
007C2E  2  90 00                        .word 6*12*2
007C30  2  9C 00                        .word 6*13*2
007C32  2  A8 00                        .word 6*14*2
007C34  2  B4 00                        .word 6*15*2
007C36  2  C0 00                        .word 6*16*2
007C38  2  CC 00                        .word 6*17*2
007C3A  2  D8 00                        .word 6*18*2
007C3C  2  E4 00                        .word 6*19*2
007C3E  2  F0 00                        .word 6*20*2
007C40  2  FC 00                        .word 6*21*2
007C42  2  08 01                        .word 6*22*2
007C44  2  14 01                        .word 6*23*2
007C46  2  20 01                        .word 6*24*2
007C48  2  2C 01                        .word 6*25*2
007C4A  2  38 01                        .word 6*26*2
007C4C  2  44 01                        .word 6*27*2
007C4E  2  50 01                        .word 6*28*2
007C50  2  5C 01                        .word 6*29*2
007C52  2  68 01                        .word 6*30*2
007C54  2  74 01                        .word 6*31*2
007C56  2  80 01                        .word 6*32*2
007C58  2               
007C58  2               ; (x + 1) * 2 - 1
007C58  2  01 03 05 07  noise_table     .byte 1,3,5,7,9
007C5C  2  09           
007C5D  2  0B 0D 0F 11                  .byte 11,13,15,17,19
007C61  2  13           
007C62  2  15 17 19 1B                  .byte 21,23,25,27,29
007C66  2  1D           
007C67  2  1F 21 23 25                  .byte 31,33,35,37,39
007C6B  2  27           
007C6C  2  29 2B 2D 2F                  .byte 41,43,45,47,49
007C70  2  31           
007C71  2  33 35 37 39                  .byte 51,53,55,57,59
007C75  2  3B           
007C76  2  3D 3F                        .byte 61,63
007C78  2               
007C78  2               ;-------------------------------------------------------------------------------
007C78  2               
007C78  1               
